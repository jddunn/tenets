# Release Drafter Configuration
# This file configures how release notes are auto-generated
# Location: .github/release-drafter.yml (NOT in workflows/)
# Used by: .github/workflows/release-drafter.yml workflow

# Template for release name and tag
name-template: 'v$RESOLVED_VERSION'
tag-template: 'v$RESOLVED_VERSION'

# How to determine version bumps from labels
version-resolver:
  major:
    labels:
      - 'breaking'
      - 'major'
  minor:
    labels:
      - 'feature'
      - 'feat'
      - 'enhancement'
  patch:
    labels:
      - 'fix'
      - 'bugfix'
      - 'bug'
      - 'patch'
      - 'perf'
      - 'refactor'
  default: patch

# Categories for organizing release notes
categories:
  - title: 'üö® Breaking Changes'
    labels:
      - 'breaking'
      - 'major'
  - title: '‚ú® New Features'
    labels:
      - 'feature'
      - 'feat'
      - 'enhancement'
  - title: 'üêõ Bug Fixes'
    labels:
      - 'fix'
      - 'bugfix'
      - 'bug'
  - title: '‚ö° Performance Improvements'
    labels:
      - 'perf'
      - 'performance'
      - 'optimization'
  - title: 'üîß Refactoring'
    labels:
      - 'refactor'
      - 'refactoring'
  - title: 'üìö Documentation'
    labels:
      - 'docs'
      - 'documentation'
  - title: 'üß™ Tests'
    labels:
      - 'test'
      - 'tests'
      - 'testing'
  - title: 'üîí Security'
    labels:
      - 'security'
      - 'vulnerability'
  - title: 'üèóÔ∏è Build System / CI'
    labels:
      - 'ci'
      - 'build'
      - 'devops'
      - 'infrastructure'
  - title: 'üì¶ Dependencies'
    labels:
      - 'dependencies'
      - 'deps'
  - title: 'üßπ Chores'
    labels:
      - 'chore'
      - 'maintenance'

# Exclude these labels from release notes
exclude-labels:
  - 'skip-changelog'
  - 'wip'
  - 'duplicate'
  - 'invalid'
  - 'wontfix'

# Exclude these contributors from release notes
exclude-contributors:
  - 'dependabot'
  - 'dependabot[bot]'
  - 'github-actions'
  - 'github-actions[bot]'

# Template for each change line
change-template: '- $TITLE @$AUTHOR (#$NUMBER)'

# Template for when there are no changes
no-changes-template: '- No changes in this release'

# Sort direction for pull requests
sort-direction: 'ascending'

# How to handle version bumps
version-template: |
  ## Changes in $RESOLVED_VERSION

# The template for the entire release body
template: |
  ## üéâ Release v$RESOLVED_VERSION
  
  ### üìä Summary
  **Released**: $PUBLISHED_AT
  **Compare**: [`$PREVIOUS_TAG...v$RESOLVED_VERSION`]($REPOSITORY/compare/$PREVIOUS_TAG...v$RESOLVED_VERSION)
  
  ### üìù What's Changed
  $CHANGES
  
  ### üì¶ Installation
  
  #### PyPI
  ```bash
  pip install tenets==$RESOLVED_VERSION
  ```
  
  #### Docker
  ```bash
  docker pull jddunn/tenets:$RESOLVED_VERSION
  ```
  
  #### Standalone Binaries
  Download from the [release assets]($REPOSITORY/releases/tag/v$RESOLVED_VERSION) below.
  
  ### üë• Contributors
  $CONTRIBUTORS
  
  ### üìö Documentation
  - [Documentation](https://tenets.dev/docs)
  - [Changelog](https://github.com/jddunn/tenets/blob/main/CHANGELOG.md)
  
  ---
  **Full Changelog**: $REPOSITORY/compare/$PREVIOUS_TAG...v$RESOLVED_VERSION
  
  _Generated by [Release Drafter](https://github.com/release-drafter/release-drafter)_

# Replacers to clean up commit messages
replacers:
  # Remove conventional commit prefixes
  - search: '/^(\w+)(?:\(([^)]+)\))?: (.+)$/gm'
    replace: '$3'
  # Remove issue numbers from titles
  - search: '/\s*\(#\d+\)$/g'
    replace: ''

# Autolabeler rules (requires autolabeler: true in workflow)
autolabeler:
  - label: 'feat'
    title:
      - '/^feat/i'
  - label: 'fix'
    title:
      - '/^fix/i'
  - label: 'perf'
    title:
      - '/^perf/i'
  - label: 'docs'
    title:
      - '/^docs/i'
  - label: 'test'
    title:
      - '/^test/i'
  - label: 'ci'
    title:
      - '/^ci/i'
  - label: 'chore'
    title:
      - '/^chore/i'
  - label: 'breaking'
    title:
      - '/BREAKING CHANGE/i'
  - label: 'dependencies'
    files:
      - 'pyproject.toml'
      - 'requirements*.txt'
      - 'Pipfile*'
  - label: 'documentation'
    files:
      - '*.md'
      - 'docs/**'
  - label: 'ci'
    files:
      - '.github/**'