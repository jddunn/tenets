<!doctype html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="MCP server for context that feeds your prompts. Intelligent code context aggregation + automatic guiding principles injection. 100% local, works with Cursor, Claude, Windsurf."><meta name=author content="Johnny Dunn"><link href=https://tenets.dev/dev/api/tenets/core/ranking/strategies/ rel=canonical><link href=../ranker/ rel=prev><link href=../ rel=next><link rel=icon href=../../../../../favicon/favicon.ico><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.7.0"><title>strategies - Tenets</title><link rel=stylesheet href=../../../../../assets/stylesheets/main.618322db.min.css><link rel=stylesheet href=../../../../../assets/stylesheets/palette.ab4e12ef.min.css><style>:root{--md-admonition-icon--note:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M1%207.775V2.75C1%201.784%201.784%201%202.75%201h5.025c.464%200%20.91.184%201.238.513l6.25%206.25a1.75%201.75%200%200%201%200%202.474l-5.026%205.026a1.75%201.75%200%200%201-2.474%200l-6.25-6.25A1.75%201.75%200%200%201%201%207.775m1.5%200c0%20.066.026.13.073.177l6.25%206.25a.25.25%200%200%200%20.354%200l5.025-5.025a.25.25%200%200%200%200-.354l-6.25-6.25a.25.25%200%200%200-.177-.073H2.75a.25.25%200%200%200-.25.25ZM6%205a1%201%200%201%201%200%202%201%201%200%200%201%200-2%22/%3E%3C/svg%3E');--md-admonition-icon--abstract:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M2.5%201.75v11.5c0%20.138.112.25.25.25h3.17a.75.75%200%200%201%200%201.5H2.75A1.75%201.75%200%200%201%201%2013.25V1.75C1%20.784%201.784%200%202.75%200h8.5C12.216%200%2013%20.784%2013%201.75v7.736a.75.75%200%200%201-1.5%200V1.75a.25.25%200%200%200-.25-.25h-8.5a.25.25%200%200%200-.25.25m13.274%209.537zl-4.557%204.45a.75.75%200%200%201-1.055-.008l-1.943-1.95a.75.75%200%200%201%201.062-1.058l1.419%201.425%204.026-3.932a.75.75%200%201%201%201.048%201.074M4.75%204h4.5a.75.75%200%200%201%200%201.5h-4.5a.75.75%200%200%201%200-1.5M4%207.75A.75.75%200%200%201%204.75%207h2a.75.75%200%200%201%200%201.5h-2A.75.75%200%200%201%204%207.75%22/%3E%3C/svg%3E');--md-admonition-icon--info:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M0%208a8%208%200%201%201%2016%200A8%208%200%200%201%200%208m8-6.5a6.5%206.5%200%201%200%200%2013%206.5%206.5%200%200%200%200-13M6.5%207.75A.75.75%200%200%201%207.25%207h1a.75.75%200%200%201%20.75.75v2.75h.25a.75.75%200%200%201%200%201.5h-2a.75.75%200%200%201%200-1.5h.25v-2h-.25a.75.75%200%200%201-.75-.75M8%206a1%201%200%201%201%200-2%201%201%200%200%201%200%202%22/%3E%3C/svg%3E');--md-admonition-icon--tip:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M3.499.75a.75.75%200%200%201%201.5%200v.996C5.9%202.903%206.793%203.65%207.662%204.376l.24.202c-.036-.694.055-1.422.426-2.163C9.1.873%2010.794-.045%2012.622.26%2014.408.558%2016%201.94%2016%204.25c0%201.278-.954%202.575-2.44%202.734l.146.508.065.22c.203.701.412%201.455.476%202.226.142%201.707-.4%203.03-1.487%203.898C11.714%2014.671%2010.27%2015%208.75%2015h-6a.75.75%200%200%201%200-1.5h1.376a4.5%204.5%200%200%201-.563-1.191%203.84%203.84%200%200%201-.05-2.063%204.65%204.65%200%200%201-2.025-.293.75.75%200%200%201%20.525-1.406c1.357.507%202.376-.006%202.698-.318l.009-.01a.747.747%200%200%201%201.06%200%20.75.75%200%200%201-.012%201.074c-.912.92-.992%201.835-.768%202.586.221.74.745%201.337%201.196%201.621H8.75c1.343%200%202.398-.296%203.074-.836.635-.507%201.036-1.31.928-2.602-.05-.603-.216-1.224-.422-1.93l-.064-.221c-.12-.407-.246-.84-.353-1.29a2.4%202.4%200%200%201-.507-.441%203.1%203.1%200%200%201-.633-1.248.75.75%200%200%201%201.455-.364c.046.185.144.436.31.627.146.168.353.305.712.305.738%200%201.25-.615%201.25-1.25%200-1.47-.95-2.315-2.123-2.51-1.172-.196-2.227.387-2.706%201.345-.46.92-.27%201.774.019%203.062l.042.19.01.05c.348.443.666.949.94%201.553a.75.75%200%201%201-1.365.62c-.553-1.217-1.32-1.94-2.3-2.768L6.7%205.527c-.814-.68-1.75-1.462-2.692-2.619a3.7%203.7%200%200%200-1.023.88c-.406.495-.663%201.036-.722%201.508.116.122.306.21.591.239.388.038.797-.06%201.032-.19a.75.75%200%200%201%20.728%201.31c-.515.287-1.23.439-1.906.373-.682-.067-1.473-.38-1.879-1.193L.75%205.677V5.5c0-.984.48-1.94%201.077-2.664.46-.559%201.05-1.055%201.673-1.353z%22/%3E%3C/svg%3E');--md-admonition-icon--success:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M13.78%204.22a.75.75%200%200%201%200%201.06l-7.25%207.25a.75.75%200%200%201-1.06%200L2.22%209.28a.75.75%200%200%201%20.018-1.042.75.75%200%200%201%201.042-.018L6%2010.94l6.72-6.72a.75.75%200%200%201%201.06%200%22/%3E%3C/svg%3E');--md-admonition-icon--question:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M0%208a8%208%200%201%201%2016%200A8%208%200%200%201%200%208m8-6.5a6.5%206.5%200%201%200%200%2013%206.5%206.5%200%200%200%200-13M6.92%206.085h.001a.749.749%200%201%201-1.342-.67c.169-.339.436-.701.849-.977C6.845%204.16%207.369%204%208%204a2.76%202.76%200%200%201%201.637.525c.503.377.863.965.863%201.725%200%20.448-.115.83-.329%201.15-.205.307-.47.513-.692.662-.109.072-.22.138-.313.195l-.006.004a6%206%200%200%200-.26.16%201%201%200%200%200-.276.245.75.75%200%200%201-1.248-.832c.184-.264.42-.489.692-.661q.154-.1.313-.195l.007-.004c.1-.061.182-.11.258-.161a1%201%200%200%200%20.277-.245C8.96%206.514%209%206.427%209%206.25a.61.61%200%200%200-.262-.525A1.27%201.27%200%200%200%208%205.5c-.369%200-.595.09-.74.187a1%201%200%200%200-.34.398M9%2011a1%201%200%201%201-2%200%201%201%200%200%201%202%200%22/%3E%3C/svg%3E');--md-admonition-icon--warning:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M6.457%201.047c.659-1.234%202.427-1.234%203.086%200l6.082%2011.378A1.75%201.75%200%200%201%2014.082%2015H1.918a1.75%201.75%200%200%201-1.543-2.575Zm1.763.707a.25.25%200%200%200-.44%200L1.698%2013.132a.25.25%200%200%200%20.22.368h12.164a.25.25%200%200%200%20.22-.368Zm.53%203.996v2.5a.75.75%200%200%201-1.5%200v-2.5a.75.75%200%200%201%201.5%200M9%2011a1%201%200%201%201-2%200%201%201%200%200%201%202%200%22/%3E%3C/svg%3E');--md-admonition-icon--failure:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M2.344%202.343za8%208%200%200%201%2011.314%2011.314A8.002%208.002%200%200%201%20.234%2010.089a8%208%200%200%201%202.11-7.746m1.06%2010.253a6.5%206.5%200%201%200%209.108-9.275%206.5%206.5%200%200%200-9.108%209.275M6.03%204.97%208%206.94l1.97-1.97a.749.749%200%200%201%201.275.326.75.75%200%200%201-.215.734L9.06%208l1.97%201.97a.749.749%200%200%201-.326%201.275.75.75%200%200%201-.734-.215L8%209.06l-1.97%201.97a.749.749%200%200%201-1.275-.326.75.75%200%200%201%20.215-.734L6.94%208%204.97%206.03a.75.75%200%200%201%20.018-1.042.75.75%200%200%201%201.042-.018%22/%3E%3C/svg%3E');--md-admonition-icon--danger:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M9.504.43a1.516%201.516%200%200%201%202.437%201.713L10.415%205.5h2.123c1.57%200%202.346%201.909%201.22%203.004l-7.34%207.142a1.25%201.25%200%200%201-.871.354h-.302a1.25%201.25%200%200%201-1.157-1.723L5.633%2010.5H3.462c-1.57%200-2.346-1.909-1.22-3.004zm1.047%201.074L3.286%208.571A.25.25%200%200%200%203.462%209H6.75a.75.75%200%200%201%20.694%201.034l-1.713%204.188%206.982-6.793A.25.25%200%200%200%2012.538%207H9.25a.75.75%200%200%201-.683-1.06l2.008-4.418.003-.006-.004-.009-.006-.006-.008-.001q-.005%200-.009.004%22/%3E%3C/svg%3E');--md-admonition-icon--bug:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M4.72.22a.75.75%200%200%201%201.06%200l1%20.999a3.5%203.5%200%200%201%202.441%200l.999-1a.748.748%200%200%201%201.265.332.75.75%200%200%201-.205.729l-.775.776c.616.63.995%201.493.995%202.444v.327q0%20.15-.025.292c.408.14.764.392%201.029.722l1.968-.787a.75.75%200%200%201%20.556%201.392L13%207.258V9h2.25a.75.75%200%200%201%200%201.5H13v.5q-.002.615-.141%201.186l2.17.868a.75.75%200%200%201-.557%201.392l-2.184-.873A5%205%200%200%201%208%2016a5%205%200%200%201-4.288-2.427l-2.183.873a.75.75%200%200%201-.558-1.392l2.17-.868A5%205%200%200%201%203%2011v-.5H.75a.75.75%200%200%201%200-1.5H3V7.258L.971%206.446a.75.75%200%200%201%20.558-1.392l1.967.787c.265-.33.62-.583%201.03-.722a1.7%201.7%200%200%201-.026-.292V4.5c0-.951.38-1.814.995-2.444L4.72%201.28a.75.75%200%200%201%200-1.06m.53%206.28a.75.75%200%200%200-.75.75V11a3.5%203.5%200%201%200%207%200V7.25a.75.75%200%200%200-.75-.75ZM6.173%205h3.654A.17.17%200%200%200%2010%204.827V4.5a2%202%200%201%200-4%200v.327c0%20.096.077.173.173.173%22/%3E%3C/svg%3E');--md-admonition-icon--example:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5%205.782V2.5h-.25a.75.75%200%200%201%200-1.5h6.5a.75.75%200%200%201%200%201.5H11v3.282l3.666%205.76C15.619%2013.04%2014.543%2015%2012.767%2015H3.233c-1.776%200-2.852-1.96-1.899-3.458Zm-2.4%206.565a.75.75%200%200%200%20.633%201.153h9.534a.75.75%200%200%200%20.633-1.153L12.225%2010.5h-8.45ZM9.5%202.5h-3V6c0%20.143-.04.283-.117.403L4.73%209h6.54L9.617%206.403A.75.75%200%200%201%209.5%206Z%22/%3E%3C/svg%3E');--md-admonition-icon--quote:url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M1.75%202.5h10.5a.75.75%200%200%201%200%201.5H1.75a.75.75%200%200%201%200-1.5m4%205h8.5a.75.75%200%200%201%200%201.5h-8.5a.75.75%200%200%201%200-1.5m0%205h8.5a.75.75%200%200%201%200%201.5h-8.5a.75.75%200%200%201%200-1.5M2.5%207.75v6a.75.75%200%200%201-1.5%200v-6a.75.75%200%200%201%201.5%200%22/%3E%3C/svg%3E');}</style><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,700,700i%7CJetBrains+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Inter";--md-code-font:"JetBrains Mono"}</style><link rel=stylesheet href=../../../../../css/timeago.css><link rel=stylesheet href=../../../../../assets/_mkdocstrings.css><link rel=stylesheet href=../../../../../styles/variables.css><link rel=stylesheet href=../../../../../styles/accessibility.css><link rel=stylesheet href=../../../../../styles/header.css><link rel=stylesheet href=../../../../../styles/buttons.css><link rel=stylesheet href=../../../../../styles/cards.css><link rel=stylesheet href=../../../../../styles/footer.css><link rel=stylesheet href=../../../../../styles/animations.css><link rel=stylesheet href=../../../../../styles/hero.css><link rel=stylesheet href=../../../../../styles/terminal.css><link rel=stylesheet href=../../../../../styles/back-to-top.css><link rel=stylesheet href=../../../../../styles/image-modal.css><link rel=stylesheet href=../../../../../styles/mobile.css><link rel=stylesheet href=../../../../../styles/victorian.css><link rel=stylesheet href=../../../../../styles/neumorphic.css><link rel=stylesheet href=../../../../../styles/see-it-in-action.css><link rel=stylesheet href=../../../../../styles/toast.css><link rel=stylesheet href=../../../../../styles/overrides.css><script>__md_scope=new URL("../../../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config",""),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script><script>"undefined"!=typeof __md_analytics&&__md_analytics()</script><link rel=dns-prefetch href=https://github.com><link rel=dns-prefetch href=https://pypi.org><link rel=dns-prefetch href=https://fonts.googleapis.com><link rel=dns-prefetch href=https://fonts.gstatic.com><link rel=preconnect href=https://fonts.googleapis.com crossorigin><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=alternate type=text/plain href=../../../../../llms.txt title="LLM Context"><link rel=alternate hreflang=en href=https://tenets.dev/dev><link rel=alternate hreflang=x-default href=https://tenets.dev/dev><meta name=description content="MCP server for context that feeds your prompts. Intelligent code context aggregation + automatic guiding principles injection. 100% local, works with Cursor, Claude, Windsurf."><meta name=keywords content="tenets, tenets.dev, tenets MCP, tenets Python, tenets CLI, tenets library, tenets LLM, MCP server, Model Context Protocol, code context, AI coding, LLM tools, developer tools, Cursor MCP, Claude Desktop MCP, Windsurf MCP, AI coding assistant, Python library, free open source, 100% local, guiding principles injection"><meta name=author content="Johnny Dunn, manic.agency"><meta name=robots content="index, follow, max-image-preview:large"><link href=https://tenets.dev/dev/api/tenets/core/ranking/strategies/ rel=canonical><meta property=og:title content="strategies - Tenets"><meta property=og:description content="MCP server for context that feeds your prompts. Intelligent code context aggregation + automatic guiding principles injection. 100% local, works with Cursor, Claude, Windsurf."><meta property=og:type content=website><meta content=https://tenets.dev/dev/api/tenets/core/ranking/strategies/ property=og:url><meta property=og:image content=https://tenets.dev/dev/assets/og-image.png><meta property=og:image:width content=1200><meta property=og:image:height content=630><meta property=og:image:alt content="Tenets - MCP server for context that feeds your prompts"><meta property=og:site_name content=Tenets><meta property=og:locale content=en_US><meta name=twitter:card content=summary_large_image><meta name=twitter:title content="strategies - Tenets"><meta name=twitter:description content="MCP server for context that feeds your prompts. Intelligent code context aggregation + automatic guiding principles injection. 100% local, works with Cursor, Claude, Windsurf."><meta name=twitter:image content=https://tenets.dev/dev/assets/og-image.png><meta name=twitter:image:alt content="Tenets - MCP server for context that feeds your prompts"><meta name=twitter:site content=@manicagency><meta name=twitter:creator content=@manicagency><link rel=apple-touch-icon sizes=180x180 href=favicon/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=favicon/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=favicon/favicon-16x16.png><link rel=manifest href=../../../../../favicon/site.webmanifest><script type=application/ld+json>
  {
    "@context": "https://schema.org",
    "@type": "SoftwareApplication",
    "name": "Tenets",
    "alternateName": "Tenets MCP Server",
    "description": "MCP server for context that feeds your prompts. Intelligent code context aggregation + automatic guiding principles injection. 100% local, works with Cursor, Claude, Windsurf.",
    "url": "https://tenets.dev",
    "applicationCategory": "DeveloperApplication",
    "operatingSystem": "Windows, macOS, Linux",
    "softwareVersion": "0.7.4",
    "programmingLanguage": "Python",
    "downloadUrl": "https://pypi.org/project/tenets/",
    "installUrl": "https://pypi.org/project/tenets/",
    "screenshot": "https://tenets.dev/logos/tenets_dark_icon_transparent_cropped.png",
    "keywords": "tenets, tenets.dev, tenets MCP server, tenets Python library, tenets CLI, Model Context Protocol, AI coding assistant, code context, Cursor MCP, Claude MCP, Windsurf MCP, free open source, LLM tools, 100% local, guiding principles injection",
    "featureList": [
      "Intelligent code context aggregation - NLP-powered file ranking finds exactly what your AI needs",
      "Automatic guiding principles injection - tenets auto-injected into every prompt for consistency",
      "Free open source MCP server - MIT license",
      "100% local processing - no API costs, no data leaving your machine",
      "Native support for Cursor, Claude Desktop, Windsurf",
      "Multi-factor relevance ranking (BM25, TF-IDF, import centrality, git signals)",
      "Session management with pinned files",
      "Context drift prevention in long conversations"
    ],
    "offers": {
      "@type": "Offer",
      "price": "0",
      "priceCurrency": "USD"
    },
    "author": {
      "@type": "Organization",
      "name": "manic.agency",
      "url": "https://manic.agency",
      "email": "team@manic.agency"
    },
    "maintainer": {
      "@type": "Person",
      "name": "Johnny Dunn",
      "url": "https://jddunn.github.io"
    },
    "license": "https://opensource.org/licenses/MIT",
    "sameAs": [
      "https://github.com/jddunn/tenets",
      "https://pypi.org/project/tenets/"
    ]
  }
  </script><script type=application/ld+json>
  {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
      {
        "@type": "ListItem",
        "position": 1,
        "name": "Tenets",
        "item": "https://tenets.dev/"
      }
      
      ,{
        "@type": "ListItem",
        "position": 2,
        "name": "ranking",
        "item": "https://tenets.dev/"
      }
      ,{
        "@type": "ListItem",
        "position": 3,
        "name": "strategies",
        "item": "https://tenets.dev/api/tenets/core/ranking/strategies/"
      }
      
    ]
  }
  </script><script type=application/ld+json>
  {
    "@context": "https://schema.org",
    "@type": "Organization",
    "name": "manic.agency",
    "url": "https://manic.agency",
    "logo": "https://manic.agency/logo.png",
    "email": "team@manic.agency",
    "sameAs": [
      "https://twitter.com/manicagency",
      "https://github.com/jddunn"
    ]
  }
  </script></head><body dir=ltr data-md-color-scheme=default data-md-color-primary=custom data-md-color-accent=amber><input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off><input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off><label class=md-overlay for=__drawer></label><div data-md-component=skip><a href=#strategies class=md-skip> Skip to content </a></div><div data-md-component=announce></div><header class="md-header md-header--shadow md-header--lifted" data-md-component=header><nav class="md-header__inner md-grid" aria-label=Header><a href=../../../../.. title=Tenets class="md-header__button md-logo" aria-label=Tenets data-md-component=logo><a href=../../../../.. title=Tenets class="md-header__button md-logo" aria-label=Home><img src=../../../../../logos/tenets_dark_icon_transparent.png alt=Tenets class=dark-logo loading=lazy><img src=../../../../../logos/tenets_light_icon_transparent.png alt=Tenets class=light-logo loading=lazy></a></a><label class="md-header__button md-icon" for=__drawer><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg></label><div class=md-header__title data-md-component=header-title><div class=md-header__ellipsis><div class=md-header__topic><span class=md-ellipsis> Tenets </span></div><div class=md-header__topic data-md-component=header-topic><span class=md-ellipsis> strategies </span></div></div></div><form class=md-header__option data-md-component=palette><input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=custom data-md-color-accent=amber aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0><label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg></label><input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=custom data-md-color-accent=amber aria-label="Switch to light mode" type=radio name=__palette id=__palette_1><label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg></label></form><script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script><label class="md-header__button md-icon" for=__search><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg></label><div class=md-search data-md-component=search role=dialog><label class=md-search__overlay for=__search></label><div class=md-search__inner role=search><form class=md-search__form name=search><input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required><label class="md-search__icon md-icon" for=__search><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg></label><nav class=md-search__options aria-label=Search><a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg></a><button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg></button></nav><div class=md-search__suggest data-md-component=search-suggest></div></form><div class=md-search__output><div class=md-search__scrollwrap tabindex=0 data-md-scrollfix><div class=md-search-result data-md-component=search-result><div class=md-search-result__meta> Initializing search </div><ol class=md-search-result__list role=presentation></ol></div></div></div></div></div><div class=md-header__source><a href=https://github.com/jddunn/tenets title="Go to repository" class=md-source data-md-component=source><div class="md-source__icon md-icon"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg></div><div class=md-source__repository> jddunn/tenets </div></a></div></nav><nav class=md-tabs aria-label=Tabs data-md-component=tabs><div class=md-grid><ul class=md-tabs__list><li class=md-tabs__item><a href=../../../../../MCP/ class=md-tabs__link> MCP Server </a></li><li class=md-tabs__item><a href=../../../../../quickstart/ class=md-tabs__link> Getting Started </a></li><li class=md-tabs__item><a href=../../../../../CLI/ class=md-tabs__link> User Guide </a></li><li class=md-tabs__item><a href=../../../../../ARCHITECTURE/ class=md-tabs__link> Architecture </a></li><li class="md-tabs__item md-tabs__item--active"><a href=../../../../ class=md-tabs__link> API Reference </a></li><li class=md-tabs__item><a href=../../../../../blog/ class=md-tabs__link> Blog </a></li><li class=md-tabs__item><a href=../../../../../about/ class=md-tabs__link> About </a></li><li class=md-tabs__item><a href=../../../../../faq/ class=md-tabs__link> FAQ </a></li><li class=md-tabs__item><a href=../../../../../enterprise/ class=md-tabs__link> Enterprise </a></li><li class=md-tabs__item><a href=../../../../../privacy/ class=md-tabs__link> Legal </a></li></ul></div></nav></header><div class=md-container data-md-component=container><main class=md-main data-md-component=main><div class="md-main__inner md-grid"><a href=#main-content class=skip-link>Skip to main content</a><div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation><div class=md-sidebar__scrollwrap><div class=md-sidebar__inner><nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0><label class=md-nav__title for=__drawer><a href=../../../../.. title=Tenets class="md-nav__button md-logo" aria-label=Tenets data-md-component=logo><a href=../../../../.. title=Tenets class="md-header__button md-logo" aria-label=Home><img src=../../../../../logos/tenets_dark_icon_transparent.png alt=Tenets class=dark-logo loading=lazy><img src=../../../../../logos/tenets_light_icon_transparent.png alt=Tenets class=light-logo loading=lazy></a></a> Tenets </label><div class=md-nav__source><a href=https://github.com/jddunn/tenets title="Go to repository" class=md-source data-md-component=source><div class="md-source__icon md-icon"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg></div><div class=md-source__repository> jddunn/tenets </div></a></div><ul class=md-nav__list data-md-scrollfix><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../../../../MCP/ class=md-nav__link><span class=md-ellipsis> MCP Server </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../../../../quickstart/ class=md-nav__link><span class=md-ellipsis> Getting Started </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../../../../CLI/ class=md-nav__link><span class=md-ellipsis> User Guide </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../../../../ARCHITECTURE/ class=md-nav__link><span class=md-ellipsis> Architecture </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"><input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5 checked><div class="md-nav__link md-nav__container"><a href=../../../../ class="md-nav__link "><span class=md-ellipsis> API Reference </span></a><label class="md-nav__link " for=__nav_5 id=__nav_5_label tabindex><span class="md-nav__icon md-icon"></span></label></div><nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=true><label class=md-nav__title for=__nav_5><span class="md-nav__icon md-icon"></span> API Reference </label><ul class=md-nav__list data-md-scrollfix><li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"><input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_2 checked><div class="md-nav__link md-nav__container"><a href=../../../ class="md-nav__link "><span class=md-ellipsis> tenets </span></a><label class="md-nav__link " for=__nav_5_2 id=__nav_5_2_label tabindex><span class="md-nav__icon md-icon"></span></label></div><nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_2_label aria-expanded=true><label class=md-nav__title for=__nav_5_2><span class="md-nav__icon md-icon"></span> tenets </label><ul class=md-nav__list data-md-scrollfix><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../../cli/app/ class=md-nav__link><span class=md-ellipsis> cli </span><span class="md-nav__icon md-icon"></span></a></li><li class=md-nav__item><a href=../../../config/ class=md-nav__link><span class=md-ellipsis> config </span></a></li><li class="md-nav__item md-nav__item--active md-nav__item--nested"><input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_2_3 checked><div class="md-nav__link md-nav__container"><a href=../../ class="md-nav__link "><span class=md-ellipsis> core </span></a><label class="md-nav__link " for=__nav_5_2_3 id=__nav_5_2_3_label tabindex=0><span class="md-nav__icon md-icon"></span></label></div><nav class=md-nav data-md-level=3 aria-labelledby=__nav_5_2_3_label aria-expanded=true><label class=md-nav__title for=__nav_5_2_3><span class="md-nav__icon md-icon"></span> core </label><ul class=md-nav__list data-md-scrollfix><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../analysis/analyzer/ class=md-nav__link><span class=md-ellipsis> analysis </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../distiller/aggregator/ class=md-nav__link><span class=md-ellipsis> distiller </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../examiner/complexity/ class=md-nav__link><span class=md-ellipsis> examiner </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../git/analyzer/ class=md-nav__link><span class=md-ellipsis> git </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../instiller/injector/ class=md-nav__link><span class=md-ellipsis> instiller </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../momentum/metrics/ class=md-nav__link><span class=md-ellipsis> momentum </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../nlp/bm25/ class=md-nav__link><span class=md-ellipsis> nlp </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../prompt/cache/ class=md-nav__link><span class=md-ellipsis> prompt </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--active md-nav__item--nested"><input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_2_3_9 checked><div class="md-nav__link md-nav__container"><a href=../ class="md-nav__link "><span class=md-ellipsis> ranking </span></a><label class="md-nav__link " for=__nav_5_2_3_9 id=__nav_5_2_3_9_label tabindex=0><span class="md-nav__icon md-icon"></span></label></div><nav class=md-nav data-md-level=4 aria-labelledby=__nav_5_2_3_9_label aria-expanded=true><label class=md-nav__title for=__nav_5_2_3_9><span class="md-nav__icon md-icon"></span> ranking </label><ul class=md-nav__list data-md-scrollfix><li class=md-nav__item><a href=../factors/ class=md-nav__link><span class=md-ellipsis> factors </span></a></li><li class=md-nav__item><a href=../ranker/ class=md-nav__link><span class=md-ellipsis> ranker </span></a></li><li class="md-nav__item md-nav__item--active"><input class="md-nav__toggle md-toggle" type=checkbox id=__toc><label class="md-nav__link md-nav__link--active" for=__toc><span class=md-ellipsis> strategies </span><span class="md-nav__icon md-icon"></span></label><a href=./ class="md-nav__link md-nav__link--active"><span class=md-ellipsis> strategies </span></a><nav class="md-nav md-nav--secondary" aria-label="Table of contents"><label class=md-nav__title for=__toc><span class="md-nav__icon md-icon"></span> Table of contents </label><ul class=md-nav__list data-md-component=toc data-md-scrollfix><li class=md-nav__item><a href=#tenets.core.ranking.strategies class=md-nav__link><span class=md-ellipsis><code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;strategies </span></a><nav class=md-nav aria-label= strategies><ul class=md-nav__list><li class=md-nav__item><a href=#tenets.core.ranking.strategies-classes class=md-nav__link><span class=md-ellipsis> Classes </span></a></li><li class=md-nav__item><a href=#tenets.core.ranking.strategies-functions class=md-nav__link><span class=md-ellipsis> Functions </span></a></li></ul></nav></li></ul></nav></li></ul></nav></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../reporting/generator/ class=md-nav__link><span class=md-ellipsis> reporting </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../session/session/ class=md-nav__link><span class=md-ellipsis> session </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../summarizer/llm/ class=md-nav__link><span class=md-ellipsis> summarizer </span><span class="md-nav__icon md-icon"></span></a></li></ul></nav></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../../mcp/server/ class=md-nav__link><span class=md-ellipsis> mcp </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../../models/analysis/ class=md-nav__link><span class=md-ellipsis> models </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../../storage/cache/ class=md-nav__link><span class=md-ellipsis> storage </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../../utils/external_sources/ class=md-nav__link><span class=md-ellipsis> utils </span><span class="md-nav__icon md-icon"></span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../../viz/base/ class=md-nav__link><span class=md-ellipsis> viz </span><span class="md-nav__icon md-icon"></span></a></li></ul></nav></li></ul></nav></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../../../../blog/ class=md-nav__link><span class=md-ellipsis> Blog </span><span class="md-nav__icon md-icon"></span></a></li><li class=md-nav__item><a href=../../../../../about/ class=md-nav__link><span class=md-ellipsis> About </span></a></li><li class=md-nav__item><a href=../../../../../faq/ class=md-nav__link><span class=md-ellipsis> FAQ </span></a></li><li class=md-nav__item><a href=../../../../../enterprise/ class=md-nav__link><span class=md-ellipsis> Enterprise </span></a></li><li class="md-nav__item md-nav__item--pruned md-nav__item--nested"><a href=../../../../../privacy/ class=md-nav__link><span class=md-ellipsis> Legal </span><span class="md-nav__icon md-icon"></span></a></li></ul></nav></div></div></div><div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc><div class=md-sidebar__scrollwrap><div class=md-sidebar__inner><nav class="md-nav md-nav--secondary" aria-label="Table of contents"><label class=md-nav__title for=__toc><span class="md-nav__icon md-icon"></span> Table of contents </label><ul class=md-nav__list data-md-component=toc data-md-scrollfix><li class=md-nav__item><a href=#tenets.core.ranking.strategies class=md-nav__link><span class=md-ellipsis><code class="doc-symbol doc-symbol-toc doc-symbol-module"></code>&nbsp;strategies </span></a><nav class=md-nav aria-label= strategies><ul class=md-nav__list><li class=md-nav__item><a href=#tenets.core.ranking.strategies-classes class=md-nav__link><span class=md-ellipsis> Classes </span></a></li><li class=md-nav__item><a href=#tenets.core.ranking.strategies-functions class=md-nav__link><span class=md-ellipsis> Functions </span></a></li></ul></nav></li></ul></nav></div></div></div><div class=md-content data-md-component=content><nav class=md-path aria-label=Navigation><ol class=md-path__list><li class=md-path__item><a href=../../../../ class=md-path__link><span class=md-ellipsis> API Reference </span></a></li><li class=md-path__item><a href=../../../cli/app/ class=md-path__link><span class=md-ellipsis> tenets </span></a></li><li class=md-path__item><a href=../../analysis/analyzer/ class=md-path__link><span class=md-ellipsis> core </span></a></li><li class=md-path__item><a href=../factors/ class=md-path__link><span class=md-ellipsis> ranking </span></a></li></ol></nav><article class="md-content__inner md-typeset"><h1 id=strategies><code>strategies</code><a class=headerlink href=#strategies title="Link to this section">&para;</a></h1><p><strong>Full name:</strong> <code>tenets.core.ranking.strategies</code></p><div class="doc doc-object doc-module"><h2 id=tenets.core.ranking.strategies class="doc doc-heading"><code class="doc-symbol doc-symbol-heading doc-symbol-module"></code> <span class="doc doc-object-name doc-module-name">strategies</span><a href=#tenets.core.ranking.strategies class=headerlink title="Link to this section">&para;</a></h2><div class="doc doc-contents first"><p>Ranking strategies for different use cases.</p><p>This module implements various ranking strategies from simple keyword matching to sophisticated ML-based semantic analysis. Each strategy provides different trade-offs between speed and accuracy.</p><p>Now uses centralized NLP components for all text processing and pattern matching. No more duplicate programming patterns or keyword extraction logic.</p><div class="doc doc-children"><h3 id=tenets.core.ranking.strategies-classes>Classes<a href=#tenets.core.ranking.strategies-classes class=headerlink title="Link to this section">&para;</a></h3><div class="doc doc-object doc-class"><h4 id=tenets.core.ranking.strategies.RankingStrategy class="doc doc-heading"><code class="doc-symbol doc-symbol-heading doc-symbol-class"></code> <span class="doc doc-object-name doc-class-name">RankingStrategy</span><a href=#tenets.core.ranking.strategies.RankingStrategy class=headerlink title="Link to this section">&para;</a></h4><div class="doc doc-contents "><p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-external" title="<code>abc.ABC</code>" href=https://docs.python.org/3/library/abc.html#abc.ABC>ABC</a></code></p><p>Abstract base class for ranking strategies.</p><div class="doc doc-children"><h5 id=tenets.core.ranking.strategies.RankingStrategy-attributes>Attributes<a href=#tenets.core.ranking.strategies.RankingStrategy-attributes class=headerlink title="Link to this section">&para;</a></h5><div class="doc doc-object doc-attribute"><h6 id=tenets.core.ranking.strategies.RankingStrategy.name class="doc doc-heading"><code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code> <span class="doc doc-object-name doc-attribute-name">name</span><span class="doc doc-labels"><small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small><small class="doc doc-label doc-label-property"><code>property</code></small></span><a href=#tenets.core.ranking.strategies.RankingStrategy.name class=headerlink title="Link to this section">&para;</a></h6><div class="language-python doc-signature highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>name</span><span class=p>:</span> <span class=nb>str</span>
</span></code></pre></div><div class="doc doc-contents "><p>Get strategy name.</p></div></div><div class="doc doc-object doc-attribute"><h6 id=tenets.core.ranking.strategies.RankingStrategy.description class="doc doc-heading"><code class="doc-symbol doc-symbol-heading doc-symbol-attribute"></code> <span class="doc doc-object-name doc-attribute-name">description</span><span class="doc doc-labels"><small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small><small class="doc doc-label doc-label-property"><code>property</code></small></span><a href=#tenets.core.ranking.strategies.RankingStrategy.description class=headerlink title="Link to this section">&para;</a></h6><div class="language-python doc-signature highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=n>description</span><span class=p>:</span> <span class=nb>str</span>
</span></code></pre></div><div class="doc doc-contents "><p>Get strategy description.</p></div></div><h5 id=tenets.core.ranking.strategies.RankingStrategy-functions>Functions<a href=#tenets.core.ranking.strategies.RankingStrategy-functions class=headerlink title="Link to this section">&para;</a></h5><div class="doc doc-object doc-function"><h6 id=tenets.core.ranking.strategies.RankingStrategy.rank_file class="doc doc-heading"><code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">rank_file</span><span class="doc doc-labels"><small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small></span><a href=#tenets.core.ranking.strategies.RankingStrategy.rank_file class=headerlink title="Link to this section">&para;</a></h6><div class="language-python doc-signature highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=nf>rank_file</span><span class=p>(</span><span class=n>file</span><span class=p>:</span> <span class=n>FileAnalysis</span><span class=p>,</span> <span class=n>prompt_context</span><span class=p>:</span> <span class=n>PromptContext</span><span class=p>,</span> <span class=n>corpus_stats</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=n>RankingFactors</span>
</span></code></pre></div><div class="doc doc-contents "><p>Calculate ranking factors for a file.</p><details class=mkdocstrings-source><summary>Source code in <code>tenets/core/ranking/strategies.py</code></summary><div class="language-python highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-0-31><a id=__codelineno-0-31 name=__codelineno-0-31></a><a href=#__codelineno-0-31><span class=linenos data-linenos="31 "></span></a><span class=nd>@abstractmethod</span>
</span><span id=__span-0-32><a id=__codelineno-0-32 name=__codelineno-0-32></a><a href=#__codelineno-0-32><span class=linenos data-linenos="32 "></span></a><span class=k>def</span><span class=w> </span><span class=nf>rank_file</span><span class=p>(</span>
</span><span id=__span-0-33><a id=__codelineno-0-33 name=__codelineno-0-33></a><a href=#__codelineno-0-33><span class=linenos data-linenos="33 "></span></a>    <span class=bp>self</span><span class=p>,</span> <span class=n>file</span><span class=p>:</span> <span class=n>FileAnalysis</span><span class=p>,</span> <span class=n>prompt_context</span><span class=p>:</span> <span class=n>PromptContext</span><span class=p>,</span> <span class=n>corpus_stats</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]</span>
</span><span id=__span-0-34><a id=__codelineno-0-34 name=__codelineno-0-34></a><a href=#__codelineno-0-34><span class=linenos data-linenos="34 "></span></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>RankingFactors</span><span class=p>:</span>
</span><span id=__span-0-35><a id=__codelineno-0-35 name=__codelineno-0-35></a><a href=#__codelineno-0-35><span class=linenos data-linenos="35 "></span></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Calculate ranking factors for a file.&quot;&quot;&quot;</span>
</span><span id=__span-0-36><a id=__codelineno-0-36 name=__codelineno-0-36></a><a href=#__codelineno-0-36><span class=linenos data-linenos="36 "></span></a>    <span class=k>pass</span>
</span></code></pre></div></details></div></div><div class="doc doc-object doc-function"><h6 id=tenets.core.ranking.strategies.RankingStrategy.get_weights class="doc doc-heading"><code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">get_weights</span><span class="doc doc-labels"><small class="doc doc-label doc-label-abstractmethod"><code>abstractmethod</code></small></span><a href=#tenets.core.ranking.strategies.RankingStrategy.get_weights class=headerlink title="Link to this section">&para;</a></h6><div class="language-python doc-signature highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=nf>get_weights</span><span class=p>()</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>float</span><span class=p>]</span>
</span></code></pre></div><div class="doc doc-contents "><p>Get factor weights for this strategy.</p><details class=mkdocstrings-source><summary>Source code in <code>tenets/core/ranking/strategies.py</code></summary><div class="language-python highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-0-38><a id=__codelineno-0-38 name=__codelineno-0-38></a><a href=#__codelineno-0-38><span class=linenos data-linenos="38 "></span></a><span class=nd>@abstractmethod</span>
</span><span id=__span-0-39><a id=__codelineno-0-39 name=__codelineno-0-39></a><a href=#__codelineno-0-39><span class=linenos data-linenos="39 "></span></a><span class=k>def</span><span class=w> </span><span class=nf>get_weights</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>float</span><span class=p>]:</span>
</span><span id=__span-0-40><a id=__codelineno-0-40 name=__codelineno-0-40></a><a href=#__codelineno-0-40><span class=linenos data-linenos="40 "></span></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Get factor weights for this strategy.&quot;&quot;&quot;</span>
</span><span id=__span-0-41><a id=__codelineno-0-41 name=__codelineno-0-41></a><a href=#__codelineno-0-41><span class=linenos data-linenos="41 "></span></a>    <span class=k>pass</span>
</span></code></pre></div></details></div></div></div></div></div><div class="doc doc-object doc-class"><h4 id=tenets.core.ranking.strategies.FastRankingStrategy class="doc doc-heading"><code class="doc-symbol doc-symbol-heading doc-symbol-class"></code> <span class="doc doc-object-name doc-class-name">FastRankingStrategy</span><a href=#tenets.core.ranking.strategies.FastRankingStrategy class=headerlink title="Link to this section">&para;</a></h4><div class="language-python doc-signature highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=nf>FastRankingStrategy</span><span class=p>()</span>
</span></code></pre></div><div class="doc doc-contents "><p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title='<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">RankingStrategy</span> (<code>tenets.core.ranking.strategies.RankingStrategy</code>)' href=#tenets.core.ranking.strategies.RankingStrategy>RankingStrategy</a></code></p><p>Fast keyword-based ranking strategy.</p><p>Initialize fast ranking strategy.</p><details class=mkdocstrings-source><summary>Source code in <code>tenets/core/ranking/strategies.py</code></summary><div class="language-python highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-0-62><a id=__codelineno-0-62 name=__codelineno-0-62></a><a href=#__codelineno-0-62><span class=linenos data-linenos="62 "></span></a><span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span><span id=__span-0-63><a id=__codelineno-0-63 name=__codelineno-0-63></a><a href=#__codelineno-0-63><span class=linenos data-linenos="63 "></span></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Initialize fast ranking strategy.&quot;&quot;&quot;</span>
</span><span id=__span-0-64><a id=__codelineno-0-64 name=__codelineno-0-64></a><a href=#__codelineno-0-64><span class=linenos data-linenos="64 "></span></a>    <span class=kn>from</span><span class=w> </span><span class=nn>tenets.utils.logger</span><span class=w> </span><span class=kn>import</span> <span class=n>get_logger</span>
</span><span id=__span-0-65><a id=__codelineno-0-65 name=__codelineno-0-65></a><a href=#__codelineno-0-65><span class=linenos data-linenos="65 "></span></a>
</span><span id=__span-0-66><a id=__codelineno-0-66 name=__codelineno-0-66></a><a href=#__codelineno-0-66><span class=linenos data-linenos="66 "></span></a>    <span class=bp>self</span><span class=o>.</span><span class=n>logger</span> <span class=o>=</span> <span class=n>get_logger</span><span class=p>(</span><span class=vm>__name__</span><span class=p>)</span>
</span></code></pre></div></details><div class="doc doc-children"><h5 id=tenets.core.ranking.strategies.FastRankingStrategy-functions>Functions<a href=#tenets.core.ranking.strategies.FastRankingStrategy-functions class=headerlink title="Link to this section">&para;</a></h5><div class="doc doc-object doc-function"><h6 id=tenets.core.ranking.strategies.FastRankingStrategy.rank_file class="doc doc-heading"><code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">rank_file</span><a href=#tenets.core.ranking.strategies.FastRankingStrategy.rank_file class=headerlink title="Link to this section">&para;</a></h6><div class="language-python doc-signature highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=nf>rank_file</span><span class=p>(</span><span class=n>file</span><span class=p>:</span> <span class=n>FileAnalysis</span><span class=p>,</span> <span class=n>prompt_context</span><span class=p>:</span> <span class=n>PromptContext</span><span class=p>,</span> <span class=n>corpus_stats</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=n>RankingFactors</span>
</span></code></pre></div><div class="doc doc-contents "><p>Fast ranking based on keywords and paths.</p><details class=mkdocstrings-source><summary>Source code in <code>tenets/core/ranking/strategies.py</code></summary><div class="language-python highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-0-68><a id=__codelineno-0-68 name=__codelineno-0-68></a><a href=#__codelineno-0-68><span class=linenos data-linenos="68 "></span></a><span class=k>def</span><span class=w> </span><span class=nf>rank_file</span><span class=p>(</span>
</span><span id=__span-0-69><a id=__codelineno-0-69 name=__codelineno-0-69></a><a href=#__codelineno-0-69><span class=linenos data-linenos="69 "></span></a>    <span class=bp>self</span><span class=p>,</span> <span class=n>file</span><span class=p>:</span> <span class=n>FileAnalysis</span><span class=p>,</span> <span class=n>prompt_context</span><span class=p>:</span> <span class=n>PromptContext</span><span class=p>,</span> <span class=n>corpus_stats</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]</span>
</span><span id=__span-0-70><a id=__codelineno-0-70 name=__codelineno-0-70></a><a href=#__codelineno-0-70><span class=linenos data-linenos="70 "></span></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>RankingFactors</span><span class=p>:</span>
</span><span id=__span-0-71><a id=__codelineno-0-71 name=__codelineno-0-71></a><a href=#__codelineno-0-71><span class=linenos data-linenos="71 "></span></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Fast ranking based on keywords and paths.&quot;&quot;&quot;</span>
</span><span id=__span-0-72><a id=__codelineno-0-72 name=__codelineno-0-72></a><a href=#__codelineno-0-72><span class=linenos data-linenos="72 "></span></a>    <span class=n>factors</span> <span class=o>=</span> <span class=n>RankingFactors</span><span class=p>()</span>
</span><span id=__span-0-73><a id=__codelineno-0-73 name=__codelineno-0-73></a><a href=#__codelineno-0-73><span class=linenos data-linenos="73 "></span></a>
</span><span id=__span-0-74><a id=__codelineno-0-74 name=__codelineno-0-74></a><a href=#__codelineno-0-74><span class=linenos data-linenos="74 "></span></a>    <span class=c1># Keyword matching with position weighting</span>
</span><span id=__span-0-75><a id=__codelineno-0-75 name=__codelineno-0-75></a><a href=#__codelineno-0-75><span class=linenos data-linenos="75 "></span></a>    <span class=n>factors</span><span class=o>.</span><span class=n>keyword_match</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_calculate_keyword_score</span><span class=p>(</span><span class=n>file</span><span class=p>,</span> <span class=n>prompt_context</span><span class=o>.</span><span class=n>keywords</span><span class=p>)</span>
</span><span id=__span-0-76><a id=__codelineno-0-76 name=__codelineno-0-76></a><a href=#__codelineno-0-76><span class=linenos data-linenos="76 "></span></a>
</span><span id=__span-0-77><a id=__codelineno-0-77 name=__codelineno-0-77></a><a href=#__codelineno-0-77><span class=linenos data-linenos="77 "></span></a>    <span class=c1># Path relevance</span>
</span><span id=__span-0-78><a id=__codelineno-0-78 name=__codelineno-0-78></a><a href=#__codelineno-0-78><span class=linenos data-linenos="78 "></span></a>    <span class=n>factors</span><span class=o>.</span><span class=n>path_relevance</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_calculate_path_relevance</span><span class=p>(</span><span class=n>file</span><span class=o>.</span><span class=n>path</span><span class=p>,</span> <span class=n>prompt_context</span><span class=p>)</span>
</span><span id=__span-0-79><a id=__codelineno-0-79 name=__codelineno-0-79></a><a href=#__codelineno-0-79><span class=linenos data-linenos="79 "></span></a>
</span><span id=__span-0-80><a id=__codelineno-0-80 name=__codelineno-0-80></a><a href=#__codelineno-0-80><span class=linenos data-linenos="80 "></span></a>    <span class=c1># File type relevance</span>
</span><span id=__span-0-81><a id=__codelineno-0-81 name=__codelineno-0-81></a><a href=#__codelineno-0-81><span class=linenos data-linenos="81 "></span></a>    <span class=n>factors</span><span class=o>.</span><span class=n>type_relevance</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_calculate_type_relevance</span><span class=p>(</span><span class=n>file</span><span class=p>,</span> <span class=n>prompt_context</span><span class=p>)</span>
</span><span id=__span-0-82><a id=__codelineno-0-82 name=__codelineno-0-82></a><a href=#__codelineno-0-82><span class=linenos data-linenos="82 "></span></a>
</span><span id=__span-0-83><a id=__codelineno-0-83 name=__codelineno-0-83></a><a href=#__codelineno-0-83><span class=linenos data-linenos="83 "></span></a>    <span class=c1># Basic git info if available</span>
</span><span id=__span-0-84><a id=__codelineno-0-84 name=__codelineno-0-84></a><a href=#__codelineno-0-84><span class=linenos data-linenos="84 "></span></a>    <span class=k>if</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>file</span><span class=p>,</span> <span class=s2>&quot;git_info&quot;</span><span class=p>)</span> <span class=ow>and</span> <span class=n>file</span><span class=o>.</span><span class=n>git_info</span><span class=p>:</span>
</span><span id=__span-0-85><a id=__codelineno-0-85 name=__codelineno-0-85></a><a href=#__codelineno-0-85><span class=linenos data-linenos="85 "></span></a>        <span class=n>factors</span><span class=o>.</span><span class=n>git_recency</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_calculate_simple_git_recency</span><span class=p>(</span><span class=n>file</span><span class=o>.</span><span class=n>git_info</span><span class=p>)</span>
</span><span id=__span-0-86><a id=__codelineno-0-86 name=__codelineno-0-86></a><a href=#__codelineno-0-86><span class=linenos data-linenos="86 "></span></a>
</span><span id=__span-0-87><a id=__codelineno-0-87 name=__codelineno-0-87></a><a href=#__codelineno-0-87><span class=linenos data-linenos="87 "></span></a>    <span class=k>return</span> <span class=n>factors</span>
</span></code></pre></div></details></div></div><div class="doc doc-object doc-function"><h6 id=tenets.core.ranking.strategies.FastRankingStrategy.get_weights class="doc doc-heading"><code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">get_weights</span><a href=#tenets.core.ranking.strategies.FastRankingStrategy.get_weights class=headerlink title="Link to this section">&para;</a></h6><div class="language-python doc-signature highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=nf>get_weights</span><span class=p>()</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>float</span><span class=p>]</span>
</span></code></pre></div><div class="doc doc-contents "><p>Get weights for fast ranking.</p><details class=mkdocstrings-source><summary>Source code in <code>tenets/core/ranking/strategies.py</code></summary><div class="language-python highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-0-89><a id=__codelineno-0-89 name=__codelineno-0-89></a><a href=#__codelineno-0-89><span class=linenos data-linenos="89 "></span></a><span class=k>def</span><span class=w> </span><span class=nf>get_weights</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>float</span><span class=p>]:</span>
</span><span id=__span-0-90><a id=__codelineno-0-90 name=__codelineno-0-90></a><a href=#__codelineno-0-90><span class=linenos data-linenos="90 "></span></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Get weights for fast ranking.&quot;&quot;&quot;</span>
</span><span id=__span-0-91><a id=__codelineno-0-91 name=__codelineno-0-91></a><a href=#__codelineno-0-91><span class=linenos data-linenos="91 "></span></a>    <span class=c1># Keep this minimal set and exact values as tests assert equality</span>
</span><span id=__span-0-92><a id=__codelineno-0-92 name=__codelineno-0-92></a><a href=#__codelineno-0-92><span class=linenos data-linenos="92 "></span></a>    <span class=k>return</span> <span class=p>{</span>
</span><span id=__span-0-93><a id=__codelineno-0-93 name=__codelineno-0-93></a><a href=#__codelineno-0-93><span class=linenos data-linenos="93 "></span></a>        <span class=s2>&quot;keyword_match&quot;</span><span class=p>:</span> <span class=mf>0.6</span><span class=p>,</span>
</span><span id=__span-0-94><a id=__codelineno-0-94 name=__codelineno-0-94></a><a href=#__codelineno-0-94><span class=linenos data-linenos="94 "></span></a>        <span class=s2>&quot;path_relevance&quot;</span><span class=p>:</span> <span class=mf>0.3</span><span class=p>,</span>
</span><span id=__span-0-95><a id=__codelineno-0-95 name=__codelineno-0-95></a><a href=#__codelineno-0-95><span class=linenos data-linenos="95 "></span></a>        <span class=s2>&quot;type_relevance&quot;</span><span class=p>:</span> <span class=mf>0.1</span><span class=p>,</span>
</span><span id=__span-0-96><a id=__codelineno-0-96 name=__codelineno-0-96></a><a href=#__codelineno-0-96><span class=linenos data-linenos="96 "></span></a>    <span class=p>}</span>
</span></code></pre></div></details></div></div></div></div></div><div class="doc doc-object doc-class"><h4 id=tenets.core.ranking.strategies.BalancedRankingStrategy class="doc doc-heading"><code class="doc-symbol doc-symbol-heading doc-symbol-class"></code> <span class="doc doc-object-name doc-class-name">BalancedRankingStrategy</span><a href=#tenets.core.ranking.strategies.BalancedRankingStrategy class=headerlink title="Link to this section">&para;</a></h4><div class="language-python doc-signature highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=nf>BalancedRankingStrategy</span><span class=p>()</span>
</span></code></pre></div><div class="doc doc-contents "><p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title='<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">RankingStrategy</span> (<code>tenets.core.ranking.strategies.RankingStrategy</code>)' href=#tenets.core.ranking.strategies.RankingStrategy>RankingStrategy</a></code></p><p>Balanced multi-factor ranking strategy.</p><p>Initialize balanced ranking strategy.</p><details class=mkdocstrings-source><summary>Source code in <code>tenets/core/ranking/strategies.py</code></summary><div class="language-python highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-0-216><a id=__codelineno-0-216 name=__codelineno-0-216></a><a href=#__codelineno-0-216><span class=linenos data-linenos="216 "></span></a><span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span><span id=__span-0-217><a id=__codelineno-0-217 name=__codelineno-0-217></a><a href=#__codelineno-0-217><span class=linenos data-linenos="217 "></span></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Initialize balanced ranking strategy.&quot;&quot;&quot;</span>
</span><span id=__span-0-218><a id=__codelineno-0-218 name=__codelineno-0-218></a><a href=#__codelineno-0-218><span class=linenos data-linenos="218 "></span></a>    <span class=kn>from</span><span class=w> </span><span class=nn>tenets.utils.logger</span><span class=w> </span><span class=kn>import</span> <span class=n>get_logger</span>
</span><span id=__span-0-219><a id=__codelineno-0-219 name=__codelineno-0-219></a><a href=#__codelineno-0-219><span class=linenos data-linenos="219 "></span></a>
</span><span id=__span-0-220><a id=__codelineno-0-220 name=__codelineno-0-220></a><a href=#__codelineno-0-220><span class=linenos data-linenos="220 "></span></a>    <span class=bp>self</span><span class=o>.</span><span class=n>logger</span> <span class=o>=</span> <span class=n>get_logger</span><span class=p>(</span><span class=vm>__name__</span><span class=p>)</span>
</span></code></pre></div></details><div class="doc doc-children"><h5 id=tenets.core.ranking.strategies.BalancedRankingStrategy-functions>Functions<a href=#tenets.core.ranking.strategies.BalancedRankingStrategy-functions class=headerlink title="Link to this section">&para;</a></h5><div class="doc doc-object doc-function"><h6 id=tenets.core.ranking.strategies.BalancedRankingStrategy.rank_file class="doc doc-heading"><code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">rank_file</span><a href=#tenets.core.ranking.strategies.BalancedRankingStrategy.rank_file class=headerlink title="Link to this section">&para;</a></h6><div class="language-python doc-signature highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=nf>rank_file</span><span class=p>(</span><span class=n>file</span><span class=p>:</span> <span class=n>FileAnalysis</span><span class=p>,</span> <span class=n>prompt_context</span><span class=p>:</span> <span class=n>PromptContext</span><span class=p>,</span> <span class=n>corpus_stats</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=n>RankingFactors</span>
</span></code></pre></div><div class="doc doc-contents "><p>Balanced ranking using multiple factors.</p><details class=mkdocstrings-source><summary>Source code in <code>tenets/core/ranking/strategies.py</code></summary><div class="language-python highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-0-222><a id=__codelineno-0-222 name=__codelineno-0-222></a><a href=#__codelineno-0-222><span class=linenos data-linenos="222 "></span></a><span class=k>def</span><span class=w> </span><span class=nf>rank_file</span><span class=p>(</span>
</span><span id=__span-0-223><a id=__codelineno-0-223 name=__codelineno-0-223></a><a href=#__codelineno-0-223><span class=linenos data-linenos="223 "></span></a>    <span class=bp>self</span><span class=p>,</span> <span class=n>file</span><span class=p>:</span> <span class=n>FileAnalysis</span><span class=p>,</span> <span class=n>prompt_context</span><span class=p>:</span> <span class=n>PromptContext</span><span class=p>,</span> <span class=n>corpus_stats</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]</span>
</span><span id=__span-0-224><a id=__codelineno-0-224 name=__codelineno-0-224></a><a href=#__codelineno-0-224><span class=linenos data-linenos="224 "></span></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>RankingFactors</span><span class=p>:</span>
</span><span id=__span-0-225><a id=__codelineno-0-225 name=__codelineno-0-225></a><a href=#__codelineno-0-225><span class=linenos data-linenos="225 "></span></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Balanced ranking using multiple factors.&quot;&quot;&quot;</span>
</span><span id=__span-0-226><a id=__codelineno-0-226 name=__codelineno-0-226></a><a href=#__codelineno-0-226><span class=linenos data-linenos="226 "></span></a>    <span class=n>factors</span> <span class=o>=</span> <span class=n>RankingFactors</span><span class=p>()</span>
</span><span id=__span-0-227><a id=__codelineno-0-227 name=__codelineno-0-227></a><a href=#__codelineno-0-227><span class=linenos data-linenos="227 "></span></a>
</span><span id=__span-0-228><a id=__codelineno-0-228 name=__codelineno-0-228></a><a href=#__codelineno-0-228><span class=linenos data-linenos="228 "></span></a>    <span class=c1># Enhanced keyword matching</span>
</span><span id=__span-0-229><a id=__codelineno-0-229 name=__codelineno-0-229></a><a href=#__codelineno-0-229><span class=linenos data-linenos="229 "></span></a>    <span class=n>factors</span><span class=o>.</span><span class=n>keyword_match</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_calculate_enhanced_keyword_score</span><span class=p>(</span>
</span><span id=__span-0-230><a id=__codelineno-0-230 name=__codelineno-0-230></a><a href=#__codelineno-0-230><span class=linenos data-linenos="230 "></span></a>        <span class=n>file</span><span class=p>,</span> <span class=n>prompt_context</span><span class=o>.</span><span class=n>keywords</span>
</span><span id=__span-0-231><a id=__codelineno-0-231 name=__codelineno-0-231></a><a href=#__codelineno-0-231><span class=linenos data-linenos="231 "></span></a>    <span class=p>)</span>
</span><span id=__span-0-232><a id=__codelineno-0-232 name=__codelineno-0-232></a><a href=#__codelineno-0-232><span class=linenos data-linenos="232 "></span></a>
</span><span id=__span-0-233><a id=__codelineno-0-233 name=__codelineno-0-233></a><a href=#__codelineno-0-233><span class=linenos data-linenos="233 "></span></a>    <span class=c1># TF-IDF similarity</span>
</span><span id=__span-0-234><a id=__codelineno-0-234 name=__codelineno-0-234></a><a href=#__codelineno-0-234><span class=linenos data-linenos="234 "></span></a>    <span class=k>if</span> <span class=n>corpus_stats</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;tfidf_calculator&quot;</span><span class=p>):</span>
</span><span id=__span-0-235><a id=__codelineno-0-235 name=__codelineno-0-235></a><a href=#__codelineno-0-235><span class=linenos data-linenos="235 "></span></a>        <span class=n>tfidf_calc</span> <span class=o>=</span> <span class=n>corpus_stats</span><span class=p>[</span><span class=s2>&quot;tfidf_calculator&quot;</span><span class=p>]</span>
</span><span id=__span-0-236><a id=__codelineno-0-236 name=__codelineno-0-236></a><a href=#__codelineno-0-236><span class=linenos data-linenos="236 "></span></a>        <span class=k>if</span> <span class=n>file</span><span class=o>.</span><span class=n>path</span> <span class=ow>in</span> <span class=n>tfidf_calc</span><span class=o>.</span><span class=n>document_vectors</span><span class=p>:</span>
</span><span id=__span-0-237><a id=__codelineno-0-237 name=__codelineno-0-237></a><a href=#__codelineno-0-237><span class=linenos data-linenos="237 "></span></a>            <span class=n>factors</span><span class=o>.</span><span class=n>tfidf_similarity</span> <span class=o>=</span> <span class=n>tfidf_calc</span><span class=o>.</span><span class=n>compute_similarity</span><span class=p>(</span>
</span><span id=__span-0-238><a id=__codelineno-0-238 name=__codelineno-0-238></a><a href=#__codelineno-0-238><span class=linenos data-linenos="238 "></span></a>                <span class=n>prompt_context</span><span class=o>.</span><span class=n>text</span><span class=p>,</span> <span class=n>file</span><span class=o>.</span><span class=n>path</span>
</span><span id=__span-0-239><a id=__codelineno-0-239 name=__codelineno-0-239></a><a href=#__codelineno-0-239><span class=linenos data-linenos="239 "></span></a>            <span class=p>)</span>
</span><span id=__span-0-240><a id=__codelineno-0-240 name=__codelineno-0-240></a><a href=#__codelineno-0-240><span class=linenos data-linenos="240 "></span></a>
</span><span id=__span-0-241><a id=__codelineno-0-241 name=__codelineno-0-241></a><a href=#__codelineno-0-241><span class=linenos data-linenos="241 "></span></a>    <span class=c1># BM25 score</span>
</span><span id=__span-0-242><a id=__codelineno-0-242 name=__codelineno-0-242></a><a href=#__codelineno-0-242><span class=linenos data-linenos="242 "></span></a>    <span class=k>if</span> <span class=n>corpus_stats</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;bm25_calculator&quot;</span><span class=p>):</span>
</span><span id=__span-0-243><a id=__codelineno-0-243 name=__codelineno-0-243></a><a href=#__codelineno-0-243><span class=linenos data-linenos="243 "></span></a>        <span class=n>bm25_calc</span> <span class=o>=</span> <span class=n>corpus_stats</span><span class=p>[</span><span class=s2>&quot;bm25_calculator&quot;</span><span class=p>]</span>
</span><span id=__span-0-244><a id=__codelineno-0-244 name=__codelineno-0-244></a><a href=#__codelineno-0-244><span class=linenos data-linenos="244 "></span></a>        <span class=n>query_tokens</span> <span class=o>=</span> <span class=n>bm25_calc</span><span class=o>.</span><span class=n>tokenize</span><span class=p>(</span><span class=n>prompt_context</span><span class=o>.</span><span class=n>text</span><span class=p>)</span>
</span><span id=__span-0-245><a id=__codelineno-0-245 name=__codelineno-0-245></a><a href=#__codelineno-0-245><span class=linenos data-linenos="245 "></span></a>        <span class=n>factors</span><span class=o>.</span><span class=n>bm25_score</span> <span class=o>=</span> <span class=nb>min</span><span class=p>(</span><span class=mf>1.0</span><span class=p>,</span> <span class=n>bm25_calc</span><span class=o>.</span><span class=n>score_document</span><span class=p>(</span><span class=n>query_tokens</span><span class=p>,</span> <span class=n>file</span><span class=o>.</span><span class=n>path</span><span class=p>)</span> <span class=o>/</span> <span class=mi>10</span><span class=p>)</span>
</span><span id=__span-0-246><a id=__codelineno-0-246 name=__codelineno-0-246></a><a href=#__codelineno-0-246><span class=linenos data-linenos="246 "></span></a>
</span><span id=__span-0-247><a id=__codelineno-0-247 name=__codelineno-0-247></a><a href=#__codelineno-0-247><span class=linenos data-linenos="247 "></span></a>    <span class=c1># Path structure analysis</span>
</span><span id=__span-0-248><a id=__codelineno-0-248 name=__codelineno-0-248></a><a href=#__codelineno-0-248><span class=linenos data-linenos="248 "></span></a>    <span class=n>factors</span><span class=o>.</span><span class=n>path_relevance</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_analyze_path_structure</span><span class=p>(</span><span class=n>file</span><span class=o>.</span><span class=n>path</span><span class=p>,</span> <span class=n>prompt_context</span><span class=p>)</span>
</span><span id=__span-0-249><a id=__codelineno-0-249 name=__codelineno-0-249></a><a href=#__codelineno-0-249><span class=linenos data-linenos="249 "></span></a>
</span><span id=__span-0-250><a id=__codelineno-0-250 name=__codelineno-0-250></a><a href=#__codelineno-0-250><span class=linenos data-linenos="250 "></span></a>    <span class=c1># Import centrality</span>
</span><span id=__span-0-251><a id=__codelineno-0-251 name=__codelineno-0-251></a><a href=#__codelineno-0-251><span class=linenos data-linenos="251 "></span></a>    <span class=k>if</span> <span class=n>corpus_stats</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;import_graph&quot;</span><span class=p>):</span>
</span><span id=__span-0-252><a id=__codelineno-0-252 name=__codelineno-0-252></a><a href=#__codelineno-0-252><span class=linenos data-linenos="252 "></span></a>        <span class=n>factors</span><span class=o>.</span><span class=n>import_centrality</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_calculate_import_centrality</span><span class=p>(</span>
</span><span id=__span-0-253><a id=__codelineno-0-253 name=__codelineno-0-253></a><a href=#__codelineno-0-253><span class=linenos data-linenos="253 "></span></a>            <span class=n>file</span><span class=p>,</span> <span class=n>corpus_stats</span><span class=p>[</span><span class=s2>&quot;import_graph&quot;</span><span class=p>]</span>
</span><span id=__span-0-254><a id=__codelineno-0-254 name=__codelineno-0-254></a><a href=#__codelineno-0-254><span class=linenos data-linenos="254 "></span></a>        <span class=p>)</span>
</span><span id=__span-0-255><a id=__codelineno-0-255 name=__codelineno-0-255></a><a href=#__codelineno-0-255><span class=linenos data-linenos="255 "></span></a>
</span><span id=__span-0-256><a id=__codelineno-0-256 name=__codelineno-0-256></a><a href=#__codelineno-0-256><span class=linenos data-linenos="256 "></span></a>    <span class=c1># Git activity</span>
</span><span id=__span-0-257><a id=__codelineno-0-257 name=__codelineno-0-257></a><a href=#__codelineno-0-257><span class=linenos data-linenos="257 "></span></a>    <span class=k>if</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>file</span><span class=p>,</span> <span class=s2>&quot;git_info&quot;</span><span class=p>)</span> <span class=ow>and</span> <span class=n>file</span><span class=o>.</span><span class=n>git_info</span><span class=p>:</span>
</span><span id=__span-0-258><a id=__codelineno-0-258 name=__codelineno-0-258></a><a href=#__codelineno-0-258><span class=linenos data-linenos="258 "></span></a>        <span class=n>factors</span><span class=o>.</span><span class=n>git_recency</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_calculate_git_recency</span><span class=p>(</span><span class=n>file</span><span class=o>.</span><span class=n>git_info</span><span class=p>)</span>
</span><span id=__span-0-259><a id=__codelineno-0-259 name=__codelineno-0-259></a><a href=#__codelineno-0-259><span class=linenos data-linenos="259 "></span></a>        <span class=n>factors</span><span class=o>.</span><span class=n>git_frequency</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_calculate_git_frequency</span><span class=p>(</span><span class=n>file</span><span class=o>.</span><span class=n>git_info</span><span class=p>)</span>
</span><span id=__span-0-260><a id=__codelineno-0-260 name=__codelineno-0-260></a><a href=#__codelineno-0-260><span class=linenos data-linenos="260 "></span></a>
</span><span id=__span-0-261><a id=__codelineno-0-261 name=__codelineno-0-261></a><a href=#__codelineno-0-261><span class=linenos data-linenos="261 "></span></a>    <span class=c1># Complexity relevance</span>
</span><span id=__span-0-262><a id=__codelineno-0-262 name=__codelineno-0-262></a><a href=#__codelineno-0-262><span class=linenos data-linenos="262 "></span></a>    <span class=k>if</span> <span class=n>file</span><span class=o>.</span><span class=n>complexity</span><span class=p>:</span>
</span><span id=__span-0-263><a id=__codelineno-0-263 name=__codelineno-0-263></a><a href=#__codelineno-0-263><span class=linenos data-linenos="263 "></span></a>        <span class=n>factors</span><span class=o>.</span><span class=n>complexity_relevance</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_calculate_complexity_relevance</span><span class=p>(</span>
</span><span id=__span-0-264><a id=__codelineno-0-264 name=__codelineno-0-264></a><a href=#__codelineno-0-264><span class=linenos data-linenos="264 "></span></a>            <span class=n>file</span><span class=o>.</span><span class=n>complexity</span><span class=p>,</span> <span class=n>prompt_context</span>
</span><span id=__span-0-265><a id=__codelineno-0-265 name=__codelineno-0-265></a><a href=#__codelineno-0-265><span class=linenos data-linenos="265 "></span></a>        <span class=p>)</span>
</span><span id=__span-0-266><a id=__codelineno-0-266 name=__codelineno-0-266></a><a href=#__codelineno-0-266><span class=linenos data-linenos="266 "></span></a>
</span><span id=__span-0-267><a id=__codelineno-0-267 name=__codelineno-0-267></a><a href=#__codelineno-0-267><span class=linenos data-linenos="267 "></span></a>    <span class=c1># File type relevance</span>
</span><span id=__span-0-268><a id=__codelineno-0-268 name=__codelineno-0-268></a><a href=#__codelineno-0-268><span class=linenos data-linenos="268 "></span></a>    <span class=n>factors</span><span class=o>.</span><span class=n>type_relevance</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_calculate_type_relevance</span><span class=p>(</span><span class=n>file</span><span class=p>,</span> <span class=n>prompt_context</span><span class=p>)</span>
</span><span id=__span-0-269><a id=__codelineno-0-269 name=__codelineno-0-269></a><a href=#__codelineno-0-269><span class=linenos data-linenos="269 "></span></a>
</span><span id=__span-0-270><a id=__codelineno-0-270 name=__codelineno-0-270></a><a href=#__codelineno-0-270><span class=linenos data-linenos="270 "></span></a>    <span class=k>return</span> <span class=n>factors</span>
</span></code></pre></div></details></div></div><div class="doc doc-object doc-function"><h6 id=tenets.core.ranking.strategies.BalancedRankingStrategy.get_weights class="doc doc-heading"><code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">get_weights</span><a href=#tenets.core.ranking.strategies.BalancedRankingStrategy.get_weights class=headerlink title="Link to this section">&para;</a></h6><div class="language-python doc-signature highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=nf>get_weights</span><span class=p>()</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>float</span><span class=p>]</span>
</span></code></pre></div><div class="doc doc-contents "><p>Get weights for balanced ranking.</p><details class=mkdocstrings-source><summary>Source code in <code>tenets/core/ranking/strategies.py</code></summary><div class="language-python highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-0-272><a id=__codelineno-0-272 name=__codelineno-0-272></a><a href=#__codelineno-0-272><span class=linenos data-linenos="272 "></span></a><span class=k>def</span><span class=w> </span><span class=nf>get_weights</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>float</span><span class=p>]:</span>
</span><span id=__span-0-273><a id=__codelineno-0-273 name=__codelineno-0-273></a><a href=#__codelineno-0-273><span class=linenos data-linenos="273 "></span></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Get weights for balanced ranking.&quot;&quot;&quot;</span>
</span><span id=__span-0-274><a id=__codelineno-0-274 name=__codelineno-0-274></a><a href=#__codelineno-0-274><span class=linenos data-linenos="274 "></span></a>    <span class=k>return</span> <span class=p>{</span>
</span><span id=__span-0-275><a id=__codelineno-0-275 name=__codelineno-0-275></a><a href=#__codelineno-0-275><span class=linenos data-linenos="275 "></span></a>        <span class=s2>&quot;keyword_match&quot;</span><span class=p>:</span> <span class=mf>0.20</span><span class=p>,</span>
</span><span id=__span-0-276><a id=__codelineno-0-276 name=__codelineno-0-276></a><a href=#__codelineno-0-276><span class=linenos data-linenos="276 "></span></a>        <span class=s2>&quot;bm25_score&quot;</span><span class=p>:</span> <span class=mf>0.25</span><span class=p>,</span>  <span class=c1># BM25 prioritized for better ranking</span>
</span><span id=__span-0-277><a id=__codelineno-0-277 name=__codelineno-0-277></a><a href=#__codelineno-0-277><span class=linenos data-linenos="277 "></span></a>        <span class=s2>&quot;tfidf_similarity&quot;</span><span class=p>:</span> <span class=mf>0.10</span><span class=p>,</span>  <span class=c1># TF-IDF as supplementary signal</span>
</span><span id=__span-0-278><a id=__codelineno-0-278 name=__codelineno-0-278></a><a href=#__codelineno-0-278><span class=linenos data-linenos="278 "></span></a>        <span class=s2>&quot;path_relevance&quot;</span><span class=p>:</span> <span class=mf>0.15</span><span class=p>,</span>
</span><span id=__span-0-279><a id=__codelineno-0-279 name=__codelineno-0-279></a><a href=#__codelineno-0-279><span class=linenos data-linenos="279 "></span></a>        <span class=s2>&quot;import_centrality&quot;</span><span class=p>:</span> <span class=mf>0.10</span><span class=p>,</span>
</span><span id=__span-0-280><a id=__codelineno-0-280 name=__codelineno-0-280></a><a href=#__codelineno-0-280><span class=linenos data-linenos="280 "></span></a>        <span class=s2>&quot;git_recency&quot;</span><span class=p>:</span> <span class=mf>0.05</span><span class=p>,</span>
</span><span id=__span-0-281><a id=__codelineno-0-281 name=__codelineno-0-281></a><a href=#__codelineno-0-281><span class=linenos data-linenos="281 "></span></a>        <span class=s2>&quot;git_frequency&quot;</span><span class=p>:</span> <span class=mf>0.05</span><span class=p>,</span>
</span><span id=__span-0-282><a id=__codelineno-0-282 name=__codelineno-0-282></a><a href=#__codelineno-0-282><span class=linenos data-linenos="282 "></span></a>        <span class=s2>&quot;complexity_relevance&quot;</span><span class=p>:</span> <span class=mf>0.05</span><span class=p>,</span>
</span><span id=__span-0-283><a id=__codelineno-0-283 name=__codelineno-0-283></a><a href=#__codelineno-0-283><span class=linenos data-linenos="283 "></span></a>        <span class=s2>&quot;type_relevance&quot;</span><span class=p>:</span> <span class=mf>0.05</span><span class=p>,</span>
</span><span id=__span-0-284><a id=__codelineno-0-284 name=__codelineno-0-284></a><a href=#__codelineno-0-284><span class=linenos data-linenos="284 "></span></a>    <span class=p>}</span>
</span></code></pre></div></details></div></div></div></div></div><div class="doc doc-object doc-class"><h4 id=tenets.core.ranking.strategies.ThoroughRankingStrategy class="doc doc-heading"><code class="doc-symbol doc-symbol-heading doc-symbol-class"></code> <span class="doc doc-object-name doc-class-name">ThoroughRankingStrategy</span><a href=#tenets.core.ranking.strategies.ThoroughRankingStrategy class=headerlink title="Link to this section">&para;</a></h4><div class="language-python doc-signature highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=nf>ThoroughRankingStrategy</span><span class=p>()</span>
</span></code></pre></div><div class="doc doc-contents "><p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title='<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">RankingStrategy</span> (<code>tenets.core.ranking.strategies.RankingStrategy</code>)' href=#tenets.core.ranking.strategies.RankingStrategy>RankingStrategy</a></code></p><p>Thorough deep analysis ranking strategy using centralized NLP.</p><p>Initialize thorough ranking strategy with NLP components.</p><details class=mkdocstrings-source><summary>Source code in <code>tenets/core/ranking/strategies.py</code></summary><div class="language-python highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-0-533><a id=__codelineno-0-533 name=__codelineno-0-533></a><a href=#__codelineno-0-533><span class=linenos data-linenos="533 "></span></a><span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span><span id=__span-0-534><a id=__codelineno-0-534 name=__codelineno-0-534></a><a href=#__codelineno-0-534><span class=linenos data-linenos="534 "></span></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Initialize thorough ranking strategy with NLP components.&quot;&quot;&quot;</span>
</span><span id=__span-0-535><a id=__codelineno-0-535 name=__codelineno-0-535></a><a href=#__codelineno-0-535><span class=linenos data-linenos="535 "></span></a>    <span class=kn>from</span><span class=w> </span><span class=nn>tenets.utils.logger</span><span class=w> </span><span class=kn>import</span> <span class=n>get_logger</span>
</span><span id=__span-0-536><a id=__codelineno-0-536 name=__codelineno-0-536></a><a href=#__codelineno-0-536><span class=linenos data-linenos="536 "></span></a>
</span><span id=__span-0-537><a id=__codelineno-0-537 name=__codelineno-0-537></a><a href=#__codelineno-0-537><span class=linenos data-linenos="537 "></span></a>    <span class=bp>self</span><span class=o>.</span><span class=n>logger</span> <span class=o>=</span> <span class=n>get_logger</span><span class=p>(</span><span class=vm>__name__</span><span class=p>)</span>
</span><span id=__span-0-538><a id=__codelineno-0-538 name=__codelineno-0-538></a><a href=#__codelineno-0-538><span class=linenos data-linenos="538 "></span></a>    <span class=c1># Get centralized programming patterns</span>
</span><span id=__span-0-539><a id=__codelineno-0-539 name=__codelineno-0-539></a><a href=#__codelineno-0-539><span class=linenos data-linenos="539 "></span></a>    <span class=bp>self</span><span class=o>.</span><span class=n>programming_patterns</span> <span class=o>=</span> <span class=n>get_programming_patterns</span><span class=p>()</span>
</span><span id=__span-0-540><a id=__codelineno-0-540 name=__codelineno-0-540></a><a href=#__codelineno-0-540><span class=linenos data-linenos="540 "></span></a>    <span class=c1># Import cosine similarity - check module level first for test patching</span>
</span><span id=__span-0-541><a id=__codelineno-0-541 name=__codelineno-0-541></a><a href=#__codelineno-0-541><span class=linenos data-linenos="541 "></span></a>    <span class=kn>import</span><span class=w> </span><span class=nn>sys</span>
</span><span id=__span-0-542><a id=__codelineno-0-542 name=__codelineno-0-542></a><a href=#__codelineno-0-542><span class=linenos data-linenos="542 "></span></a>
</span><span id=__span-0-543><a id=__codelineno-0-543 name=__codelineno-0-543></a><a href=#__codelineno-0-543><span class=linenos data-linenos="543 "></span></a>    <span class=n>ranker_module</span> <span class=o>=</span> <span class=n>sys</span><span class=o>.</span><span class=n>modules</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;tenets.core.ranking.ranker&quot;</span><span class=p>)</span>
</span><span id=__span-0-544><a id=__codelineno-0-544 name=__codelineno-0-544></a><a href=#__codelineno-0-544><span class=linenos data-linenos="544 "></span></a>    <span class=k>if</span> <span class=n>ranker_module</span> <span class=ow>and</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>ranker_module</span><span class=p>,</span> <span class=s2>&quot;cosine_similarity&quot;</span><span class=p>):</span>
</span><span id=__span-0-545><a id=__codelineno-0-545 name=__codelineno-0-545></a><a href=#__codelineno-0-545><span class=linenos data-linenos="545 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_cosine_similarity</span> <span class=o>=</span> <span class=n>ranker_module</span><span class=o>.</span><span class=n>cosine_similarity</span>
</span><span id=__span-0-546><a id=__codelineno-0-546 name=__codelineno-0-546></a><a href=#__codelineno-0-546><span class=linenos data-linenos="546 "></span></a>    <span class=k>else</span><span class=p>:</span>
</span><span id=__span-0-547><a id=__codelineno-0-547 name=__codelineno-0-547></a><a href=#__codelineno-0-547><span class=linenos data-linenos="547 "></span></a>        <span class=k>try</span><span class=p>:</span>
</span><span id=__span-0-548><a id=__codelineno-0-548 name=__codelineno-0-548></a><a href=#__codelineno-0-548><span class=linenos data-linenos="548 "></span></a>            <span class=kn>from</span><span class=w> </span><span class=nn>tenets.core.nlp.similarity</span><span class=w> </span><span class=kn>import</span> <span class=n>cosine_similarity</span> <span class=k>as</span> <span class=n>_cos</span>
</span><span id=__span-0-549><a id=__codelineno-0-549 name=__codelineno-0-549></a><a href=#__codelineno-0-549><span class=linenos data-linenos="549 "></span></a>
</span><span id=__span-0-550><a id=__codelineno-0-550 name=__codelineno-0-550></a><a href=#__codelineno-0-550><span class=linenos data-linenos="550 "></span></a>            <span class=bp>self</span><span class=o>.</span><span class=n>_cosine_similarity</span> <span class=o>=</span> <span class=n>_cos</span>
</span><span id=__span-0-551><a id=__codelineno-0-551 name=__codelineno-0-551></a><a href=#__codelineno-0-551><span class=linenos data-linenos="551 "></span></a>        <span class=k>except</span> <span class=ne>ImportError</span><span class=p>:</span>
</span><span id=__span-0-552><a id=__codelineno-0-552 name=__codelineno-0-552></a><a href=#__codelineno-0-552><span class=linenos data-linenos="552 "></span></a>            <span class=c1># Fallback for when nlp package not available</span>
</span><span id=__span-0-553><a id=__codelineno-0-553 name=__codelineno-0-553></a><a href=#__codelineno-0-553><span class=linenos data-linenos="553 "></span></a>            <span class=k>def</span><span class=w> </span><span class=nf>cosine_similarity</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>):</span>
</span><span id=__span-0-554><a id=__codelineno-0-554 name=__codelineno-0-554></a><a href=#__codelineno-0-554><span class=linenos data-linenos="554 "></span></a>                <span class=kn>import</span><span class=w> </span><span class=nn>math</span>
</span><span id=__span-0-555><a id=__codelineno-0-555 name=__codelineno-0-555></a><a href=#__codelineno-0-555><span class=linenos data-linenos="555 "></span></a>
</span><span id=__span-0-556><a id=__codelineno-0-556 name=__codelineno-0-556></a><a href=#__codelineno-0-556><span class=linenos data-linenos="556 "></span></a>                <span class=k>if</span> <span class=ow>not</span> <span class=n>a</span> <span class=ow>or</span> <span class=ow>not</span> <span class=n>b</span><span class=p>:</span>
</span><span id=__span-0-557><a id=__codelineno-0-557 name=__codelineno-0-557></a><a href=#__codelineno-0-557><span class=linenos data-linenos="557 "></span></a>                    <span class=k>return</span> <span class=mf>0.0</span>
</span><span id=__span-0-558><a id=__codelineno-0-558 name=__codelineno-0-558></a><a href=#__codelineno-0-558><span class=linenos data-linenos="558 "></span></a>                <span class=n>dot</span> <span class=o>=</span> <span class=nb>sum</span><span class=p>(</span><span class=n>x</span> <span class=o>*</span> <span class=n>y</span> <span class=k>for</span> <span class=n>x</span><span class=p>,</span> <span class=n>y</span> <span class=ow>in</span> <span class=nb>zip</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>))</span>
</span><span id=__span-0-559><a id=__codelineno-0-559 name=__codelineno-0-559></a><a href=#__codelineno-0-559><span class=linenos data-linenos="559 "></span></a>                <span class=n>norm_a</span> <span class=o>=</span> <span class=n>math</span><span class=o>.</span><span class=n>sqrt</span><span class=p>(</span><span class=nb>sum</span><span class=p>(</span><span class=n>x</span> <span class=o>*</span> <span class=n>x</span> <span class=k>for</span> <span class=n>x</span> <span class=ow>in</span> <span class=n>a</span><span class=p>))</span>
</span><span id=__span-0-560><a id=__codelineno-0-560 name=__codelineno-0-560></a><a href=#__codelineno-0-560><span class=linenos data-linenos="560 "></span></a>                <span class=n>norm_b</span> <span class=o>=</span> <span class=n>math</span><span class=o>.</span><span class=n>sqrt</span><span class=p>(</span><span class=nb>sum</span><span class=p>(</span><span class=n>y</span> <span class=o>*</span> <span class=n>y</span> <span class=k>for</span> <span class=n>y</span> <span class=ow>in</span> <span class=n>b</span><span class=p>))</span>
</span><span id=__span-0-561><a id=__codelineno-0-561 name=__codelineno-0-561></a><a href=#__codelineno-0-561><span class=linenos data-linenos="561 "></span></a>                <span class=k>if</span> <span class=n>norm_a</span> <span class=o>==</span> <span class=mi>0</span> <span class=ow>or</span> <span class=n>norm_b</span> <span class=o>==</span> <span class=mi>0</span><span class=p>:</span>
</span><span id=__span-0-562><a id=__codelineno-0-562 name=__codelineno-0-562></a><a href=#__codelineno-0-562><span class=linenos data-linenos="562 "></span></a>                    <span class=k>return</span> <span class=mf>0.0</span>
</span><span id=__span-0-563><a id=__codelineno-0-563 name=__codelineno-0-563></a><a href=#__codelineno-0-563><span class=linenos data-linenos="563 "></span></a>                <span class=k>return</span> <span class=n>dot</span> <span class=o>/</span> <span class=p>(</span><span class=n>norm_a</span> <span class=o>*</span> <span class=n>norm_b</span><span class=p>)</span>
</span><span id=__span-0-564><a id=__codelineno-0-564 name=__codelineno-0-564></a><a href=#__codelineno-0-564><span class=linenos data-linenos="564 "></span></a>
</span><span id=__span-0-565><a id=__codelineno-0-565 name=__codelineno-0-565></a><a href=#__codelineno-0-565><span class=linenos data-linenos="565 "></span></a>            <span class=bp>self</span><span class=o>.</span><span class=n>_cosine_similarity</span> <span class=o>=</span> <span class=n>cosine_similarity</span>
</span><span id=__span-0-566><a id=__codelineno-0-566 name=__codelineno-0-566></a><a href=#__codelineno-0-566><span class=linenos data-linenos="566 "></span></a>
</span><span id=__span-0-567><a id=__codelineno-0-567 name=__codelineno-0-567></a><a href=#__codelineno-0-567><span class=linenos data-linenos="567 "></span></a>    <span class=c1># Optional embedding model for semantic similarity</span>
</span><span id=__span-0-568><a id=__codelineno-0-568 name=__codelineno-0-568></a><a href=#__codelineno-0-568><span class=linenos data-linenos="568 "></span></a>    <span class=k>try</span><span class=p>:</span>  <span class=c1># pragma: no cover - optional dependency</span>
</span><span id=__span-0-569><a id=__codelineno-0-569 name=__codelineno-0-569></a><a href=#__codelineno-0-569><span class=linenos data-linenos="569 "></span></a>        <span class=c1># Check if SentenceTransformer is available at module level (for test patching)</span>
</span><span id=__span-0-570><a id=__codelineno-0-570 name=__codelineno-0-570></a><a href=#__codelineno-0-570><span class=linenos data-linenos="570 "></span></a>        <span class=k>if</span> <span class=n>ranker_module</span> <span class=ow>and</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>ranker_module</span><span class=p>,</span> <span class=s2>&quot;SentenceTransformer&quot;</span><span class=p>):</span>
</span><span id=__span-0-571><a id=__codelineno-0-571 name=__codelineno-0-571></a><a href=#__codelineno-0-571><span class=linenos data-linenos="571 "></span></a>            <span class=n>_ST</span> <span class=o>=</span> <span class=n>ranker_module</span><span class=o>.</span><span class=n>SentenceTransformer</span>
</span><span id=__span-0-572><a id=__codelineno-0-572 name=__codelineno-0-572></a><a href=#__codelineno-0-572><span class=linenos data-linenos="572 "></span></a>        <span class=k>else</span><span class=p>:</span>
</span><span id=__span-0-573><a id=__codelineno-0-573 name=__codelineno-0-573></a><a href=#__codelineno-0-573><span class=linenos data-linenos="573 "></span></a>            <span class=c1># Import directly from sentence_transformers</span>
</span><span id=__span-0-574><a id=__codelineno-0-574 name=__codelineno-0-574></a><a href=#__codelineno-0-574><span class=linenos data-linenos="574 "></span></a>            <span class=kn>from</span><span class=w> </span><span class=nn>sentence_transformers</span><span class=w> </span><span class=kn>import</span> <span class=n>SentenceTransformer</span> <span class=k>as</span> <span class=n>_ST</span>
</span><span id=__span-0-575><a id=__codelineno-0-575 name=__codelineno-0-575></a><a href=#__codelineno-0-575><span class=linenos data-linenos="575 "></span></a>
</span><span id=__span-0-576><a id=__codelineno-0-576 name=__codelineno-0-576></a><a href=#__codelineno-0-576><span class=linenos data-linenos="576 "></span></a>        <span class=k>if</span> <span class=n>_ST</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span><span class=p>:</span>
</span><span id=__span-0-577><a id=__codelineno-0-577 name=__codelineno-0-577></a><a href=#__codelineno-0-577><span class=linenos data-linenos="577 "></span></a>            <span class=c1># Tests expect this exact constructor call</span>
</span><span id=__span-0-578><a id=__codelineno-0-578 name=__codelineno-0-578></a><a href=#__codelineno-0-578><span class=linenos data-linenos="578 "></span></a>            <span class=bp>self</span><span class=o>.</span><span class=n>_embedding_model</span> <span class=o>=</span> <span class=n>_ST</span><span class=p>(</span><span class=s2>&quot;all-MiniLM-L6-v2&quot;</span><span class=p>)</span>
</span><span id=__span-0-579><a id=__codelineno-0-579 name=__codelineno-0-579></a><a href=#__codelineno-0-579><span class=linenos data-linenos="579 "></span></a>        <span class=k>else</span><span class=p>:</span>
</span><span id=__span-0-580><a id=__codelineno-0-580 name=__codelineno-0-580></a><a href=#__codelineno-0-580><span class=linenos data-linenos="580 "></span></a>            <span class=bp>self</span><span class=o>.</span><span class=n>_embedding_model</span> <span class=o>=</span> <span class=kc>None</span>
</span><span id=__span-0-581><a id=__codelineno-0-581 name=__codelineno-0-581></a><a href=#__codelineno-0-581><span class=linenos data-linenos="581 "></span></a>    <span class=k>except</span> <span class=ne>Exception</span><span class=p>:</span>
</span><span id=__span-0-582><a id=__codelineno-0-582 name=__codelineno-0-582></a><a href=#__codelineno-0-582><span class=linenos data-linenos="582 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_embedding_model</span> <span class=o>=</span> <span class=kc>None</span>
</span><span id=__span-0-583><a id=__codelineno-0-583 name=__codelineno-0-583></a><a href=#__codelineno-0-583><span class=linenos data-linenos="583 "></span></a>
</span><span id=__span-0-584><a id=__codelineno-0-584 name=__codelineno-0-584></a><a href=#__codelineno-0-584><span class=linenos data-linenos="584 "></span></a>        <span class=c1># Fallback simple cosine if import failed</span>
</span><span id=__span-0-585><a id=__codelineno-0-585 name=__codelineno-0-585></a><a href=#__codelineno-0-585><span class=linenos data-linenos="585 "></span></a>        <span class=k>def</span><span class=w> </span><span class=nf>_fallback_cos</span><span class=p>(</span><span class=n>a</span><span class=p>,</span> <span class=n>b</span><span class=p>):</span>
</span><span id=__span-0-586><a id=__codelineno-0-586 name=__codelineno-0-586></a><a href=#__codelineno-0-586><span class=linenos data-linenos="586 "></span></a>            <span class=k>try</span><span class=p>:</span>
</span><span id=__span-0-587><a id=__codelineno-0-587 name=__codelineno-0-587></a><a href=#__codelineno-0-587><span class=linenos data-linenos="587 "></span></a>
</span><span id=__span-0-588><a id=__codelineno-0-588 name=__codelineno-0-588></a><a href=#__codelineno-0-588><span class=linenos data-linenos="588 "></span></a>                <span class=k>def</span><span class=w> </span><span class=nf>to_vec</span><span class=p>(</span><span class=n>x</span><span class=p>):</span>
</span><span id=__span-0-589><a id=__codelineno-0-589 name=__codelineno-0-589></a><a href=#__codelineno-0-589><span class=linenos data-linenos="589 "></span></a>                    <span class=k>try</span><span class=p>:</span>
</span><span id=__span-0-590><a id=__codelineno-0-590 name=__codelineno-0-590></a><a href=#__codelineno-0-590><span class=linenos data-linenos="590 "></span></a>                        <span class=k>if</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=s2>&quot;detach&quot;</span><span class=p>):</span>
</span><span id=__span-0-591><a id=__codelineno-0-591 name=__codelineno-0-591></a><a href=#__codelineno-0-591><span class=linenos data-linenos="591 "></span></a>                            <span class=n>x</span> <span class=o>=</span> <span class=n>x</span><span class=o>.</span><span class=n>detach</span><span class=p>()</span>
</span><span id=__span-0-592><a id=__codelineno-0-592 name=__codelineno-0-592></a><a href=#__codelineno-0-592><span class=linenos data-linenos="592 "></span></a>                        <span class=k>if</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=s2>&quot;flatten&quot;</span><span class=p>):</span>
</span><span id=__span-0-593><a id=__codelineno-0-593 name=__codelineno-0-593></a><a href=#__codelineno-0-593><span class=linenos data-linenos="593 "></span></a>                            <span class=n>x</span> <span class=o>=</span> <span class=n>x</span><span class=o>.</span><span class=n>flatten</span><span class=p>()</span>
</span><span id=__span-0-594><a id=__codelineno-0-594 name=__codelineno-0-594></a><a href=#__codelineno-0-594><span class=linenos data-linenos="594 "></span></a>                        <span class=k>if</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=s2>&quot;tolist&quot;</span><span class=p>):</span>
</span><span id=__span-0-595><a id=__codelineno-0-595 name=__codelineno-0-595></a><a href=#__codelineno-0-595><span class=linenos data-linenos="595 "></span></a>                            <span class=n>x</span> <span class=o>=</span> <span class=n>x</span><span class=o>.</span><span class=n>tolist</span><span class=p>()</span>
</span><span id=__span-0-596><a id=__codelineno-0-596 name=__codelineno-0-596></a><a href=#__codelineno-0-596><span class=linenos data-linenos="596 "></span></a>                    <span class=k>except</span> <span class=ne>Exception</span><span class=p>:</span>
</span><span id=__span-0-597><a id=__codelineno-0-597 name=__codelineno-0-597></a><a href=#__codelineno-0-597><span class=linenos data-linenos="597 "></span></a>                        <span class=k>pass</span>
</span><span id=__span-0-598><a id=__codelineno-0-598 name=__codelineno-0-598></a><a href=#__codelineno-0-598><span class=linenos data-linenos="598 "></span></a>
</span><span id=__span-0-599><a id=__codelineno-0-599 name=__codelineno-0-599></a><a href=#__codelineno-0-599><span class=linenos data-linenos="599 "></span></a>                    <span class=k>def</span><span class=w> </span><span class=nf>flatten</span><span class=p>(</span><span class=n>seq</span><span class=p>):</span>
</span><span id=__span-0-600><a id=__codelineno-0-600 name=__codelineno-0-600></a><a href=#__codelineno-0-600><span class=linenos data-linenos="600 "></span></a>                        <span class=k>for</span> <span class=n>item</span> <span class=ow>in</span> <span class=n>seq</span><span class=p>:</span>
</span><span id=__span-0-601><a id=__codelineno-0-601 name=__codelineno-0-601></a><a href=#__codelineno-0-601><span class=linenos data-linenos="601 "></span></a>                            <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>item</span><span class=p>,</span> <span class=p>(</span><span class=nb>list</span><span class=p>,</span> <span class=nb>tuple</span><span class=p>)):</span>
</span><span id=__span-0-602><a id=__codelineno-0-602 name=__codelineno-0-602></a><a href=#__codelineno-0-602><span class=linenos data-linenos="602 "></span></a>                                <span class=k>yield from</span> <span class=n>flatten</span><span class=p>(</span><span class=n>item</span><span class=p>)</span>
</span><span id=__span-0-603><a id=__codelineno-0-603 name=__codelineno-0-603></a><a href=#__codelineno-0-603><span class=linenos data-linenos="603 "></span></a>                            <span class=k>else</span><span class=p>:</span>
</span><span id=__span-0-604><a id=__codelineno-0-604 name=__codelineno-0-604></a><a href=#__codelineno-0-604><span class=linenos data-linenos="604 "></span></a>                                <span class=k>try</span><span class=p>:</span>
</span><span id=__span-0-605><a id=__codelineno-0-605 name=__codelineno-0-605></a><a href=#__codelineno-0-605><span class=linenos data-linenos="605 "></span></a>                                    <span class=k>yield</span> <span class=nb>float</span><span class=p>(</span><span class=n>item</span><span class=p>)</span>
</span><span id=__span-0-606><a id=__codelineno-0-606 name=__codelineno-0-606></a><a href=#__codelineno-0-606><span class=linenos data-linenos="606 "></span></a>                                <span class=k>except</span> <span class=ne>Exception</span><span class=p>:</span>
</span><span id=__span-0-607><a id=__codelineno-0-607 name=__codelineno-0-607></a><a href=#__codelineno-0-607><span class=linenos data-linenos="607 "></span></a>                                    <span class=k>yield</span> <span class=mf>0.0</span>
</span><span id=__span-0-608><a id=__codelineno-0-608 name=__codelineno-0-608></a><a href=#__codelineno-0-608><span class=linenos data-linenos="608 "></span></a>
</span><span id=__span-0-609><a id=__codelineno-0-609 name=__codelineno-0-609></a><a href=#__codelineno-0-609><span class=linenos data-linenos="609 "></span></a>                    <span class=k>if</span> <span class=nb>isinstance</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=p>(</span><span class=nb>list</span><span class=p>,</span> <span class=nb>tuple</span><span class=p>)):</span>
</span><span id=__span-0-610><a id=__codelineno-0-610 name=__codelineno-0-610></a><a href=#__codelineno-0-610><span class=linenos data-linenos="610 "></span></a>                        <span class=k>return</span> <span class=nb>list</span><span class=p>(</span><span class=n>flatten</span><span class=p>(</span><span class=n>x</span><span class=p>))</span>
</span><span id=__span-0-611><a id=__codelineno-0-611 name=__codelineno-0-611></a><a href=#__codelineno-0-611><span class=linenos data-linenos="611 "></span></a>                    <span class=k>try</span><span class=p>:</span>
</span><span id=__span-0-612><a id=__codelineno-0-612 name=__codelineno-0-612></a><a href=#__codelineno-0-612><span class=linenos data-linenos="612 "></span></a>                        <span class=k>return</span> <span class=p>[</span><span class=nb>float</span><span class=p>(</span><span class=n>x</span><span class=p>)]</span>
</span><span id=__span-0-613><a id=__codelineno-0-613 name=__codelineno-0-613></a><a href=#__codelineno-0-613><span class=linenos data-linenos="613 "></span></a>                    <span class=k>except</span> <span class=ne>Exception</span><span class=p>:</span>
</span><span id=__span-0-614><a id=__codelineno-0-614 name=__codelineno-0-614></a><a href=#__codelineno-0-614><span class=linenos data-linenos="614 "></span></a>                        <span class=k>return</span> <span class=p>[</span><span class=mf>0.0</span><span class=p>]</span>
</span><span id=__span-0-615><a id=__codelineno-0-615 name=__codelineno-0-615></a><a href=#__codelineno-0-615><span class=linenos data-linenos="615 "></span></a>
</span><span id=__span-0-616><a id=__codelineno-0-616 name=__codelineno-0-616></a><a href=#__codelineno-0-616><span class=linenos data-linenos="616 "></span></a>                <span class=n>va</span> <span class=o>=</span> <span class=n>to_vec</span><span class=p>(</span><span class=n>a</span><span class=p>)</span>
</span><span id=__span-0-617><a id=__codelineno-0-617 name=__codelineno-0-617></a><a href=#__codelineno-0-617><span class=linenos data-linenos="617 "></span></a>                <span class=n>vb</span> <span class=o>=</span> <span class=n>to_vec</span><span class=p>(</span><span class=n>b</span><span class=p>)</span>
</span><span id=__span-0-618><a id=__codelineno-0-618 name=__codelineno-0-618></a><a href=#__codelineno-0-618><span class=linenos data-linenos="618 "></span></a>                <span class=n>n</span> <span class=o>=</span> <span class=nb>min</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>va</span><span class=p>),</span> <span class=nb>len</span><span class=p>(</span><span class=n>vb</span><span class=p>))</span>
</span><span id=__span-0-619><a id=__codelineno-0-619 name=__codelineno-0-619></a><a href=#__codelineno-0-619><span class=linenos data-linenos="619 "></span></a>                <span class=k>if</span> <span class=n>n</span> <span class=o>==</span> <span class=mi>0</span><span class=p>:</span>
</span><span id=__span-0-620><a id=__codelineno-0-620 name=__codelineno-0-620></a><a href=#__codelineno-0-620><span class=linenos data-linenos="620 "></span></a>                    <span class=k>return</span> <span class=mf>0.0</span>
</span><span id=__span-0-621><a id=__codelineno-0-621 name=__codelineno-0-621></a><a href=#__codelineno-0-621><span class=linenos data-linenos="621 "></span></a>                <span class=n>va</span> <span class=o>=</span> <span class=n>va</span><span class=p>[:</span><span class=n>n</span><span class=p>]</span>
</span><span id=__span-0-622><a id=__codelineno-0-622 name=__codelineno-0-622></a><a href=#__codelineno-0-622><span class=linenos data-linenos="622 "></span></a>                <span class=n>vb</span> <span class=o>=</span> <span class=n>vb</span><span class=p>[:</span><span class=n>n</span><span class=p>]</span>
</span><span id=__span-0-623><a id=__codelineno-0-623 name=__codelineno-0-623></a><a href=#__codelineno-0-623><span class=linenos data-linenos="623 "></span></a>                <span class=n>dot</span> <span class=o>=</span> <span class=nb>sum</span><span class=p>(</span><span class=n>va</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>*</span> <span class=n>vb</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>n</span><span class=p>))</span>
</span><span id=__span-0-624><a id=__codelineno-0-624 name=__codelineno-0-624></a><a href=#__codelineno-0-624><span class=linenos data-linenos="624 "></span></a>                <span class=n>norm_a</span> <span class=o>=</span> <span class=n>math</span><span class=o>.</span><span class=n>sqrt</span><span class=p>(</span><span class=nb>sum</span><span class=p>(</span><span class=n>v</span> <span class=o>*</span> <span class=n>v</span> <span class=k>for</span> <span class=n>v</span> <span class=ow>in</span> <span class=n>va</span><span class=p>))</span> <span class=ow>or</span> <span class=mf>1.0</span>
</span><span id=__span-0-625><a id=__codelineno-0-625 name=__codelineno-0-625></a><a href=#__codelineno-0-625><span class=linenos data-linenos="625 "></span></a>                <span class=n>norm_b</span> <span class=o>=</span> <span class=n>math</span><span class=o>.</span><span class=n>sqrt</span><span class=p>(</span><span class=nb>sum</span><span class=p>(</span><span class=n>v</span> <span class=o>*</span> <span class=n>v</span> <span class=k>for</span> <span class=n>v</span> <span class=ow>in</span> <span class=n>vb</span><span class=p>))</span> <span class=ow>or</span> <span class=mf>1.0</span>
</span><span id=__span-0-626><a id=__codelineno-0-626 name=__codelineno-0-626></a><a href=#__codelineno-0-626><span class=linenos data-linenos="626 "></span></a>                <span class=k>return</span> <span class=nb>float</span><span class=p>(</span><span class=n>dot</span> <span class=o>/</span> <span class=p>(</span><span class=n>norm_a</span> <span class=o>*</span> <span class=n>norm_b</span><span class=p>))</span>
</span><span id=__span-0-627><a id=__codelineno-0-627 name=__codelineno-0-627></a><a href=#__codelineno-0-627><span class=linenos data-linenos="627 "></span></a>            <span class=k>except</span> <span class=ne>Exception</span><span class=p>:</span>
</span><span id=__span-0-628><a id=__codelineno-0-628 name=__codelineno-0-628></a><a href=#__codelineno-0-628><span class=linenos data-linenos="628 "></span></a>                <span class=k>return</span> <span class=mf>0.0</span>
</span><span id=__span-0-629><a id=__codelineno-0-629 name=__codelineno-0-629></a><a href=#__codelineno-0-629><span class=linenos data-linenos="629 "></span></a>
</span><span id=__span-0-630><a id=__codelineno-0-630 name=__codelineno-0-630></a><a href=#__codelineno-0-630><span class=linenos data-linenos="630 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_cosine_similarity</span> <span class=o>=</span> <span class=n>_fallback_cos</span>
</span></code></pre></div></details><div class="doc doc-children"><h5 id=tenets.core.ranking.strategies.ThoroughRankingStrategy-functions>Functions<a href=#tenets.core.ranking.strategies.ThoroughRankingStrategy-functions class=headerlink title="Link to this section">&para;</a></h5><div class="doc doc-object doc-function"><h6 id=tenets.core.ranking.strategies.ThoroughRankingStrategy.rank_file class="doc doc-heading"><code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">rank_file</span><a href=#tenets.core.ranking.strategies.ThoroughRankingStrategy.rank_file class=headerlink title="Link to this section">&para;</a></h6><div class="language-python doc-signature highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=nf>rank_file</span><span class=p>(</span><span class=n>file</span><span class=p>:</span> <span class=n>FileAnalysis</span><span class=p>,</span> <span class=n>prompt_context</span><span class=p>:</span> <span class=n>PromptContext</span><span class=p>,</span> <span class=n>corpus_stats</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=n>RankingFactors</span>
</span></code></pre></div><div class="doc doc-contents "><p>Thorough ranking with deep analysis using centralized NLP.</p><details class=mkdocstrings-source><summary>Source code in <code>tenets/core/ranking/strategies.py</code></summary><div class="language-python highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-0-632><a id=__codelineno-0-632 name=__codelineno-0-632></a><a href=#__codelineno-0-632><span class=linenos data-linenos="632 "></span></a><span class=k>def</span><span class=w> </span><span class=nf>rank_file</span><span class=p>(</span>
</span><span id=__span-0-633><a id=__codelineno-0-633 name=__codelineno-0-633></a><a href=#__codelineno-0-633><span class=linenos data-linenos="633 "></span></a>    <span class=bp>self</span><span class=p>,</span> <span class=n>file</span><span class=p>:</span> <span class=n>FileAnalysis</span><span class=p>,</span> <span class=n>prompt_context</span><span class=p>:</span> <span class=n>PromptContext</span><span class=p>,</span> <span class=n>corpus_stats</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]</span>
</span><span id=__span-0-634><a id=__codelineno-0-634 name=__codelineno-0-634></a><a href=#__codelineno-0-634><span class=linenos data-linenos="634 "></span></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>RankingFactors</span><span class=p>:</span>
</span><span id=__span-0-635><a id=__codelineno-0-635 name=__codelineno-0-635></a><a href=#__codelineno-0-635><span class=linenos data-linenos="635 "></span></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Thorough ranking with deep analysis using centralized NLP.&quot;&quot;&quot;</span>
</span><span id=__span-0-636><a id=__codelineno-0-636 name=__codelineno-0-636></a><a href=#__codelineno-0-636><span class=linenos data-linenos="636 "></span></a>    <span class=c1># Start with balanced ranking</span>
</span><span id=__span-0-637><a id=__codelineno-0-637 name=__codelineno-0-637></a><a href=#__codelineno-0-637><span class=linenos data-linenos="637 "></span></a>    <span class=n>balanced</span> <span class=o>=</span> <span class=n>BalancedRankingStrategy</span><span class=p>()</span>
</span><span id=__span-0-638><a id=__codelineno-0-638 name=__codelineno-0-638></a><a href=#__codelineno-0-638><span class=linenos data-linenos="638 "></span></a>    <span class=n>factors</span> <span class=o>=</span> <span class=n>balanced</span><span class=o>.</span><span class=n>rank_file</span><span class=p>(</span><span class=n>file</span><span class=p>,</span> <span class=n>prompt_context</span><span class=p>,</span> <span class=n>corpus_stats</span><span class=p>)</span>
</span><span id=__span-0-639><a id=__codelineno-0-639 name=__codelineno-0-639></a><a href=#__codelineno-0-639><span class=linenos data-linenos="639 "></span></a>
</span><span id=__span-0-640><a id=__codelineno-0-640 name=__codelineno-0-640></a><a href=#__codelineno-0-640><span class=linenos data-linenos="640 "></span></a>    <span class=c1># Add deep code pattern analysis using centralized patterns</span>
</span><span id=__span-0-641><a id=__codelineno-0-641 name=__codelineno-0-641></a><a href=#__codelineno-0-641><span class=linenos data-linenos="641 "></span></a>    <span class=n>pattern_scores</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>programming_patterns</span><span class=o>.</span><span class=n>analyze_code_patterns</span><span class=p>(</span>
</span><span id=__span-0-642><a id=__codelineno-0-642 name=__codelineno-0-642></a><a href=#__codelineno-0-642><span class=linenos data-linenos="642 "></span></a>        <span class=n>file</span><span class=o>.</span><span class=n>content</span> <span class=ow>or</span> <span class=s2>&quot;&quot;</span><span class=p>,</span> <span class=n>prompt_context</span><span class=o>.</span><span class=n>keywords</span>
</span><span id=__span-0-643><a id=__codelineno-0-643 name=__codelineno-0-643></a><a href=#__codelineno-0-643><span class=linenos data-linenos="643 "></span></a>    <span class=p>)</span>
</span><span id=__span-0-644><a id=__codelineno-0-644 name=__codelineno-0-644></a><a href=#__codelineno-0-644><span class=linenos data-linenos="644 "></span></a>
</span><span id=__span-0-645><a id=__codelineno-0-645 name=__codelineno-0-645></a><a href=#__codelineno-0-645><span class=linenos data-linenos="645 "></span></a>    <span class=c1># Store overall score</span>
</span><span id=__span-0-646><a id=__codelineno-0-646 name=__codelineno-0-646></a><a href=#__codelineno-0-646><span class=linenos data-linenos="646 "></span></a>    <span class=n>factors</span><span class=o>.</span><span class=n>code_patterns</span> <span class=o>=</span> <span class=n>pattern_scores</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;overall&quot;</span><span class=p>,</span> <span class=mf>0.0</span><span class=p>)</span>
</span><span id=__span-0-647><a id=__codelineno-0-647 name=__codelineno-0-647></a><a href=#__codelineno-0-647><span class=linenos data-linenos="647 "></span></a>
</span><span id=__span-0-648><a id=__codelineno-0-648 name=__codelineno-0-648></a><a href=#__codelineno-0-648><span class=linenos data-linenos="648 "></span></a>    <span class=c1># Store individual category scores with clean naming</span>
</span><span id=__span-0-649><a id=__codelineno-0-649 name=__codelineno-0-649></a><a href=#__codelineno-0-649><span class=linenos data-linenos="649 "></span></a>    <span class=k>for</span> <span class=n>category</span><span class=p>,</span> <span class=n>score</span> <span class=ow>in</span> <span class=n>pattern_scores</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
</span><span id=__span-0-650><a id=__codelineno-0-650 name=__codelineno-0-650></a><a href=#__codelineno-0-650><span class=linenos data-linenos="650 "></span></a>        <span class=k>if</span> <span class=n>category</span> <span class=o>!=</span> <span class=s2>&quot;overall&quot;</span><span class=p>:</span>
</span><span id=__span-0-651><a id=__codelineno-0-651 name=__codelineno-0-651></a><a href=#__codelineno-0-651><span class=linenos data-linenos="651 "></span></a>            <span class=c1># Use consistent naming: category_patterns</span>
</span><span id=__span-0-652><a id=__codelineno-0-652 name=__codelineno-0-652></a><a href=#__codelineno-0-652><span class=linenos data-linenos="652 "></span></a>            <span class=n>factors</span><span class=o>.</span><span class=n>custom_scores</span><span class=p>[</span><span class=sa>f</span><span class=s2>&quot;</span><span class=si>{</span><span class=n>category</span><span class=si>}</span><span class=s2>_patterns&quot;</span><span class=p>]</span> <span class=o>=</span> <span class=n>score</span>
</span><span id=__span-0-653><a id=__codelineno-0-653 name=__codelineno-0-653></a><a href=#__codelineno-0-653><span class=linenos data-linenos="653 "></span></a>
</span><span id=__span-0-654><a id=__codelineno-0-654 name=__codelineno-0-654></a><a href=#__codelineno-0-654><span class=linenos data-linenos="654 "></span></a>    <span class=c1># AST-based analysis</span>
</span><span id=__span-0-655><a id=__codelineno-0-655 name=__codelineno-0-655></a><a href=#__codelineno-0-655><span class=linenos data-linenos="655 "></span></a>    <span class=k>if</span> <span class=n>file</span><span class=o>.</span><span class=n>structure</span><span class=p>:</span>
</span><span id=__span-0-656><a id=__codelineno-0-656 name=__codelineno-0-656></a><a href=#__codelineno-0-656><span class=linenos data-linenos="656 "></span></a>        <span class=n>ast_scores</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_analyze_ast_relevance</span><span class=p>(</span><span class=n>file</span><span class=p>,</span> <span class=n>prompt_context</span><span class=p>)</span>
</span><span id=__span-0-657><a id=__codelineno-0-657 name=__codelineno-0-657></a><a href=#__codelineno-0-657><span class=linenos data-linenos="657 "></span></a>        <span class=n>factors</span><span class=o>.</span><span class=n>ast_relevance</span> <span class=o>=</span> <span class=n>ast_scores</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;overall&quot;</span><span class=p>,</span> <span class=mf>0.0</span><span class=p>)</span>
</span><span id=__span-0-658><a id=__codelineno-0-658 name=__codelineno-0-658></a><a href=#__codelineno-0-658><span class=linenos data-linenos="658 "></span></a>        <span class=n>factors</span><span class=o>.</span><span class=n>custom_scores</span><span class=o>.</span><span class=n>update</span><span class=p>(</span><span class=n>ast_scores</span><span class=p>)</span>
</span><span id=__span-0-659><a id=__codelineno-0-659 name=__codelineno-0-659></a><a href=#__codelineno-0-659><span class=linenos data-linenos="659 "></span></a>
</span><span id=__span-0-660><a id=__codelineno-0-660 name=__codelineno-0-660></a><a href=#__codelineno-0-660><span class=linenos data-linenos="660 "></span></a>    <span class=c1># Documentation analysis</span>
</span><span id=__span-0-661><a id=__codelineno-0-661 name=__codelineno-0-661></a><a href=#__codelineno-0-661><span class=linenos data-linenos="661 "></span></a>    <span class=n>factors</span><span class=o>.</span><span class=n>documentation_score</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_analyze_documentation</span><span class=p>(</span><span class=n>file</span><span class=p>)</span>
</span><span id=__span-0-662><a id=__codelineno-0-662 name=__codelineno-0-662></a><a href=#__codelineno-0-662><span class=linenos data-linenos="662 "></span></a>
</span><span id=__span-0-663><a id=__codelineno-0-663 name=__codelineno-0-663></a><a href=#__codelineno-0-663><span class=linenos data-linenos="663 "></span></a>    <span class=c1># Test coverage relevance</span>
</span><span id=__span-0-664><a id=__codelineno-0-664 name=__codelineno-0-664></a><a href=#__codelineno-0-664><span class=linenos data-linenos="664 "></span></a>    <span class=k>if</span> <span class=n>prompt_context</span><span class=o>.</span><span class=n>task_type</span> <span class=o>==</span> <span class=s2>&quot;test&quot;</span><span class=p>:</span>
</span><span id=__span-0-665><a id=__codelineno-0-665 name=__codelineno-0-665></a><a href=#__codelineno-0-665><span class=linenos data-linenos="665 "></span></a>        <span class=n>factors</span><span class=o>.</span><span class=n>test_coverage</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_analyze_test_coverage</span><span class=p>(</span><span class=n>file</span><span class=p>)</span>
</span><span id=__span-0-666><a id=__codelineno-0-666 name=__codelineno-0-666></a><a href=#__codelineno-0-666><span class=linenos data-linenos="666 "></span></a>
</span><span id=__span-0-667><a id=__codelineno-0-667 name=__codelineno-0-667></a><a href=#__codelineno-0-667><span class=linenos data-linenos="667 "></span></a>    <span class=c1># Dependency depth</span>
</span><span id=__span-0-668><a id=__codelineno-0-668 name=__codelineno-0-668></a><a href=#__codelineno-0-668><span class=linenos data-linenos="668 "></span></a>    <span class=k>if</span> <span class=n>corpus_stats</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=s2>&quot;dependency_tree&quot;</span><span class=p>):</span>
</span><span id=__span-0-669><a id=__codelineno-0-669 name=__codelineno-0-669></a><a href=#__codelineno-0-669><span class=linenos data-linenos="669 "></span></a>        <span class=n>factors</span><span class=o>.</span><span class=n>dependency_depth</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_calculate_dependency_depth</span><span class=p>(</span>
</span><span id=__span-0-670><a id=__codelineno-0-670 name=__codelineno-0-670></a><a href=#__codelineno-0-670><span class=linenos data-linenos="670 "></span></a>            <span class=n>file</span><span class=p>,</span> <span class=n>corpus_stats</span><span class=p>[</span><span class=s2>&quot;dependency_tree&quot;</span><span class=p>]</span>
</span><span id=__span-0-671><a id=__codelineno-0-671 name=__codelineno-0-671></a><a href=#__codelineno-0-671><span class=linenos data-linenos="671 "></span></a>        <span class=p>)</span>
</span><span id=__span-0-672><a id=__codelineno-0-672 name=__codelineno-0-672></a><a href=#__codelineno-0-672><span class=linenos data-linenos="672 "></span></a>
</span><span id=__span-0-673><a id=__codelineno-0-673 name=__codelineno-0-673></a><a href=#__codelineno-0-673><span class=linenos data-linenos="673 "></span></a>    <span class=c1># Author relevance (if specific authors mentioned)</span>
</span><span id=__span-0-674><a id=__codelineno-0-674 name=__codelineno-0-674></a><a href=#__codelineno-0-674><span class=linenos data-linenos="674 "></span></a>    <span class=k>if</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>file</span><span class=p>,</span> <span class=s2>&quot;git_info&quot;</span><span class=p>)</span> <span class=ow>and</span> <span class=n>file</span><span class=o>.</span><span class=n>git_info</span><span class=p>:</span>
</span><span id=__span-0-675><a id=__codelineno-0-675 name=__codelineno-0-675></a><a href=#__codelineno-0-675><span class=linenos data-linenos="675 "></span></a>        <span class=n>factors</span><span class=o>.</span><span class=n>git_author_relevance</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_calculate_author_relevance</span><span class=p>(</span>
</span><span id=__span-0-676><a id=__codelineno-0-676 name=__codelineno-0-676></a><a href=#__codelineno-0-676><span class=linenos data-linenos="676 "></span></a>            <span class=n>file</span><span class=o>.</span><span class=n>git_info</span><span class=p>,</span> <span class=n>prompt_context</span>
</span><span id=__span-0-677><a id=__codelineno-0-677 name=__codelineno-0-677></a><a href=#__codelineno-0-677><span class=linenos data-linenos="677 "></span></a>        <span class=p>)</span>
</span><span id=__span-0-678><a id=__codelineno-0-678 name=__codelineno-0-678></a><a href=#__codelineno-0-678><span class=linenos data-linenos="678 "></span></a>
</span><span id=__span-0-679><a id=__codelineno-0-679 name=__codelineno-0-679></a><a href=#__codelineno-0-679><span class=linenos data-linenos="679 "></span></a>    <span class=c1># Semantic similarity (lightweight embedding-based) if model available</span>
</span><span id=__span-0-680><a id=__codelineno-0-680 name=__codelineno-0-680></a><a href=#__codelineno-0-680><span class=linenos data-linenos="680 "></span></a>    <span class=k>try</span><span class=p>:</span>
</span><span id=__span-0-681><a id=__codelineno-0-681 name=__codelineno-0-681></a><a href=#__codelineno-0-681><span class=linenos data-linenos="681 "></span></a>        <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_embedding_model</span> <span class=ow>and</span> <span class=n>file</span><span class=o>.</span><span class=n>content</span> <span class=ow>and</span> <span class=n>prompt_context</span><span class=o>.</span><span class=n>text</span><span class=p>:</span>
</span><span id=__span-0-682><a id=__codelineno-0-682 name=__codelineno-0-682></a><a href=#__codelineno-0-682><span class=linenos data-linenos="682 "></span></a>            <span class=c1># Typical usage encodes to tensor; tests provide a mock with unsqueeze</span>
</span><span id=__span-0-683><a id=__codelineno-0-683 name=__codelineno-0-683></a><a href=#__codelineno-0-683><span class=linenos data-linenos="683 "></span></a>            <span class=n>f_emb</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_embedding_model</span><span class=o>.</span><span class=n>encode</span><span class=p>(</span><span class=n>file</span><span class=o>.</span><span class=n>content</span><span class=p>,</span> <span class=n>convert_to_tensor</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span><span id=__span-0-684><a id=__codelineno-0-684 name=__codelineno-0-684></a><a href=#__codelineno-0-684><span class=linenos data-linenos="684 "></span></a>            <span class=k>if</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>f_emb</span><span class=p>,</span> <span class=s2>&quot;unsqueeze&quot;</span><span class=p>):</span>
</span><span id=__span-0-685><a id=__codelineno-0-685 name=__codelineno-0-685></a><a href=#__codelineno-0-685><span class=linenos data-linenos="685 "></span></a>                <span class=n>f_emb</span> <span class=o>=</span> <span class=n>f_emb</span><span class=o>.</span><span class=n>unsqueeze</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
</span><span id=__span-0-686><a id=__codelineno-0-686 name=__codelineno-0-686></a><a href=#__codelineno-0-686><span class=linenos data-linenos="686 "></span></a>            <span class=n>p_emb</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_embedding_model</span><span class=o>.</span><span class=n>encode</span><span class=p>(</span><span class=n>prompt_context</span><span class=o>.</span><span class=n>text</span><span class=p>,</span> <span class=n>convert_to_tensor</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span><span id=__span-0-687><a id=__codelineno-0-687 name=__codelineno-0-687></a><a href=#__codelineno-0-687><span class=linenos data-linenos="687 "></span></a>            <span class=k>if</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>p_emb</span><span class=p>,</span> <span class=s2>&quot;unsqueeze&quot;</span><span class=p>):</span>
</span><span id=__span-0-688><a id=__codelineno-0-688 name=__codelineno-0-688></a><a href=#__codelineno-0-688><span class=linenos data-linenos="688 "></span></a>                <span class=n>p_emb</span> <span class=o>=</span> <span class=n>p_emb</span><span class=o>.</span><span class=n>unsqueeze</span><span class=p>(</span><span class=mi>0</span><span class=p>)</span>
</span><span id=__span-0-689><a id=__codelineno-0-689 name=__codelineno-0-689></a><a href=#__codelineno-0-689><span class=linenos data-linenos="689 "></span></a>            <span class=n>sim</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_cosine_similarity</span><span class=p>(</span><span class=n>f_emb</span><span class=p>,</span> <span class=n>p_emb</span><span class=p>)</span>
</span><span id=__span-0-690><a id=__codelineno-0-690 name=__codelineno-0-690></a><a href=#__codelineno-0-690><span class=linenos data-linenos="690 "></span></a>            <span class=c1># Handle numpy/tensor scalars with .item()</span>
</span><span id=__span-0-691><a id=__codelineno-0-691 name=__codelineno-0-691></a><a href=#__codelineno-0-691><span class=linenos data-linenos="691 "></span></a>            <span class=k>if</span> <span class=nb>hasattr</span><span class=p>(</span><span class=n>sim</span><span class=p>,</span> <span class=s2>&quot;item&quot;</span><span class=p>)</span> <span class=ow>and</span> <span class=nb>callable</span><span class=p>(</span><span class=n>sim</span><span class=o>.</span><span class=n>item</span><span class=p>):</span>
</span><span id=__span-0-692><a id=__codelineno-0-692 name=__codelineno-0-692></a><a href=#__codelineno-0-692><span class=linenos data-linenos="692 "></span></a>                <span class=n>sim</span> <span class=o>=</span> <span class=n>sim</span><span class=o>.</span><span class=n>item</span><span class=p>()</span>
</span><span id=__span-0-693><a id=__codelineno-0-693 name=__codelineno-0-693></a><a href=#__codelineno-0-693><span class=linenos data-linenos="693 "></span></a>            <span class=n>factors</span><span class=o>.</span><span class=n>semantic_similarity</span> <span class=o>=</span> <span class=nb>float</span><span class=p>(</span><span class=n>sim</span><span class=p>)</span> <span class=k>if</span> <span class=n>sim</span> <span class=ow>is</span> <span class=ow>not</span> <span class=kc>None</span> <span class=k>else</span> <span class=mf>0.0</span>
</span><span id=__span-0-694><a id=__codelineno-0-694 name=__codelineno-0-694></a><a href=#__codelineno-0-694><span class=linenos data-linenos="694 "></span></a>    <span class=k>except</span> <span class=ne>Exception</span><span class=p>:</span>
</span><span id=__span-0-695><a id=__codelineno-0-695 name=__codelineno-0-695></a><a href=#__codelineno-0-695><span class=linenos data-linenos="695 "></span></a>        <span class=c1># Be resilient if ML pieces aren&#39;t available</span>
</span><span id=__span-0-696><a id=__codelineno-0-696 name=__codelineno-0-696></a><a href=#__codelineno-0-696><span class=linenos data-linenos="696 "></span></a>        <span class=k>pass</span>
</span><span id=__span-0-697><a id=__codelineno-0-697 name=__codelineno-0-697></a><a href=#__codelineno-0-697><span class=linenos data-linenos="697 "></span></a>
</span><span id=__span-0-698><a id=__codelineno-0-698 name=__codelineno-0-698></a><a href=#__codelineno-0-698><span class=linenos data-linenos="698 "></span></a>    <span class=k>return</span> <span class=n>factors</span>
</span></code></pre></div></details></div></div><div class="doc doc-object doc-function"><h6 id=tenets.core.ranking.strategies.ThoroughRankingStrategy.get_weights class="doc doc-heading"><code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">get_weights</span><a href=#tenets.core.ranking.strategies.ThoroughRankingStrategy.get_weights class=headerlink title="Link to this section">&para;</a></h6><div class="language-python doc-signature highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=nf>get_weights</span><span class=p>()</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>float</span><span class=p>]</span>
</span></code></pre></div><div class="doc doc-contents "><p>Get weights for thorough ranking.</p><details class=mkdocstrings-source><summary>Source code in <code>tenets/core/ranking/strategies.py</code></summary><div class="language-python highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-0-700><a id=__codelineno-0-700 name=__codelineno-0-700></a><a href=#__codelineno-0-700><span class=linenos data-linenos="700 "></span></a><span class=k>def</span><span class=w> </span><span class=nf>get_weights</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>float</span><span class=p>]:</span>
</span><span id=__span-0-701><a id=__codelineno-0-701 name=__codelineno-0-701></a><a href=#__codelineno-0-701><span class=linenos data-linenos="701 "></span></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Get weights for thorough ranking.&quot;&quot;&quot;</span>
</span><span id=__span-0-702><a id=__codelineno-0-702 name=__codelineno-0-702></a><a href=#__codelineno-0-702><span class=linenos data-linenos="702 "></span></a>    <span class=k>return</span> <span class=p>{</span>
</span><span id=__span-0-703><a id=__codelineno-0-703 name=__codelineno-0-703></a><a href=#__codelineno-0-703><span class=linenos data-linenos="703 "></span></a>        <span class=s2>&quot;keyword_match&quot;</span><span class=p>:</span> <span class=mf>0.15</span><span class=p>,</span>
</span><span id=__span-0-704><a id=__codelineno-0-704 name=__codelineno-0-704></a><a href=#__codelineno-0-704><span class=linenos data-linenos="704 "></span></a>        <span class=s2>&quot;tfidf_similarity&quot;</span><span class=p>:</span> <span class=mf>0.15</span><span class=p>,</span>
</span><span id=__span-0-705><a id=__codelineno-0-705 name=__codelineno-0-705></a><a href=#__codelineno-0-705><span class=linenos data-linenos="705 "></span></a>        <span class=s2>&quot;bm25_score&quot;</span><span class=p>:</span> <span class=mf>0.10</span><span class=p>,</span>
</span><span id=__span-0-706><a id=__codelineno-0-706 name=__codelineno-0-706></a><a href=#__codelineno-0-706><span class=linenos data-linenos="706 "></span></a>        <span class=s2>&quot;path_relevance&quot;</span><span class=p>:</span> <span class=mf>0.10</span><span class=p>,</span>
</span><span id=__span-0-707><a id=__codelineno-0-707 name=__codelineno-0-707></a><a href=#__codelineno-0-707><span class=linenos data-linenos="707 "></span></a>        <span class=s2>&quot;import_centrality&quot;</span><span class=p>:</span> <span class=mf>0.10</span><span class=p>,</span>
</span><span id=__span-0-708><a id=__codelineno-0-708 name=__codelineno-0-708></a><a href=#__codelineno-0-708><span class=linenos data-linenos="708 "></span></a>        <span class=s2>&quot;git_recency&quot;</span><span class=p>:</span> <span class=mf>0.05</span><span class=p>,</span>
</span><span id=__span-0-709><a id=__codelineno-0-709 name=__codelineno-0-709></a><a href=#__codelineno-0-709><span class=linenos data-linenos="709 "></span></a>        <span class=s2>&quot;git_frequency&quot;</span><span class=p>:</span> <span class=mf>0.05</span><span class=p>,</span>
</span><span id=__span-0-710><a id=__codelineno-0-710 name=__codelineno-0-710></a><a href=#__codelineno-0-710><span class=linenos data-linenos="710 "></span></a>        <span class=s2>&quot;complexity_relevance&quot;</span><span class=p>:</span> <span class=mf>0.05</span><span class=p>,</span>
</span><span id=__span-0-711><a id=__codelineno-0-711 name=__codelineno-0-711></a><a href=#__codelineno-0-711><span class=linenos data-linenos="711 "></span></a>        <span class=s2>&quot;type_relevance&quot;</span><span class=p>:</span> <span class=mf>0.05</span><span class=p>,</span>
</span><span id=__span-0-712><a id=__codelineno-0-712 name=__codelineno-0-712></a><a href=#__codelineno-0-712><span class=linenos data-linenos="712 "></span></a>        <span class=s2>&quot;code_patterns&quot;</span><span class=p>:</span> <span class=mf>0.10</span><span class=p>,</span>
</span><span id=__span-0-713><a id=__codelineno-0-713 name=__codelineno-0-713></a><a href=#__codelineno-0-713><span class=linenos data-linenos="713 "></span></a>        <span class=s2>&quot;ast_relevance&quot;</span><span class=p>:</span> <span class=mf>0.05</span><span class=p>,</span>
</span><span id=__span-0-714><a id=__codelineno-0-714 name=__codelineno-0-714></a><a href=#__codelineno-0-714><span class=linenos data-linenos="714 "></span></a>        <span class=s2>&quot;documentation_score&quot;</span><span class=p>:</span> <span class=mf>0.03</span><span class=p>,</span>
</span><span id=__span-0-715><a id=__codelineno-0-715 name=__codelineno-0-715></a><a href=#__codelineno-0-715><span class=linenos data-linenos="715 "></span></a>        <span class=s2>&quot;git_author_relevance&quot;</span><span class=p>:</span> <span class=mf>0.02</span><span class=p>,</span>
</span><span id=__span-0-716><a id=__codelineno-0-716 name=__codelineno-0-716></a><a href=#__codelineno-0-716><span class=linenos data-linenos="716 "></span></a>    <span class=p>}</span>
</span></code></pre></div></details></div></div></div></div></div><div class="doc doc-object doc-class"><h4 id=tenets.core.ranking.strategies.MLRankingStrategy class="doc doc-heading"><code class="doc-symbol doc-symbol-heading doc-symbol-class"></code> <span class="doc doc-object-name doc-class-name">MLRankingStrategy</span><a href=#tenets.core.ranking.strategies.MLRankingStrategy class=headerlink title="Link to this section">&para;</a></h4><div class="language-python doc-signature highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=nf>MLRankingStrategy</span><span class=p>()</span>
</span></code></pre></div><div class="doc doc-contents "><p class="doc doc-class-bases"> Bases: <code><a class="autorefs autorefs-internal" title='<code class="doc-symbol doc-symbol-heading doc-symbol-class"></code>            <span class="doc doc-object-name doc-class-name">RankingStrategy</span> (<code>tenets.core.ranking.strategies.RankingStrategy</code>)' href=#tenets.core.ranking.strategies.RankingStrategy>RankingStrategy</a></code></p><p>Machine Learning-based ranking strategy.</p><p>Initialize ML ranking strategy.</p><details class=mkdocstrings-source><summary>Source code in <code>tenets/core/ranking/strategies.py</code></summary><div class="language-python highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-0-897><a id=__codelineno-0-897 name=__codelineno-0-897></a><a href=#__codelineno-0-897><span class=linenos data-linenos="897 "></span></a><span class=k>def</span><span class=w> </span><span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span><span id=__span-0-898><a id=__codelineno-0-898 name=__codelineno-0-898></a><a href=#__codelineno-0-898><span class=linenos data-linenos="898 "></span></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Initialize ML ranking strategy.&quot;&quot;&quot;</span>
</span><span id=__span-0-899><a id=__codelineno-0-899 name=__codelineno-0-899></a><a href=#__codelineno-0-899><span class=linenos data-linenos="899 "></span></a>    <span class=kn>from</span><span class=w> </span><span class=nn>collections</span><span class=w> </span><span class=kn>import</span> <span class=n>OrderedDict</span>
</span><span id=__span-0-900><a id=__codelineno-0-900 name=__codelineno-0-900></a><a href=#__codelineno-0-900><span class=linenos data-linenos="900 "></span></a>
</span><span id=__span-0-901><a id=__codelineno-0-901 name=__codelineno-0-901></a><a href=#__codelineno-0-901><span class=linenos data-linenos="901 "></span></a>    <span class=kn>from</span><span class=w> </span><span class=nn>tenets.utils.logger</span><span class=w> </span><span class=kn>import</span> <span class=n>get_logger</span>
</span><span id=__span-0-902><a id=__codelineno-0-902 name=__codelineno-0-902></a><a href=#__codelineno-0-902><span class=linenos data-linenos="902 "></span></a>
</span><span id=__span-0-903><a id=__codelineno-0-903 name=__codelineno-0-903></a><a href=#__codelineno-0-903><span class=linenos data-linenos="903 "></span></a>    <span class=bp>self</span><span class=o>.</span><span class=n>logger</span> <span class=o>=</span> <span class=n>get_logger</span><span class=p>(</span><span class=vm>__name__</span><span class=p>)</span>
</span><span id=__span-0-904><a id=__codelineno-0-904 name=__codelineno-0-904></a><a href=#__codelineno-0-904><span class=linenos data-linenos="904 "></span></a>    <span class=bp>self</span><span class=o>.</span><span class=n>_model</span> <span class=o>=</span> <span class=kc>None</span>
</span><span id=__span-0-905><a id=__codelineno-0-905 name=__codelineno-0-905></a><a href=#__codelineno-0-905><span class=linenos data-linenos="905 "></span></a>    <span class=c1># Use OrderedDict with size limit for embeddings cache</span>
</span><span id=__span-0-906><a id=__codelineno-0-906 name=__codelineno-0-906></a><a href=#__codelineno-0-906><span class=linenos data-linenos="906 "></span></a>    <span class=bp>self</span><span class=o>.</span><span class=n>_embeddings_cache</span> <span class=o>=</span> <span class=n>OrderedDict</span><span class=p>()</span>
</span><span id=__span-0-907><a id=__codelineno-0-907 name=__codelineno-0-907></a><a href=#__codelineno-0-907><span class=linenos data-linenos="907 "></span></a>    <span class=bp>self</span><span class=o>.</span><span class=n>_cache_max_size</span> <span class=o>=</span> <span class=mi>1000</span>  <span class=c1># Limit cache size to prevent unbounded growth</span>
</span><span id=__span-0-908><a id=__codelineno-0-908 name=__codelineno-0-908></a><a href=#__codelineno-0-908><span class=linenos data-linenos="908 "></span></a>    <span class=bp>self</span><span class=o>.</span><span class=n>_model_loaded</span> <span class=o>=</span> <span class=kc>False</span>
</span><span id=__span-0-909><a id=__codelineno-0-909 name=__codelineno-0-909></a><a href=#__codelineno-0-909><span class=linenos data-linenos="909 "></span></a>    <span class=bp>self</span><span class=o>.</span><span class=n>_reranker</span> <span class=o>=</span> <span class=kc>None</span>  <span class=c1># Neural reranker for cross-encoder</span>
</span><span id=__span-0-910><a id=__codelineno-0-910 name=__codelineno-0-910></a><a href=#__codelineno-0-910><span class=linenos data-linenos="910 "></span></a>    <span class=bp>self</span><span class=o>.</span><span class=n>_reranker_loaded</span> <span class=o>=</span> <span class=kc>False</span>
</span></code></pre></div></details><div class="doc doc-children"><h5 id=tenets.core.ranking.strategies.MLRankingStrategy-functions>Functions<a href=#tenets.core.ranking.strategies.MLRankingStrategy-functions class=headerlink title="Link to this section">&para;</a></h5><div class="doc doc-object doc-function"><h6 id=tenets.core.ranking.strategies.MLRankingStrategy.rank_file class="doc doc-heading"><code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">rank_file</span><a href=#tenets.core.ranking.strategies.MLRankingStrategy.rank_file class=headerlink title="Link to this section">&para;</a></h6><div class="language-python doc-signature highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=nf>rank_file</span><span class=p>(</span><span class=n>file</span><span class=p>:</span> <span class=n>FileAnalysis</span><span class=p>,</span> <span class=n>prompt_context</span><span class=p>:</span> <span class=n>PromptContext</span><span class=p>,</span> <span class=n>corpus_stats</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>])</span> <span class=o>-&gt;</span> <span class=n>RankingFactors</span>
</span></code></pre></div><div class="doc doc-contents "><p>ML-based ranking with semantic similarity.</p><details class=mkdocstrings-source><summary>Source code in <code>tenets/core/ranking/strategies.py</code></summary><div class="language-python highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-0-935><a id=__codelineno-0-935 name=__codelineno-0-935></a><a href=#__codelineno-0-935><span class=linenos data-linenos="935 "></span></a><span class=k>def</span><span class=w> </span><span class=nf>rank_file</span><span class=p>(</span>
</span><span id=__span-0-936><a id=__codelineno-0-936 name=__codelineno-0-936></a><a href=#__codelineno-0-936><span class=linenos data-linenos="936 "></span></a>    <span class=bp>self</span><span class=p>,</span> <span class=n>file</span><span class=p>:</span> <span class=n>FileAnalysis</span><span class=p>,</span> <span class=n>prompt_context</span><span class=p>:</span> <span class=n>PromptContext</span><span class=p>,</span> <span class=n>corpus_stats</span><span class=p>:</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=n>Any</span><span class=p>]</span>
</span><span id=__span-0-937><a id=__codelineno-0-937 name=__codelineno-0-937></a><a href=#__codelineno-0-937><span class=linenos data-linenos="937 "></span></a><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>RankingFactors</span><span class=p>:</span>
</span><span id=__span-0-938><a id=__codelineno-0-938 name=__codelineno-0-938></a><a href=#__codelineno-0-938><span class=linenos data-linenos="938 "></span></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;ML-based ranking with semantic similarity.&quot;&quot;&quot;</span>
</span><span id=__span-0-939><a id=__codelineno-0-939 name=__codelineno-0-939></a><a href=#__codelineno-0-939><span class=linenos data-linenos="939 "></span></a>    <span class=c1># Load model lazily on first use</span>
</span><span id=__span-0-940><a id=__codelineno-0-940 name=__codelineno-0-940></a><a href=#__codelineno-0-940><span class=linenos data-linenos="940 "></span></a>    <span class=k>if</span> <span class=ow>not</span> <span class=bp>self</span><span class=o>.</span><span class=n>_model_loaded</span><span class=p>:</span>
</span><span id=__span-0-941><a id=__codelineno-0-941 name=__codelineno-0-941></a><a href=#__codelineno-0-941><span class=linenos data-linenos="941 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_load_model</span><span class=p>()</span>
</span><span id=__span-0-942><a id=__codelineno-0-942 name=__codelineno-0-942></a><a href=#__codelineno-0-942><span class=linenos data-linenos="942 "></span></a>        <span class=bp>self</span><span class=o>.</span><span class=n>_model_loaded</span> <span class=o>=</span> <span class=kc>True</span>
</span><span id=__span-0-943><a id=__codelineno-0-943 name=__codelineno-0-943></a><a href=#__codelineno-0-943><span class=linenos data-linenos="943 "></span></a>
</span><span id=__span-0-944><a id=__codelineno-0-944 name=__codelineno-0-944></a><a href=#__codelineno-0-944><span class=linenos data-linenos="944 "></span></a>    <span class=c1># Start with thorough ranking</span>
</span><span id=__span-0-945><a id=__codelineno-0-945 name=__codelineno-0-945></a><a href=#__codelineno-0-945><span class=linenos data-linenos="945 "></span></a>    <span class=n>thorough</span> <span class=o>=</span> <span class=n>ThoroughRankingStrategy</span><span class=p>()</span>
</span><span id=__span-0-946><a id=__codelineno-0-946 name=__codelineno-0-946></a><a href=#__codelineno-0-946><span class=linenos data-linenos="946 "></span></a>    <span class=n>factors</span> <span class=o>=</span> <span class=n>thorough</span><span class=o>.</span><span class=n>rank_file</span><span class=p>(</span><span class=n>file</span><span class=p>,</span> <span class=n>prompt_context</span><span class=p>,</span> <span class=n>corpus_stats</span><span class=p>)</span>
</span><span id=__span-0-947><a id=__codelineno-0-947 name=__codelineno-0-947></a><a href=#__codelineno-0-947><span class=linenos data-linenos="947 "></span></a>
</span><span id=__span-0-948><a id=__codelineno-0-948 name=__codelineno-0-948></a><a href=#__codelineno-0-948><span class=linenos data-linenos="948 "></span></a>    <span class=c1># Add semantic similarity if model is available</span>
</span><span id=__span-0-949><a id=__codelineno-0-949 name=__codelineno-0-949></a><a href=#__codelineno-0-949><span class=linenos data-linenos="949 "></span></a>    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_model</span> <span class=ow>and</span> <span class=n>file</span><span class=o>.</span><span class=n>content</span><span class=p>:</span>
</span><span id=__span-0-950><a id=__codelineno-0-950 name=__codelineno-0-950></a><a href=#__codelineno-0-950><span class=linenos data-linenos="950 "></span></a>        <span class=n>factors</span><span class=o>.</span><span class=n>semantic_similarity</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>_calculate_semantic_similarity</span><span class=p>(</span>
</span><span id=__span-0-951><a id=__codelineno-0-951 name=__codelineno-0-951></a><a href=#__codelineno-0-951><span class=linenos data-linenos="951 "></span></a>            <span class=n>file</span><span class=o>.</span><span class=n>content</span><span class=p>,</span> <span class=n>prompt_context</span><span class=o>.</span><span class=n>text</span>
</span><span id=__span-0-952><a id=__codelineno-0-952 name=__codelineno-0-952></a><a href=#__codelineno-0-952><span class=linenos data-linenos="952 "></span></a>        <span class=p>)</span>
</span><span id=__span-0-953><a id=__codelineno-0-953 name=__codelineno-0-953></a><a href=#__codelineno-0-953><span class=linenos data-linenos="953 "></span></a>
</span><span id=__span-0-954><a id=__codelineno-0-954 name=__codelineno-0-954></a><a href=#__codelineno-0-954><span class=linenos data-linenos="954 "></span></a>        <span class=c1># Boost other factors based on semantic similarity</span>
</span><span id=__span-0-955><a id=__codelineno-0-955 name=__codelineno-0-955></a><a href=#__codelineno-0-955><span class=linenos data-linenos="955 "></span></a>        <span class=k>if</span> <span class=n>factors</span><span class=o>.</span><span class=n>semantic_similarity</span> <span class=o>&gt;</span> <span class=mf>0.7</span><span class=p>:</span>
</span><span id=__span-0-956><a id=__codelineno-0-956 name=__codelineno-0-956></a><a href=#__codelineno-0-956><span class=linenos data-linenos="956 "></span></a>            <span class=n>factors</span><span class=o>.</span><span class=n>keyword_match</span> <span class=o>*=</span> <span class=mf>1.2</span>
</span><span id=__span-0-957><a id=__codelineno-0-957 name=__codelineno-0-957></a><a href=#__codelineno-0-957><span class=linenos data-linenos="957 "></span></a>            <span class=n>factors</span><span class=o>.</span><span class=n>path_relevance</span> <span class=o>*=</span> <span class=mf>1.1</span>
</span><span id=__span-0-958><a id=__codelineno-0-958 name=__codelineno-0-958></a><a href=#__codelineno-0-958><span class=linenos data-linenos="958 "></span></a>
</span><span id=__span-0-959><a id=__codelineno-0-959 name=__codelineno-0-959></a><a href=#__codelineno-0-959><span class=linenos data-linenos="959 "></span></a>    <span class=k>return</span> <span class=n>factors</span>
</span></code></pre></div></details></div></div><div class="doc doc-object doc-function"><h6 id=tenets.core.ranking.strategies.MLRankingStrategy.get_weights class="doc doc-heading"><code class="doc-symbol doc-symbol-heading doc-symbol-method"></code> <span class="doc doc-object-name doc-function-name">get_weights</span><a href=#tenets.core.ranking.strategies.MLRankingStrategy.get_weights class=headerlink title="Link to this section">&para;</a></h6><div class="language-python doc-signature highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=nf>get_weights</span><span class=p>()</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>float</span><span class=p>]</span>
</span></code></pre></div><div class="doc doc-contents "><p>Get weights for ML ranking.</p><details class=mkdocstrings-source><summary>Source code in <code>tenets/core/ranking/strategies.py</code></summary><div class="language-python highlight"><span class=filename>Python</span><pre><span></span><code><span id=__span-0-961><a id=__codelineno-0-961 name=__codelineno-0-961></a><a href=#__codelineno-0-961><span class=linenos data-linenos="961 "></span></a><span class=k>def</span><span class=w> </span><span class=nf>get_weights</span><span class=p>(</span><span class=bp>self</span><span class=p>)</span> <span class=o>-&gt;</span> <span class=n>Dict</span><span class=p>[</span><span class=nb>str</span><span class=p>,</span> <span class=nb>float</span><span class=p>]:</span>
</span><span id=__span-0-962><a id=__codelineno-0-962 name=__codelineno-0-962></a><a href=#__codelineno-0-962><span class=linenos data-linenos="962 "></span></a><span class=w>    </span><span class=sd>&quot;&quot;&quot;Get weights for ML ranking.&quot;&quot;&quot;</span>
</span><span id=__span-0-963><a id=__codelineno-0-963 name=__codelineno-0-963></a><a href=#__codelineno-0-963><span class=linenos data-linenos="963 "></span></a>    <span class=k>if</span> <span class=bp>self</span><span class=o>.</span><span class=n>_model</span><span class=p>:</span>
</span><span id=__span-0-964><a id=__codelineno-0-964 name=__codelineno-0-964></a><a href=#__codelineno-0-964><span class=linenos data-linenos="964 "></span></a>        <span class=k>return</span> <span class=p>{</span>
</span><span id=__span-0-965><a id=__codelineno-0-965 name=__codelineno-0-965></a><a href=#__codelineno-0-965><span class=linenos data-linenos="965 "></span></a>            <span class=s2>&quot;semantic_similarity&quot;</span><span class=p>:</span> <span class=mf>0.35</span><span class=p>,</span>
</span><span id=__span-0-966><a id=__codelineno-0-966 name=__codelineno-0-966></a><a href=#__codelineno-0-966><span class=linenos data-linenos="966 "></span></a>            <span class=s2>&quot;keyword_match&quot;</span><span class=p>:</span> <span class=mf>0.10</span><span class=p>,</span>
</span><span id=__span-0-967><a id=__codelineno-0-967 name=__codelineno-0-967></a><a href=#__codelineno-0-967><span class=linenos data-linenos="967 "></span></a>            <span class=s2>&quot;tfidf_similarity&quot;</span><span class=p>:</span> <span class=mf>0.10</span><span class=p>,</span>
</span><span id=__span-0-968><a id=__codelineno-0-968 name=__codelineno-0-968></a><a href=#__codelineno-0-968><span class=linenos data-linenos="968 "></span></a>            <span class=s2>&quot;bm25_score&quot;</span><span class=p>:</span> <span class=mf>0.10</span><span class=p>,</span>
</span><span id=__span-0-969><a id=__codelineno-0-969 name=__codelineno-0-969></a><a href=#__codelineno-0-969><span class=linenos data-linenos="969 "></span></a>            <span class=s2>&quot;path_relevance&quot;</span><span class=p>:</span> <span class=mf>0.10</span><span class=p>,</span>
</span><span id=__span-0-970><a id=__codelineno-0-970 name=__codelineno-0-970></a><a href=#__codelineno-0-970><span class=linenos data-linenos="970 "></span></a>            <span class=s2>&quot;import_centrality&quot;</span><span class=p>:</span> <span class=mf>0.05</span><span class=p>,</span>
</span><span id=__span-0-971><a id=__codelineno-0-971 name=__codelineno-0-971></a><a href=#__codelineno-0-971><span class=linenos data-linenos="971 "></span></a>            <span class=s2>&quot;code_patterns&quot;</span><span class=p>:</span> <span class=mf>0.10</span><span class=p>,</span>
</span><span id=__span-0-972><a id=__codelineno-0-972 name=__codelineno-0-972></a><a href=#__codelineno-0-972><span class=linenos data-linenos="972 "></span></a>            <span class=s2>&quot;ast_relevance&quot;</span><span class=p>:</span> <span class=mf>0.05</span><span class=p>,</span>
</span><span id=__span-0-973><a id=__codelineno-0-973 name=__codelineno-0-973></a><a href=#__codelineno-0-973><span class=linenos data-linenos="973 "></span></a>            <span class=s2>&quot;git_recency&quot;</span><span class=p>:</span> <span class=mf>0.025</span><span class=p>,</span>
</span><span id=__span-0-974><a id=__codelineno-0-974 name=__codelineno-0-974></a><a href=#__codelineno-0-974><span class=linenos data-linenos="974 "></span></a>            <span class=s2>&quot;git_frequency&quot;</span><span class=p>:</span> <span class=mf>0.025</span><span class=p>,</span>
</span><span id=__span-0-975><a id=__codelineno-0-975 name=__codelineno-0-975></a><a href=#__codelineno-0-975><span class=linenos data-linenos="975 "></span></a>        <span class=p>}</span>
</span><span id=__span-0-976><a id=__codelineno-0-976 name=__codelineno-0-976></a><a href=#__codelineno-0-976><span class=linenos data-linenos="976 "></span></a>    <span class=k>else</span><span class=p>:</span>
</span><span id=__span-0-977><a id=__codelineno-0-977 name=__codelineno-0-977></a><a href=#__codelineno-0-977><span class=linenos data-linenos="977 "></span></a>        <span class=c1># Fallback to thorough weights if ML not available</span>
</span><span id=__span-0-978><a id=__codelineno-0-978 name=__codelineno-0-978></a><a href=#__codelineno-0-978><span class=linenos data-linenos="978 "></span></a>        <span class=k>return</span> <span class=n>ThoroughRankingStrategy</span><span class=p>()</span><span class=o>.</span><span class=n>get_weights</span><span class=p>()</span>
</span></code></pre></div></details></div></div></div></div></div><h3 id=tenets.core.ranking.strategies-functions>Functions<a href=#tenets.core.ranking.strategies-functions class=headerlink title="Link to this section">&para;</a></h3></div></div></div><aside class=md-source-file><span class=md-source-file__fact><span class=md-icon title="Last update"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago" title="December 13, 2025 10:18:59 UTC"><span class=timeago datetime=2025-12-13T10:18:59+00:00 locale=en></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date" title="December 13, 2025 10:18:59 UTC">2025-12-13</span></span><span class=md-source-file__fact><span class=md-icon title=Created><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago" title="December 13, 2025 10:18:59 UTC"><span class=timeago datetime=2025-12-13T10:18:59+00:00 locale=en></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date" title="December 13, 2025 10:18:59 UTC">2025-12-13</span></span></aside><form class=md-feedback name=feedback hidden><fieldset><legend class=md-feedback__title> Was this page helpful? </legend><div class=md-feedback__inner><div class=md-feedback__list><button class="md-feedback__icon md-icon" type=submit title="This page was helpful" data-md-value=1><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m7 0c0 .8-.7 1.5-1.5 1.5S14 10.3 14 9.5 14.7 8 15.5 8s1.5.7 1.5 1.5m-5 7.73c-1.75 0-3.29-.73-4.19-1.81L9.23 14c.45.72 1.52 1.23 2.77 1.23s2.32-.51 2.77-1.23l1.42 1.42c-.9 1.08-2.44 1.81-4.19 1.81"/></svg></button><button class="md-feedback__icon md-icon" type=submit title="This page could be improved" data-md-value=0><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 12a8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8 8 8 0 0 0 8-8m2 0a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10m-6.5-4c.8 0 1.5.7 1.5 1.5s-.7 1.5-1.5 1.5-1.5-.7-1.5-1.5.7-1.5 1.5-1.5M10 9.5c0 .8-.7 1.5-1.5 1.5S7 10.3 7 9.5 7.7 8 8.5 8s1.5.7 1.5 1.5m2 4.5c1.75 0 3.29.72 4.19 1.81l-1.42 1.42C14.32 16.5 13.25 16 12 16s-2.32.5-2.77 1.23l-1.42-1.42C8.71 14.72 10.25 14 12 14"/></svg></button></div><div class=md-feedback__note><div data-md-value=1 hidden> Thanks for your feedback! </div><div data-md-value=0 hidden> Thanks for your feedback! </div></div></div></fieldset></form></article></div><script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script><script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script></div><button type=button class="md-top md-icon" data-md-component=top hidden><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button></main><div id=consent-banner class=consent-banner style=display:none><div class=consent-content><div class=consent-text><strong>Cookie Notice</strong><p>We use cookies to analyze site usage and improve your experience. Your data stays anonymous and is never sold. <a href=../../../../../privacy/ style=color:#FFD600>Privacy Policy</a></p></div><div class=consent-actions><button onclick=acceptCookies() class="consent-btn consent-accept">Accept All</button><button onclick=acceptEssential() class="consent-btn consent-essential">Essential Only</button><button onclick=rejectCookies() class="consent-btn consent-reject">Reject All</button></div></div></div><style>
  .consent-banner {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background: rgba(20, 20, 20, 0.98);
    color: #fff;
    padding: 1rem 1.5rem;
    z-index: 9999;
    font-size: 14px;
    line-height: 1.5;
    box-shadow: 0 -4px 20px rgba(0,0,0,0.3);
    backdrop-filter: blur(10px);
  }
  .consent-content {
    max-width: 1200px;
    margin: 0 auto;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 1.5rem;
    flex-wrap: wrap;
  }
  .consent-text {
    flex: 1;
    min-width: 280px;
  }
  .consent-text strong {
    display: block;
    margin-bottom: 0.25rem;
    color: #FFD600;
  }
  .consent-text p {
    margin: 0;
    opacity: 0.9;
  }
  .consent-actions {
    display: flex;
    gap: 0.5rem;
    flex-wrap: wrap;
  }
  .consent-btn {
    padding: 0.5rem 1rem;
    border: none;
    cursor: pointer;
    font-weight: 500;
    border-radius: 4px;
    transition: all 0.2s;
  }
  .consent-accept {
    background: #FFD600;
    color: #000;
  }
  .consent-accept:hover {
    background: #ffdf33;
  }
  .consent-essential {
    background: transparent;
    color: #fff;
    border: 1px solid #666;
  }
  .consent-essential:hover {
    border-color: #999;
  }
  .consent-reject {
    background: transparent;
    color: #999;
    border: 1px solid #444;
  }
  .consent-reject:hover {
    color: #fff;
    border-color: #666;
  }
  @media (max-width: 600px) {
    .consent-content {
      flex-direction: column;
      text-align: center;
    }
    .consent-actions {
      justify-content: center;
    }
  }
</style><script>
(function() {
  // Default consent state (denied until user consents)
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  
  // Set default consent to denied
  gtag('consent', 'default', {
    'analytics_storage': 'denied',
    'ad_storage': 'denied',
    'wait_for_update': 500
  });
  
  // Check consent state on load
  var consent = localStorage.getItem('cookieConsent');
  
  if (!consent) {
    // Show banner if no choice made
    document.addEventListener('DOMContentLoaded', function() {
      document.getElementById('consent-banner').style.display = 'block';
    });
  } else if (consent === 'accepted') {
    // User previously accepted all
    gtag('consent', 'update', {
      'analytics_storage': 'granted'
    });
  } else if (consent === 'essential') {
    // Essential only - analytics denied
    gtag('consent', 'update', {
      'analytics_storage': 'denied'
    });
  }
  // 'rejected' keeps default denied state
  
  // Handle rejected state for GA
  if (consent === 'rejected') {
    
  }
})();

function acceptCookies() {
  localStorage.setItem('cookieConsent', 'accepted');
  localStorage.setItem('cookieConsentTime', new Date().toISOString());
  document.getElementById('consent-banner').style.display = 'none';
  
  // Enable analytics
  if (typeof gtag !== 'undefined') {
    gtag('consent', 'update', {
      'analytics_storage': 'granted'
    });
  }
  
  // Track consent event
  if (typeof gtag !== 'undefined') {
    gtag('event', 'cookie_consent', {
      'consent_type': 'all'
    });
  }
}

function acceptEssential() {
  localStorage.setItem('cookieConsent', 'essential');
  localStorage.setItem('cookieConsentTime', new Date().toISOString());
  document.getElementById('consent-banner').style.display = 'none';
  
  // Keep analytics denied
  if (typeof gtag !== 'undefined') {
    gtag('consent', 'update', {
      'analytics_storage': 'denied'
    });
  }
  
  // Stop Clarity
  if (typeof clarity !== 'undefined') {
    clarity('stop');
  }
}

function rejectCookies() {
  localStorage.setItem('cookieConsent', 'rejected');
  localStorage.setItem('cookieConsentTime', new Date().toISOString());
  document.getElementById('consent-banner').style.display = 'none';
  
  // Disable all analytics
  if (typeof gtag !== 'undefined') {
    gtag('consent', 'update', {
      'analytics_storage': 'denied'
    });
  }
  
  // Stop Clarity
  if (typeof clarity !== 'undefined') {
    clarity('stop');
  }
  
  // Delete existing cookies
  deleteCookies(['_ga', '_gid', '_gat', '_clck', '_clsk']);
}

function deleteCookies(names) {
  names.forEach(function(name) {
    document.cookie = name + '=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;';
    document.cookie = name + '=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/; domain=.' + window.location.hostname;
  });
}
</script><footer class="md-footer victorian-footer"><div class=footer-content><div class=footer-grid><div class=footer-brand><div class=footer-logo-container><img src=../../../../../logos/tenets_dark_icon_transparent.png alt=Tenets class="footer-logo dark-logo" loading=lazy><img src=../../../../../logos/tenets_light_icon_transparent.png alt=Tenets class="footer-logo light-logo" loading=lazy><div class=footer-brand-text><h4>tenets</h4><div class=footer-tagline>Context that feeds your prompts</div></div></div><p class=footer-description> MCP server for context that feeds your prompts. </p><div class=social-links><a href=https://github.com/jddunn/tenets class=social-link title=GitHub target=_blank rel=noopener><svg viewbox="0 0 24 24" width=18 height=18><path fill=currentColor d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg></a><a href=https://discord.gg/DzNgXdYm class=social-link title=Discord target=_blank rel=noopener><svg viewbox="0 0 24 24" width=18 height=18><path fill=currentColor d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515a.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0a12.64 12.64 0 0 0-.617-1.25a.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057a19.9 19.9 0 0 0 5.993 3.03a.078.078 0 0 0 .084-.028a14.09 14.09 0 0 0 1.226-1.994a.076.076 0 0 0-.041-.106a13.107 13.107 0 0 1-1.872-.892a.077.077 0 0 1-.008-.128a10.2 10.2 0 0 0 .372-.292a.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127a12.299 12.299 0 0 1-1.873.892a.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028a19.839 19.839 0 0 0 6.002-3.03a.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.956-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.955-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.946 2.418-2.157 2.418z"/></svg></a><a href=https://twitter.com/manicagency class=social-link title=Twitter target=_blank rel=noopener><svg viewbox="0 0 24 24" width=18 height=18><path fill=currentColor d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/></svg></a></div></div><div class=footer-column><h5>Documentation</h5><ul><li><a href=quickstart/ >Quick Start</a></li><li><a href=tutorial/ >Tutorial</a></li><li><a href=MCP/ >MCP Server</a></li><li><a href=CLI/ >CLI Reference</a></li><li><a href=faq/ >FAQ</a></li></ul></div><div class=footer-column><h5>Resources</h5><ul><li><a href=https://github.com/jddunn/tenets target=_blank rel=noopener>GitHub</a></li><li><a href=https://pypi.org/project/tenets/ target=_blank rel=noopener>PyPI</a></li><li><a href=blog/ >Blog</a></li><li><a href=about/ >About</a></li></ul></div><div class=footer-column><h5>Development sponsored by manic.agency</h5><ul><li><a href=https://manic.agency target=_blank rel=noopener>Website</a></li><li><a href=https://manic.agency/blog target=_blank rel=noopener>Blog</a></li><li><a href=https://manic.agency/about target=_blank rel=noopener>About</a></li><li><a href=mailto:team@manic.agency>Contact</a></li></ul></div><div class=footer-column><h5>Project Status</h5><div class=badge-showcase><div class=badge-item><img src=https://img.shields.io/pypi/v/tenets.svg alt="PyPI version"></div><div class=badge-item><img src=https://github.com/jddunn/tenets/actions/workflows/ci.yml/badge.svg alt=CI></div><div class=badge-item><img src=https://codecov.io/gh/jddunn/tenets/graph/badge.svg alt=Coverage></div><div class=badge-item><img src=https://img.shields.io/github/license/jddunn/tenets.svg alt=License></div></div></div></div></div><div class=footer-bottom><div class=footer-bottom-content><div class=footer-copyright> © 2024-2025 <a href=https://jddunn.github.io target=_blank rel=noopener>Johnny Dunn</a> | MIT License </div><div class=footer-links><a href=../../../../../privacy/ >Privacy Policy</a><a href=../../../../../terms/ >Terms of Service</a><a href=https://github.com/jddunn/tenets/blob/main/LICENSE target=_blank rel=noopener>License</a><a href=https://github.com/jddunn/tenets/blob/main/CONTRIBUTING.md target=_blank rel=noopener>Contributing</a><a href=https://github.com/jddunn/tenets/security target=_blank rel=noopener>Security</a></div></div></div></footer><footer class=md-footer><nav class="md-footer__inner md-grid" aria-label=Footer><a href=../ranker/ class="md-footer__link md-footer__link--prev" aria-label="Previous: ranker"><div class="md-footer__button md-icon"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg></div><div class=md-footer__title><span class=md-footer__direction> Previous </span><div class=md-ellipsis> ranker </div></div></a><a href=../ class="md-footer__link md-footer__link--next" aria-label="Next: index"><div class=md-footer__title><span class=md-footer__direction> Next </span><div class=md-ellipsis> index </div></div><div class="md-footer__button md-icon"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg></div></a></nav><div class="md-footer-meta md-typeset"><div class="md-footer-meta__inner md-grid"><div class=md-copyright><div class=md-copyright__highlight> Copyright &copy; 2024-2025 <a href=https://manic.agency target=_blank rel=noopener>manic.agency</a> · Built by <a href=https://jddunn.github.io target=_blank rel=noopener>Johnny Dunn</a></div></div><div class=md-social><a href=https://github.com/jddunn/tenets target=_blank rel=noopener title="Tenets on GitHub" class=md-social__link><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg></a><a href=https://discord.gg/DzNgXdYm target=_blank rel=noopener title="Join our Discord" class=md-social__link><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 576 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M492.5 69.8c-.2-.3-.4-.6-.8-.7-38.1-17.5-78.4-30-119.7-37.1-.4-.1-.8 0-1.1.1s-.6.4-.8.8c-5.5 9.9-10.5 20.2-14.9 30.6-44.6-6.8-89.9-6.8-134.4 0-4.5-10.5-9.5-20.7-15.1-30.6-.2-.3-.5-.6-.8-.8s-.7-.2-1.1-.2C162.5 39 122.2 51.5 84.1 69c-.3.1-.6.4-.8.7C7.1 183.5-13.8 294.6-3.6 404.2c0 .3.1.5.2.8s.3.4.5.6c44.4 32.9 94 58 146.8 74.2.4.1.8.1 1.1 0s.7-.4.9-.7c11.3-15.4 21.4-31.8 30-48.8.1-.2.2-.5.2-.8s0-.5-.1-.8-.2-.5-.4-.6-.4-.3-.7-.4c-15.8-6.1-31.2-13.4-45.9-21.9-.3-.2-.5-.4-.7-.6s-.3-.6-.3-.9 0-.6.2-.9.3-.5.6-.7c3.1-2.3 6.2-4.7 9.1-7.1.3-.2.6-.4.9-.4s.7 0 1 .1c96.2 43.9 200.4 43.9 295.5 0 .3-.1.7-.2 1-.2s.7.2.9.4c2.9 2.4 6 4.9 9.1 7.2.2.2.4.4.6.7s.2.6.2.9-.1.6-.3.9-.4.5-.6.6c-14.7 8.6-30 15.9-45.9 21.8-.2.1-.5.2-.7.4s-.3.4-.4.7-.1.5-.1.8.1.5.2.8c8.8 17 18.8 33.3 30 48.8.2.3.6.6.9.7s.8.1 1.1 0c52.9-16.2 102.6-41.3 147.1-74.2.2-.2.4-.4.5-.6s.2-.5.2-.8c12.3-126.8-20.5-236.9-86.9-334.5zm-302 267.7c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.4 59.2-52.8 59.2m195.4 0c-29 0-52.8-26.6-52.8-59.2s23.4-59.2 52.8-59.2c29.7 0 53.3 26.8 52.8 59.2 0 32.7-23.2 59.2-52.8 59.2"/></svg></a><a href=https://pypi.org/project/tenets/ target=_blank rel=noopener title="Tenets on PyPI" class=md-social__link><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.8 200.5c-7.7-30.9-22.3-54.2-53.4-54.2h-40.1v47.4c0 36.8-31.2 67.8-66.8 67.8H172.7c-29.2 0-53.4 25-53.4 54.3v101.8c0 29 25.2 46 53.4 54.3 33.8 9.9 66.3 11.7 106.8 0 26.9-7.8 53.4-23.5 53.4-54.3v-40.7H226.2v-13.6h160.2c31.1 0 42.6-21.7 53.4-54.2 11.2-33.5 10.7-65.7 0-108.6M286.2 444.7a20.4 20.4 0 1 1 0-40.7 20.4 20.4 0 1 1 0 40.7M167.8 248.1h106.8c29.7 0 53.4-24.5 53.4-54.3V91.9c0-29-24.4-50.7-53.4-55.6-35.8-5.9-74.7-5.6-106.8.1-45.2 8-53.4 24.7-53.4 55.6v40.7h106.9v13.6h-147c-31.1 0-58.3 18.7-66.8 54.2-9.8 40.7-10.2 66.1 0 108.6 7.6 31.6 25.7 54.2 56.8 54.2H101v-48.8c0-35.3 30.5-66.4 66.8-66.4m-6.6-183.4a20.4 20.4 0 1 1 0 40.8 20.4 20.4 0 1 1 0-40.8"/></svg></a></div></div></div></footer></div><div class=md-dialog data-md-component=dialog><div class="md-dialog__inner md-typeset"></div></div><script id=__config type=application/json>{"annotate": null, "base": "../../../../..", "features": ["navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.expand", "navigation.path", "navigation.prune", "navigation.indexes", "navigation.top", "navigation.footer", "toc.follow", "search.suggest", "search.highlight", "search.share", "content.code.copy", "content.code.select", "content.code.annotate", "content.tabs.link", "content.tooltips"], "search": "../../../../../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script><script src=../../../../../assets/javascripts/bundle.e71a0d61.min.js></script><script src=../../../../../js/timeago.min.js></script><script src=../../../../../js/timeago_mkdocs_material.js></script><script src=../../../../../js/theme-toggle.js></script><script src=../../../../../js/copy-buttons.js></script><script src=../../../../../js/back-to-top.js></script><script src=../../../../../js/terminal.js></script><script src=../../../../../js/mobile-menu.js></script><script src=../../../../../js/image-modal.js></script><script src=../../../../../js/lantern.js></script><script src=../../../../../js/see-it-in-action.js></script><script src=../../../../../js/install-tabs.js></script></body></html>