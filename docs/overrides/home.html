{% extends "main.html" %}

{% block content %}
<style>
  /* Hide sidebars on homepage for desktop only; keep mobile drawer working */
  @media (min-width: 1100px) {
    .md-sidebar,
    .md-sidebar--primary,
    .md-nav--primary { display: none !important; }
  }

  /* Remove extra top margin */
  .md-content {
    margin-top: 0 !important;
  }
  /* Keep homepage content padding tighter; global spacing handled in main.css */
  .md-content__inner { margin: 0 !important; }
  /* Ensure homepage uses full width without TOC centering constraints */
  .md-content { max-width: none !important; padding-left: 0 !important; padding-right: 0 !important; }

  /* Hero positioning right after nav */
  .victorian-hero {
    min-height: calc(100vh - 118px);
    margin-top: 0 !important;
    padding-top: 3rem;
  }

  /* Sequential screenshots styling */
  .screenshots-container {
    display: flex;
    flex-direction: column;
    gap: 12px;
  }

  .screenshot-item {
    width: 100%;
    border: 1px solid rgba(245, 158, 11, 0.2);
    border-radius: 8px;
    overflow: hidden;
    transition: all 0.3s ease;
    opacity: 0;
    transform: translateY(20px);
    animation: fadeInUp 0.6s ease forwards;
    background: #1e1e1e;
    position: relative;
  }

  /* Terminal screenshots - add padding and constrain size */
  .screenshot-item.terminal-shot {
    padding: 40px;
    background: linear-gradient(135deg, #1e1e1e 0%, #2d2d30 100%);
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 200px;
  }

  .screenshot-item.terminal-shot img {
    width: auto;
    max-width: 85%;
    height: auto;
    max-height: 350px;
    object-fit: contain;
    border-radius: 4px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  }

  /* Context screenshots - centered with gradient like sessions */
  #pane-context .screenshot-item {
    padding: 40px;
    background: linear-gradient(135deg, #1e1e1e 0%, #2d2d30 100%);
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 200px;
  }

  #pane-context .screenshot-item img {
    width: auto;
    max-width: 85%;
    height: auto;
    max-height: 350px;
    margin: 0 auto;
    display: block;
    object-fit: contain;
    border-radius: 4px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  }

  /* Session screenshots - terminal style with padding */
  #pane-sessions .screenshot-item {
    padding: 40px;
    background: linear-gradient(135deg, #1e1e1e 0%, #2d2d30 100%);
    min-height: 200px;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  #pane-sessions .screenshot-item img {
    width: auto;
    max-width: 85%;
    height: auto;
    max-height: 350px;
    margin: 0 auto;
    display: block;
    object-fit: contain;
    border-radius: 4px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  }

  /* Stagger animation for multiple screenshots */
  .screenshot-item:nth-child(1) {
    animation-delay: 0.1s;
  }

  .screenshot-item:nth-child(2) {
    animation-delay: 0.3s;
  }

  .screenshot-item:nth-child(3) {
    animation-delay: 0.5s;
  }

  @keyframes fadeInUp {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .screenshot-item:hover {
    border-color: rgba(245, 158, 11, 0.4);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
    transform: translateY(-2px);
  }

  /* Analysis, Rank, Quality and Velocity screenshots - centered with gradient */
  #pane-analysis .screenshot-item,
  #pane-rank .screenshot-item,
  #pane-quality .screenshot-item,
  #pane-velocity .screenshot-item {
    padding: 40px;
    background: linear-gradient(135deg, #1e1e1e 0%, #2d2d30 100%);
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 200px;
  }

  #pane-analysis .screenshot-item img,
  #pane-rank .screenshot-item img,
  #pane-quality .screenshot-item img,
  #pane-velocity .screenshot-item img {
    width: auto;
    max-width: 85%;
    height: auto;
    max-height: 350px;
    margin: 0 auto;
    display: block;
    object-fit: contain;
    border-radius: 4px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  }

  .screenshot-item img {
    width: 100%;
    height: auto;
    display: block;
  }

  /* Light theme adjustments */
  [data-md-color-scheme="default"] .screenshot-item.terminal-shot,
  [data-md-color-scheme="default"] #pane-sessions .screenshot-item,
  [data-md-color-scheme="default"] #pane-context .screenshot-item,
  [data-md-color-scheme="default"] #pane-analysis .screenshot-item,
  [data-md-color-scheme="default"] #pane-rank .screenshot-item,
  [data-md-color-scheme="default"] #pane-quality .screenshot-item,
  [data-md-color-scheme="default"] #pane-velocity .screenshot-item {
    background: linear-gradient(135deg, #f5f5f5 0%, #e8e8e8 100%);
  }

  [data-md-color-scheme="default"] .screenshot-item.terminal-shot img,
  [data-md-color-scheme="default"] #pane-sessions .screenshot-item img {
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }

  /* Trigger animation when pane becomes active */
  .see-pane {
    display: none;
  }

  input[type="radio"]:checked ~ .see-panes .see-pane {
    display: none;
  }

  #tab-context:checked ~ .see-panes #pane-context,
  #tab-rank:checked ~ .see-panes #pane-rank,
  #tab-analysis:checked ~ .see-panes #pane-analysis,
  #tab-quality:checked ~ .see-panes #pane-quality,
  #tab-sessions:checked ~ .see-panes #pane-sessions,
  #tab-velocity:checked ~ .see-panes #pane-velocity,
  #tab-viz:checked ~ .see-panes #pane-viz {
    display: block;
  }

  /* Re-trigger animation when tab is selected */
  #tab-context:checked ~ .see-panes #pane-context .screenshot-item,
  #tab-rank:checked ~ .see-panes #pane-rank .screenshot-item,
  #tab-analysis:checked ~ .see-panes #pane-analysis .screenshot-item,
  #tab-quality:checked ~ .see-panes #pane-quality .screenshot-item,
  #tab-sessions:checked ~ .see-panes #pane-sessions .screenshot-item,
  #tab-velocity:checked ~ .see-panes #pane-velocity .screenshot-item,
  #tab-viz:checked ~ .see-panes #pane-viz .screenshot-item {
    animation: fadeInUp 0.6s ease forwards;
  }

  /* Screenshot caption */
  .screenshot-caption {
    padding: 8px 12px;
    background: rgba(0, 0, 0, 0.03);
    color: var(--md-default-fg-color--light);
    font-size: 0.9em;
    text-align: center;
    border-top: 1px solid rgba(0, 0, 0, 0.1);
  }

  /* Caption inside terminal shots */
  .terminal-shot .screenshot-caption {
    background: transparent;
    border-top: none;
    margin-top: 12px;
    color: rgba(255, 255, 255, 0.7);
    font-size: 0.85em;
  }

  [data-md-color-scheme="slate"] .screenshot-caption {
    background: rgba(255, 255, 255, 0.03);
    border-top-color: rgba(255, 255, 255, 0.1);
  }

  [data-md-color-scheme="default"] .terminal-shot .screenshot-caption {
    color: rgba(0, 0, 0, 0.6);
  }
</style>

<!-- Main Hero Section -->
<section class="victorian-hero">
  <!-- Victorian pattern background -->
  <div class="hero-background">
    <svg class="pattern-overlay" width="100%" height="100%" style="position: absolute; top: 0; left: 0; opacity: 0.03;">
      <defs>
        <pattern id="victorian-pattern" x="0" y="0" width="120" height="120" patternUnits="userSpaceOnUse">
          <circle cx="60" cy="60" r="2" fill="#f59e0b" opacity="0.4"/>
          <path d="M30,30 L90,90 M90,30 L30,90" stroke="#f59e0b" stroke-width="0.5" opacity="0.2"/>
          <rect x="45" y="45" width="30" height="30" fill="none" stroke="#f59e0b" stroke-width="0.5" opacity="0.15"/>
          <circle cx="60" cy="60" r="25" fill="none" stroke="#f59e0b" stroke-width="0.3" opacity="0.1"/>
          <path d="M60,35 L75,60 L60,85 L45,60 Z" fill="none" stroke="#f59e0b" stroke-width="0.3" opacity="0.1"/>
        </pattern>
      </defs>
      <rect width="100%" height="100%" fill="url(#victorian-pattern)"/>
    </svg>
  </div>

  <div class="hero-content">
    <!-- Static cropped logo with iridescent lantern glow + particles behind it -->
    <div class="torch-container">
   <!-- Lantern animation layer (auto-initialized by js/lantern.js) -->
  <div class="lantern-layer" data-lantern data-flicker-speed="2600" data-glow-intensity="1.15" data-particle-count="8" data-iridescent="true" aria-hidden="true"></div>
   <!-- Theme-aware logo switching -->
   <img src="{{ 'logos/tenets_dark_icon_transparent_cropped.png'}}"
     alt="tenets"
     class="torch-logo-static dark-logo">
   <img src="{{ 'logos/tenets_light_icon_transparent_cropped.png'}}"
     alt="tenets"
     class="torch-logo-static light-logo">
    </div><!-- /torch-container -->
    <p class="hero-tagline">MCP Server for AI Coding Assistants</p>

    <!-- Small pip install command right below tagline -->
    <div class="hero-quick-copy">
      <code>pip install tenets[mcp]</code>
      <button class="copy-btn-inline" data-clipboard-text="pip install tenets[mcp]" aria-label="Copy">
        <svg viewBox="0 0 16 16" width="12" height="12">
          <path fill="currentColor" d="M13 0H6a2 2 0 0 0-2 2 2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h7a2 2 0 0 0 2-2 2 2 0 0 0 2-2V2a2 2 0 0 0-2-2zm0 13V4a2 2 0 0 0-2-2H5a1 1 0 0 1 1-1h7a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1zM3 4a1 1 0 0 1 1-1h7a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V4z"/>
        </svg>
      </button>
    </div>

    <p class="hero-description">
      Give Cursor, Claude & Windsurf the context they need.<br>
      Multi-factor ranking finds relevant code automatically.<br>
      All processing stays local ‚Äî your code never leaves your machine.
    </p>

    <!-- MCP Setup, Quick Start, CLI buttons -->
    <div class="hero-actions">
      <!-- Link to MCP Setup -->
      <a href="{{ 'MCP/' | url }}" class="btn-primary">
        <span>Setup MCP</span>
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="4"/>
          <path d="M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4"/>
        </svg>
      </a>
      <!-- Link directly to Quick Start page -->
      <a href="{{ 'quickstart/' | url }}" class="btn-secondary">
        <span>Quick Start</span>
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M5 12h14M12 5l7 7-7 7"/>
        </svg>
      </a>
      <!-- Link to CLI Documentation -->
      <a href="{{ 'CLI/' | url }}" class="btn-secondary">
        <span>CLI Docs</span>
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
          <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
          <path d="M9 9l3 3-3 3M13 15h3"/>
        </svg>
      </a>
      <a href="#examples" class="btn-secondary scroll-to-examples">
        <span>See Examples</span>
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M7 12l5 5 5-5M7 7l5 5 5-5"/>
        </svg>
      </a>
    </div>

    <!-- Install commands right below buttons -->

  </div><!-- /hero-content -->
</section><!-- /victorian-hero -->

<!-- See It In Action: Tabbed Examples -->
<section class="examples-section" id="examples">
  <div class="section-container">
    <h2 class="section-title">See It In Action</h2>

    <!-- Radios must be siblings of .see-panes for CSS selectors to work -->
    <input type="radio" name="see-tabs" id="tab-context" checked>
    <input type="radio" name="see-tabs" id="tab-rank">
    <input type="radio" name="see-tabs" id="tab-analysis">
    <input type="radio" name="see-tabs" id="tab-quality">
    <input type="radio" name="see-tabs" id="tab-sessions">
    <input type="radio" name="see-tabs" id="tab-velocity">
    <input type="radio" name="see-tabs" id="tab-viz">

    <div class="see-tabs">
      <label class="see-tab-label" for="tab-context">Distill</label>
      <label class="see-tab-label" for="tab-rank">Rank</label>
      <label class="see-tab-label" for="tab-analysis">Analysis</label>
      <label class="see-tab-label" for="tab-quality">Quality</label>
      <label class="see-tab-label" for="tab-sessions">Sessions</label>
      <label class="see-tab-label" for="tab-velocity">Velocity</label>
      <label class="see-tab-label" for="tab-viz">Visualization</label>
    </div>

    <div class="see-panes">
      <div class="see-pane" id="pane-context">
        <div class="see-grid">
          <div class="see-code">
            <div class="see-header">
              <div class="see-dots"><span class="see-dot red"></span><span class="see-dot yellow"></span><span class="see-dot green"></span></div>
              <div class="see-title">Context Building</div>
            </div>
            <div class="see-body"><pre><code class="language-bash">$ tenets distill "add mistral api to summarizer" --format html</code></pre></div>
          </div>
          <div class="see-output" data-caption="Context builder assembling the most relevant files">
            <div class="see-header">
              <div class="see-dots"><span class="see-dot red"></span><span class="see-dot yellow"></span><span class="see-dot green"></span></div>
              <div class="see-title">Output</div>
            </div>
            <div class="see-body">
              <div class="screenshots-container">
                <div class="screenshot-item">
                  <img src="{{ 'assets/images/screenshots/context-building-1.png' | url }}" alt="Context building - Analyzing files" loading="lazy" onerror="this.onerror=null; this.src='{{ 'logos/tenets_dark_icon_transparent.png' | url }}'" />
                  <div class="screenshot-caption">Analyzing and ranking relevant files</div>
                </div>
                <div class="screenshot-item">
                  <img src="{{ 'assets/images/screenshots/context-building-2.png' | url }}" alt="Context building - Building context" loading="lazy" onerror="this.onerror=null; this.src='{{ 'logos/tenets_dark_icon_transparent.png' | url }}'" />
                  <div class="screenshot-caption">Building optimized context with summaries</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="see-pane" id="pane-rank">
        <div class="see-grid">
          <div class="see-code">
            <div class="see-header">
              <div class="see-dots"><span class="see-dot red"></span><span class="see-dot yellow"></span><span class="see-dot green"></span></div>
              <div class="see-title">Ranking Files</div>
            </div>
            <div class="see-body"><pre><code class="language-bash">$ tenets rank "fix summarizing truncation bug" --tree</code></pre></div>
          </div>
          <div class="see-output" data-caption="Ranking the most relevant files">
            <div class="see-header">
              <div class="see-dots"><span class="see-dot red"></span><span class="see-dot yellow"></span><span class="see-dot green"></span></div>
              <div class="see-title">Output</div>
            </div>
            <div class="see-body">
              <div class="screenshots-container">
                <div class="screenshot-item">
                  <img src="{{ 'assets/images/screenshots/rank.png' | url }}" alt="Ranking the most relevant files" loading="lazy" onerror="this.onerror=null; this.src='{{ 'logos/tenets_dark_icon_transparent.png' | url }}'" />
                  <div class="screenshot-caption">Ranking files by relevance using multi-factor scoring</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="see-pane" id="pane-analysis">
        <div class="see-grid">
          <div class="see-code">
            <div class="see-header">
              <div class="see-dots"><span class="see-dot red"></span><span class="see-dot yellow"></span><span class="see-dot green"></span></div>
              <div class="see-title">Code Analysis</div>
            </div>
            <div class="see-body"><pre><code class="language-bash">$ tenets examine . --complexity --hotspots --ownership</code></pre></div>
          </div>
          <div class="see-output" data-caption="Examination of complexity, hotspots, ownership">
            <div class="see-header">
              <div class="see-dots"><span class="see-dot red"></span><span class="see-dot yellow"></span><span class="see-dot green"></span></div>
              <div class="see-title">Output</div>
            </div>
            <div class="see-body">
              <div class="screenshots-container">
                <div class="screenshot-item">
                  <img src="{{ 'assets/images/screenshots/code-analysis.png' | url }}" alt="Code analysis" loading="lazy" onerror="this.onerror=null; this.src='{{ 'logos/tenets_dark_icon_transparent.png' | url }}'" />
                  <div class="screenshot-caption">Comprehensive code analysis with metrics</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="see-pane" id="pane-quality">
        <div class="see-grid">
          <div class="see-code">
            <div class="see-header">
              <div class="see-dots"><span class="see-dot red"></span><span class="see-dot yellow"></span><span class="see-dot green"></span></div>
              <div class="see-title">Quality Metrics</div>
            </div>
            <div class="see-body"><pre><code class="language-bash">$ tenets examine . --show-details --hotspots --format html</code></pre></div>
          </div>
          <div class="see-output" data-caption="Quality dashboards and suggestions">
            <div class="see-header">
              <div class="see-dots"><span class="see-dot red"></span><span class="see-dot yellow"></span><span class="see-dot green"></span></div>
              <div class="see-title">Output</div>
            </div>
            <div class="see-body">
              <div class="screenshots-container">
                <div class="screenshot-item">
                  <img src="{{ 'assets/images/screenshots/quality.png' | url }}" alt="Quality metrics" loading="lazy" onerror="this.onerror=null; this.src='{{ 'logos/tenets_dark_icon_transparent.png' | url }}'" />
                  <div class="screenshot-caption">Code quality metrics and improvement suggestions</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="see-pane" id="pane-sessions">
        <div class="see-grid">
          <div class="see-code">
            <div class="see-header">
              <div class="see-dots"><span class="see-dot red"></span><span class="see-dot yellow"></span><span class="see-dot green"></span></div>
              <div class="see-title">Sessions</div>
            </div>
            <div class="see-body"><pre><code class="language-bash">$ tenets session create payment-integration
$ tenets tenet add "Always validate user input" --priority critical --category security
$ tenets tenet add "Use type hints in Python" --priority high --category style
$ tenets instill --session payment-integration
$ tenets system-instruction set "Prefer small, safe diffs and add tests" --enable
$ tenets distill "add OAuth2 refresh tokens" --session payment-integration --remove-comments --condense</code></pre></div>
          </div>
          <div class="see-output" data-caption="Sessions managing iterative context">
            <div class="see-header">
              <div class="see-dots"><span class="see-dot red"></span><span class="see-dot yellow"></span><span class="see-dot green"></span></div>
              <div class="see-title">Output</div>
            </div>
            <div class="see-body">
              <div class="screenshots-container">
                <div class="screenshot-item">
                  <img src="{{ 'assets/images/screenshots/sessions-1.png' | url }}" alt="Sessions - Creating session" loading="lazy" onerror="this.onerror=null; this.src='{{ 'logos/tenets_dark_icon_transparent.png' | url }}'" />
                  <div class="screenshot-caption">Creating a session and adding tenets</div>
                </div>
                <div class="screenshot-item">
                  <img src="{{ 'assets/images/screenshots/sessions-2.png' | url }}" alt="Sessions - Managing tenets" loading="lazy" onerror="this.onerror=null; this.src='{{ 'logos/tenets_dark_icon_transparent.png' | url }}'" />
                  <div class="screenshot-caption">Managing and instilling guiding principles</div>
                </div>
                <div class="screenshot-item">
                  <img src="{{ 'assets/images/screenshots/sessions-3.png' | url }}" alt="Sessions - Building context" loading="lazy" onerror="this.onerror=null; this.src='{{ 'logos/tenets_dark_icon_transparent.png' | url }}'" />
                  <div class="screenshot-caption">Building context with session-aware tenets</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="see-pane" id="pane-velocity">
        <div class="see-grid">
          <div class="see-code">
            <div class="see-header">
              <div class="see-dots"><span class="see-dot red"></span><span class="see-dot yellow"></span><span class="see-dot green"></span></div>
              <div class="see-title">Velocity</div>
            </div>
            <div class="see-body"><pre><code class="language-bash">$ tenets momentum --team --since "last month" --detailed</code></pre></div>
          </div>
          <div class="see-output" data-caption="Team velocity trends and insights">
            <div class="see-header">
              <div class="see-dots"><span class="see-dot red"></span><span class="see-dot yellow"></span><span class="see-dot green"></span></div>
              <div class="see-title">Output</div>
            </div>
            <div class="see-body">
              <div class="screenshots-container">
                <div class="screenshot-item">
                  <img src="{{ 'assets/images/screenshots/velocity.png' | url }}" alt="Velocity" loading="lazy" onerror="this.onerror=null; this.src='{{ 'logos/tenets_dark_icon_transparent.png' | url }}'" />
                  <div class="screenshot-caption">Team velocity metrics and trends</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="see-pane" id="pane-viz">
        <div class="see-grid">
          <div class="see-code">
            <div class="see-header">
              <div class="see-dots"><span class="see-dot red"></span><span class="see-dot yellow"></span><span class="see-dot green"></span></div>
              <div class="see-title">Visualization</div>
            </div>
            <div class="see-body"><pre><code class="language-bash">$ tenets viz deps --format html --output interactive.html</code></pre></div>
          </div>
          <div class="see-output" data-caption="Dependency graph visualization">
            <div class="see-header">
              <div class="see-dots"><span class="see-dot red"></span><span class="see-dot yellow"></span><span class="see-dot green"></span></div>
              <div class="see-title">Output</div>
            </div>
            <div class="see-body">
              <div class="screenshots-container">
                <div class="screenshot-item terminal-shot">
                  <img src="{{ 'assets/images/screenshots/visualization.png' | url }}" alt="Visualization" loading="lazy" onerror="this.onerror=null; this.src='{{ 'logos/tenets_dark_icon_transparent.png' | url }}'" />
                  <div class="screenshot-caption">D3.js interactive dependency graph visualization</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>


<!-- Core Features Section -->
<section class="features-section">
  <div class="section-container">
    <h2 class="section-title">Core Features</h2>

    <div class="features-grid">
      <!-- Context Building -->
      <div class="feature-card-large">
        <div class="feature-icon">
          <svg viewBox="0 0 64 64" width="64" height="64">
            <defs>
              <linearGradient id="brain-grad" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#f59e0b;stop-opacity:1" />
                <stop offset="50%" style="stop-color:#fbbf24;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#fcd34d;stop-opacity:1" />
              </linearGradient>
            </defs>
            <circle cx="32" cy="32" r="20" fill="none" stroke="url(#brain-grad)" stroke-width="2" opacity="0.8"/>
            <circle cx="32" cy="12" r="4" fill="url(#brain-grad)" class="pulse-node"/>
            <circle cx="52" cy="32" r="4" fill="url(#brain-grad)" class="pulse-node" style="animation-delay: 0.2s"/>
            <circle cx="32" cy="52" r="4" fill="url(#brain-grad)" class="pulse-node" style="animation-delay: 0.4s"/>
            <circle cx="12" cy="32" r="4" fill="url(#brain-grad)" class="pulse-node" style="animation-delay: 0.6s"/>
            <circle cx="32" cy="32" r="6" fill="url(#brain-grad)"/>
            <line x1="32" y1="12" x2="32" y2="32" stroke="url(#brain-grad)" stroke-width="1.5" opacity="0.7" class="connection-line"/>
            <line x1="52" y1="32" x2="32" y2="32" stroke="url(#brain-grad)" stroke-width="1.5" opacity="0.7" class="connection-line" style="animation-delay: 0.3s"/>
            <line x1="32" y1="52" x2="32" y2="32" stroke="url(#brain-grad)" stroke-width="1.5" opacity="0.7" class="connection-line" style="animation-delay: 0.6s"/>
            <line x1="12" y1="32" x2="32" y2="32" stroke="url(#brain-grad)" stroke-width="1.5" opacity="0.7" class="connection-line" style="animation-delay: 0.9s"/>
          </svg>
        </div>
        <h3>Intelligent Context Building</h3>
        <p class="feature-description">
          Multi-factor ranking algorithm that goes beyond keyword matching.
          Analyzes code structure, import relationships, Git history, and semantic meaning
          to surface exactly the files you need for any development task.
        </p>
        <ul class="feature-list">
          <li><strong>Multi-Factor Ranking:</strong> Keywords, structure, imports, path relevance, and Git signals</li>
          <li><strong>Optional ML:</strong> Semantic embeddings and transformers when <code>tenets[ml]</code> is installed</li>
          <li><strong>Summarization:</strong> Rules-based and ML summarizers built-in; LLMs only if API keys enabled</li>
          <li><strong>Token Optimization:</strong> Budget-aware packing and model-specific token counting</li>
          <li><strong>Lightweight Extras:</strong> Extras-based dependency architecture keeps core lean</li>
        </ul>
      </div>

      <!-- Code Quality & Evaluation -->
      <div class="feature-card-large">
        <div class="feature-icon">
          <svg viewBox="0 0 64 64" width="64" height="64">
            <defs>
              <linearGradient id="chart-grad" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#059669;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#10b981;stop-opacity:1" />
              </linearGradient>
            </defs>
            <rect x="12" y="40" width="8" height="12" fill="url(#chart-grad)" opacity="0.8" class="bar-grow" style="animation-delay: 0s"/>
            <rect x="22" y="32" width="8" height="20" fill="url(#chart-grad)" opacity="0.9" class="bar-grow" style="animation-delay: 0.1s"/>
            <rect x="32" y="24" width="8" height="28" fill="url(#chart-grad)" class="bar-grow" style="animation-delay: 0.2s"/>
            <rect x="42" y="28" width="8" height="24" fill="url(#chart-grad)" opacity="0.9" class="bar-grow" style="animation-delay: 0.3s"/>
            <path d="M10 20 L20 25 L30 15 L40 22 L50 18" fill="none" stroke="url(#chart-grad)" stroke-width="2" class="line-draw"/>
            <circle cx="10" cy="20" r="2" fill="url(#chart-grad)" class="dot-appear" style="animation-delay: 0.5s"/>
            <circle cx="20" cy="25" r="2" fill="url(#chart-grad)" class="dot-appear" style="animation-delay: 0.6s"/>
            <circle cx="30" cy="15" r="2" fill="url(#chart-grad)" class="dot-appear" style="animation-delay: 0.7s"/>
            <circle cx="40" cy="22" r="2" fill="url(#chart-grad)" class="dot-appear" style="animation-delay: 0.8s"/>
            <circle cx="50" cy="18" r="2" fill="url(#chart-grad)" class="dot-appear" style="animation-delay: 0.9s"/>
          </svg>
        </div>
        <h3>Code Quality Metrics & Evaluation</h3>
        <p class="feature-description">
          Comprehensive evaluation system that assesses code quality, identifies hotspots,
          tracks technical debt, and provides actionable insights. Use tenets not just for
          prompting but for continuous code quality monitoring and improvement.
        </p>
        <ul class="feature-list">
          <li><strong>Complexity Analysis:</strong> Cyclomatic, cognitive, and Halstead metrics</li>
          <li><strong>Quality Evaluation:</strong> Maintainability index and code health scoring</li>
          <li><strong>Technical Debt Tracking:</strong> Identify and prioritize refactoring needs</li>
          <li><strong>Test Coverage Analysis:</strong> Find untested code paths and improve reliability</li>
          <li><strong>Code Pattern Detection:</strong> Identify anti-patterns and best practices</li>
        </ul>
      </div>

      <!-- Session Management & Prompting -->
      <div class="feature-card-large">
        <div class="feature-icon">
          <svg viewBox="0 0 64 64" width="64" height="64">
            <defs>
              <linearGradient id="session-grad" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#8b5cf6;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#a78bfa;stop-opacity:1" />
              </linearGradient>
            </defs>
            <line x1="32" y1="8" x2="32" y2="56" stroke="url(#session-grad)" stroke-width="2"/>
            <circle cx="32" cy="16" r="5" fill="url(#session-grad)" class="session-dot"/>
            <circle cx="32" cy="32" r="5" fill="url(#session-grad)" class="session-dot" style="animation-delay: 0.3s"/>
            <circle cx="32" cy="48" r="5" fill="url(#session-grad)" class="session-dot" style="animation-delay: 0.6s"/>
            <path d="M37 16 L45 16 L45 24" fill="none" stroke="url(#session-grad)" stroke-width="1.5" opacity="0.7" class="branch-line"/>
            <path d="M27 32 L19 32 L19 40" fill="none" stroke="url(#session-grad)" stroke-width="1.5" opacity="0.7" class="branch-line" style="animation-delay: 0.5s"/>
            <path d="M37 48 L45 48 L45 56" fill="none" stroke="url(#session-grad)" stroke-width="1.5" opacity="0.7" class="branch-line" style="animation-delay: 1s"/>
          </svg>
        </div>
        <h3>Stateful Prompting & Tenets</h3>
        <p class="feature-description">
          Build complex features iteratively with persistent sessions. Define guiding principles
          (tenets) that shape how AI understands your codebase. Perfect for ongoing conversations
          with AI assistants and maintaining context across multiple prompts.
        </p>
        <ul class="feature-list">
          <li><strong>Persistent Context:</strong> Maintain state across multiple CLI invocations</li>
          <li><strong>Guiding Tenets:</strong> Define principles that guide AI interactions</li>
          <li><strong>Incremental Building:</strong> Add context without starting over each time</li>
          <li><strong>Session Branching:</strong> Explore alternatives without losing work</li>
          <li><strong>SQLite Storage:</strong> Reliable local session persistence and history</li>
        </ul>
      </div>

      <!-- Development Intelligence -->
      <div class="feature-card-large">
        <div class="feature-icon">
          <svg viewBox="0 0 64 64" width="64" height="64">
            <defs>
              <linearGradient id="velocity-grad" x1="0%" y1="0%" x2="100%" y2="100%">
                <stop offset="0%" style="stop-color:#ef4444;stop-opacity:1" />
                <stop offset="50%" style="stop-color:#f97316;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#fbbf24;stop-opacity:1" />
              </linearGradient>
            </defs>
            <path d="M32 12 L40 28 L32 44 L24 28 Z" fill="url(#velocity-grad)" class="rocket-body"/>
            <path d="M32 44 L28 52 L32 56 L36 52 Z" fill="url(#velocity-grad)" opacity="0.8" class="rocket-flame"/>
            <path d="M20 48 L24 52 L24 56" fill="none" stroke="url(#velocity-grad)" stroke-width="2" class="exhaust-left"/>
            <path d="M44 48 L40 52 L40 56" fill="none" stroke="url(#velocity-grad)" stroke-width="2" class="exhaust-right"/>
            <circle cx="32" cy="20" r="3" fill="white" opacity="0.9"/>
          </svg>
        </div>
        <h3>Development Intelligence & Insights</h3>
        <p class="feature-description">
          Track velocity, identify bottlenecks, and understand team patterns.
          Visualize your architecture, monitor code evolution, and make data-driven
          decisions about refactoring, technical debt, and resource allocation.
        </p>
        <ul class="feature-list">
          <li><strong>Velocity Tracking:</strong> Monitor team and individual productivity metrics</li>
          <li><strong>Hotspot Analysis:</strong> Find frequently changing and problematic areas</li>
          <li><strong>Dependency Visualization:</strong> Understand architecture and coupling</li>
          <li><strong>Contributor Analytics:</strong> Track code ownership and expertise</li>
          <li><strong>Trend Analysis:</strong> Monitor quality and velocity changes over time</li>
        </ul>
      </div>
    </div>
  </div>
</section>

<!-- Removed duplicate early script; logic lives below and runs after DOM ready -->

<!-- How It Works Architecture -->
<section class="architecture-section">
  <div class="section-container" style="max-width: none; padding-left: 0; padding-right: 0;">
    <h2 class="section-title">How Tenets Works</h2>

    <div class="architecture-flow" data-arch-flow>
  <div class="arch-stage" data-stage="1" data-target="input" role="button" tabindex="0">
        <div class="stage-icon">
          <span class="stage-number">1</span>
        </div>
        <h3>Input</h3>
        <p>Natural language prompt<br>or specific query</p>
      </div>

      <div class="arch-arrow">‚Üí</div>

  <div class="arch-stage" data-stage="2" data-target="scan" role="button" tabindex="0">
        <div class="stage-icon">
          <span class="stage-number">2</span>
        </div>
        <h3>Scan</h3>
        <p>Parallel file discovery<br>respecting .gitignore</p>
      </div>

      <div class="arch-arrow">‚Üí</div>

  <div class="arch-stage" data-stage="3" data-target="analyze" role="button" tabindex="0">
        <div class="stage-icon">
          <span class="stage-number">3</span>
        </div>
        <h3>Analyze</h3>
        <p>Language analyzers & AST<br>structure and metrics</p>
      </div>

      <div class="arch-arrow">‚Üí</div>

  <div class="arch-stage" data-stage="4" data-target="rank" role="button" tabindex="0">
        <div class="stage-icon">
          <span class="stage-number">4</span>
        </div>
        <h3>Rank</h3>
        <p>Multi-factor scoring<br>keywords, structure, git</p>
      </div>

      <div class="arch-arrow">‚Üí</div>

  <div class="arch-stage" data-stage="5" data-target="ml-optional" role="button" tabindex="0">
        <div class="stage-icon">
          <span class="stage-number">5</span>
        </div>
        <h3>ML (Optional)</h3>
        <p>Embeddings & semantic<br>similarity when enabled</p>
      </div>

      <div class="arch-arrow">‚Üí</div>

  <div class="arch-stage" data-stage="6" data-target="tenets-injection" role="button" tabindex="0">
        <div class="stage-icon">
          <span class="stage-number">6</span>
        </div>
        <h3>Tenets Injection</h3>
        <p>Inject guiding principles<br>maintain consistency</p>
      </div>

      <div class="arch-arrow">‚Üí</div>

  <div class="arch-stage" data-stage="7" data-target="summarize" role="button" tabindex="0">
        <div class="stage-icon">
          <span class="stage-number">7</span>
        </div>
        <h3>Summarize & Output</h3>
        <p>Token budgeting & summaries<br>LLMs optional via API keys</p>
      </div>
    </div>
    <!-- Architecture details panel -->
    <div class="architecture-details" data-arch-details>
      <div class="detail-card" data-detail="input" aria-hidden="true">
        <h4>üìù Input & Prompt Parsing</h4>
        <ul>
          <li>NLP extracts intent, temporal references, fetches GitHub/JIRA links</li>
          <li>Intent categorization affects ranking weights</li>
          <li>Smart test file inclusion based on context</li>
          <li>Project-aware defaults from config</li>
        </ul>
      </div>

      <div class="detail-card" data-detail="scan" aria-hidden="true">
        <h4>üîé Scan & Discovery</h4>
        <ul>
          <li>Parallel OS-optimized traversal respecting .gitignore and custom filters</li>
          <li>Language detection for 15+ languages via extensions and content</li>
          <li>Streams files immediately to analyzers without blocking</li>
        </ul>
      </div>

      <div class="detail-card" data-detail="analyze" aria-hidden="true">
        <h4>üß† Analyze & Extract</h4>
        <ul>
          <li>AST parsing extracts imports, functions, classes for 15+ languages</li>
          <li>Lightweight structure analysis optimized for speed over semantics</li>
          <li>Content-hash caching prevents re-analysis of unchanged files</li>
        </ul>
      </div>

      <div class="detail-card" data-detail="rank" aria-hidden="true">
        <h4>üìà Rank & Score</h4>
        <ul>
          <li>BM25/TF-IDF similarity with keyword matching and path relevance</li>
          <li>Import centrality via PageRank on dependency graph</li>
          <li>Git signals (recency, frequency) and intent-aware weight adjustment</li>
        </ul>
      </div>

      <div class="detail-card" data-detail="ml-optional" aria-hidden="true">
        <h4>ü§ñ ML Integrations (Optional)</h4>
        <ul>
          <li>Local sentence-transformers for semantic similarity without API calls</li>
          <li>Multiple providers: OpenAI, Anthropic, Cohere, local models</li>
          <li>Disabled by default - install via <code>pip install tenets[ml]</code></li>
        </ul>
      </div>

      <div class="detail-card" data-detail="tenets-injection" aria-hidden="true">
        <h4>üéØ Tenets Injection</h4>
        <ul>
          <li>Injects project guidelines to combat LLM drift in long sessions</li>
          <li>Maintains consistency across multiple AI interactions</li>
          <li>Adaptive frequency based on conversation complexity</li>
          <li>Custom tenets via .tenets file or config</li>
        </ul>
      </div>

      <div class="detail-card" data-detail="summarize" aria-hidden="true">
        <h4>üì¶ Summarization & Output</h4>
        <ul>
          <li>Model-specific token counting for GPT-4, Claude, Llama, etc.</li>
          <li>Built-in summarizers: TextRank, LSA, code-aware extraction</li>
          <li>Multiple formats: Markdown, XML (Claude), JSON, HTML</li>
          <li>Optional LLM summarization with explicit API consent</li>
        </ul>
      </div>
    </div>

    <script>
    // Inline interaction: bi-directional highlighting (stage ‚Üî detail card)
    window.addEventListener('DOMContentLoaded', function(){
      const flow = document.querySelector('[data-arch-flow]');
      const detailsRoot = document.querySelector('[data-arch-details]');
      const stages = flow ? Array.from(flow.querySelectorAll('.arch-stage')) : [];
      const cards = detailsRoot ? Array.from(detailsRoot.querySelectorAll('.detail-card')) : [];
      if (!stages.length || !cards.length) return;

      const activate = (key) => {
        // Cards
        cards.forEach(card => {
          const match = card.dataset.detail === key;
          card.classList.toggle('is-active', match);
          card.setAttribute('aria-hidden', match ? 'false' : 'true');
        });
        // Stages
        stages.forEach(stage => {
          const match = stage.dataset.target === key;
          stage.classList.toggle('is-active', match);
          stage.setAttribute('aria-pressed', match ? 'true' : 'false');
        });
      };

      // Default selection
      activate('scan');

      // Stage interactions
      stages.forEach(stage => {
        const key = stage.dataset.target;
        ['mouseenter','focus','click'].forEach(evt => stage.addEventListener(evt, () => activate(key)));
        stage.addEventListener('keydown', (e) => {
          if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); activate(key); }
        });
      });

      // Card interactions
      cards.forEach(card => {
        const key = card.dataset.detail;
        ['mouseenter','focus','click'].forEach(evt => card.addEventListener(evt, () => activate(key)));
        card.tabIndex = 0; // make focusable
        card.addEventListener('keydown', (e) => {
          if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); activate(key); }
        });
      });
    });
    </script>
  </div>
</section>

<!-- Installation Section -->
<section class="install-section">
  <div class="section-container">
    <h2 class="section-title">Installation Options</h2>

    <div class="install-grid">
      <div class="install-card featured">
        <div class="featured-badge">Recommended</div>
        <h3><span class="full-text">MCP Server</span><span class="short-text">MCP</span></h3>
        <div class="code-block">
          <code>pip install tenets[mcp]</code>
          <button class="copy-btn" data-text="pip install tenets[mcp]">Copy</button>
        </div>
        <p class="install-note">For Cursor, Claude Desktop, Windsurf</p>
      </div>

      <div class="install-card">
        <h3><span class="full-text">Core Only</span><span class="short-text">Core</span></h3>
        <div class="code-block">
          <code>pip install tenets</code>
          <button class="copy-btn" data-text="pip install tenets">Copy</button>
        </div>
        <p class="install-note">CLI + Python library (no MCP)</p>
      </div>

      <div class="install-card">
        <h3><span class="full-text">Everything</span><span class="short-text">All</span></h3>
        <div class="code-block">
          <code>pip install tenets[all]</code>
          <button class="copy-btn" data-text="pip install tenets[all]">Copy</button>
        </div>
        <p class="install-note">MCP + ML + visualization</p>
      </div>

      <div class="install-card coming-soon" aria-disabled="true">
        <div class="coming-soon-badge" aria-hidden="true">Coming soon</div>
        <h3><span class="full-text">Docker (Install &amp; Build)</span><span class="short-text">Docker</span></h3>
        <div class="code-block">
          <code># Official Docker commands are coming soon</code>
          <button class="copy-btn" disabled>Copy</button>
        </div>
        <p class="install-note">Official Docker image and compose examples coming soon</p>
      </div>
    </div>

    <div class="install-cta">
      <a href="{{ 'installation/'}}" class="btn-primary large">
        View Installation Guide
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M9 18l6-6-6-6"/>
        </svg>
      </a>
      <a href="https://github.com/jddunn/tenets" class="btn-secondary large" target="_blank" rel="noopener">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
          <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
        </svg>
        <span>View on GitHub</span>
      </a>
    </div>
  </div>
</section>

<!-- Back to top handled by js/back-to-top.js -->

{% endblock %}

{% block footer %}
  <!-- Newsletter CTA Section -->
  <section class="newsletter-section">
    <div class="newsletter-content">
      <h3>Stay Updated</h3>
      <p>Get the latest Tenets updates and AI development insights</p>
      <script async src="https://eocampaign1.com/form/9262a386-6ef3-11f0-bd78-dff98cfe1a02.js" data-form="9262a386-6ef3-11f0-bd78-dff98cfe1a02"></script>
    </div>
  </section>

  {{ super() }}
{% endblock %}
