# pytest.ini - Pytest configuration for Tenets
# This file configures pytest behavior for the entire test suite

[tool:pytest]
# Minimum pytest version required
minversion = 7.0

# Test discovery patterns
python_files = test_*.py *_test.py
python_classes = Test*
python_functions = test_*

# Default command line options
addopts = 
    # Verbose output with short test summary
    -ra
    --strict-markers
    --strict-config
    
    # Coverage settings
    --cov=tenets
    --cov-branch
    --cov-report=term-missing:skip-covered
    --cov-report=xml
    --cov-report=html
    --cov-fail-under=70
    
    # Parallel execution (adjust based on CI environment)
    -n auto
    
    # Show slowest tests
    --durations=10
    
    # Fail on warnings
    --strict-markers
    -W error::DeprecationWarning
    -W error::PendingDeprecationWarning

# Test paths
testpaths = tests

# Python path additions
pythonpath = .

# Markers for organizing tests
markers =
    unit: Unit tests with mocked dependencies
    integration: Integration tests with real components
    slow: Tests that take more than 1 second
    requires_git: Tests that require a git repository
    requires_ml: Tests that require ML dependencies
    cli: CLI command tests
    smoke: Quick smoke tests for CI
    
# Coverage exclusions
[coverage:run]
source = tenets
branch = True
omit = 
    */tests/*
    */test_*.py
    */__main__.py
    */cli/app.py

[coverage:report]
exclude_lines =
    pragma: no cover
    def __repr__
    if TYPE_CHECKING:
    raise AssertionError
    raise NotImplementedError
    if __name__ == .__main__.:
    @abstractmethod
    @abc.abstractmethod
    pass
    ...

[coverage:html]
directory = htmlcov